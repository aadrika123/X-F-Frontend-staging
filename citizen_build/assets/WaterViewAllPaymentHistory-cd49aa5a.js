import{j as e}from"./mui-8e804a04.js";import{r as t,u as P}from"./router-87042356.js";import{W as C}from"./WaterApiList-5dfb5a8b.js";import{A as k,B as _}from"./index-0f28b603.js";import{N as L}from"./NoDataFoundStyle1-7c7ae943.js";import{h as R}from"./moment-fbc5633a.js";import"./react-09dd1212.js";import"./axios-97164839.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";const B=()=>{var d,x,p,h;const[m,o]=t.useState(!1),[a,u]=t.useState(""),[l,g]=t.useState(1),[i,j]=t.useState(5),[n,y]=t.useState(""),{api_waterCitizenPaymentHistory:N,header:f}=C(),c=P();t.useEffect(()=>{w()},[l,i]);const w=()=>{o(!0),k.post(N,{pages:i,page:l},f).then(s=>{s.data.status?(console.log("Water Citizen payment history date",s.data.data),u(s.data.data),o(!1)):(console.log("Water Citizen payment history date",s.data.data),o(!1))}).catch(s=>{console.log("Exception while getting water payment history",s),o(!1)})},b=(s,r)=>{if(console.log("transId",s,r),r==1)return c(`/waterUserReceipt/${s}`);if(r==2)return c(`/waterConnReceipt/${s}`)},v=s=>s=="&laquo; Previous"?"<< Prev":s=="Next &raquo;"?">> Next":s,S=s=>n===""?!0:s.tran_no.toLowerCase().includes(n.toLowerCase());if(m)return e.jsx(_,{});if(((d=a==null?void 0:a.data)==null?void 0:d.length)<1)return e.jsx(L,{message:"No Payment History Found."});if(((x=a==null?void 0:a.data)==null?void 0:x.length)>=1)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-3 font-semibold text-center text-lg text-gray-700",children:" Water Payment Transactions "}),e.jsxs("div",{className:"relative overflow-x-auto sm:rounded-lg border shadow-md bg-white  mb-20",children:[e.jsxs("div",{className:"flex justify-between my-3 mx-5  ",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("p",{children:"Show"}),e.jsxs("select",{onChange:s=>j(s.target.value),name:"",id:"",className:"border rounded shadow w-24",children:[e.jsx("option",{value:"5",children:"5 Records"}),e.jsx("option",{value:"10",children:"10 Records"}),e.jsx("option",{value:"20",children:"20 Records"}),e.jsx("option",{value:"30",children:"30 Records"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("p",{children:"Search"}),e.jsx("input",{type:"text",name:"search",value:n,onChange:s=>y(s.target.value),className:"border rounded shadow w-40"})]})]}),e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 ",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-[#f0f9ff]",children:e.jsxs("tr",{children:[e.jsxs("th",{scope:"col",className:"p-4",children:[" ",e.jsx("div",{className:"flex items-center",children:" SL "})," "]}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Transaction No."}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Payment Mode"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Paid For"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Transaction Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),e.jsx("tbody",{className:"",children:a&&((p=a==null?void 0:a.data)==null?void 0:p.filter(S).map((s,r)=>e.jsxs("tr",{className:"bg-white border-b dark:bg-white  hover:bg-gray-50",children:[e.jsx("td",{className:"w-4 p-4",children:e.jsx("div",{className:"flex items-center",children:r+1})}),e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-black whitespace-nowrap ",children:s.tran_no}),e.jsx("td",{className:"px-6 py-4",children:s.payment_mode}),e.jsx("td",{className:"px-6 py-4",children:s.amount}),e.jsx("td",{className:"px-6 py-4",children:s.tran_type}),e.jsx("td",{className:"px-6 py-4",children:R(s==null?void 0:s.tran_date).format("DD-MMM-yy")}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{onClick:()=>b(s.tran_no,s.tran_type_id),className:"font-medium text-blue-600 border-indigo-600 cursor-pointer hover:bg-indigo-600 hover:text-white shadow-md rounded border px-2 py-1 text-center whitespace-nowrap",children:"View Receipt"})})]})))})]}),e.jsxs("nav",{className:"block md:flex items-center md:justify-between text-center md:pt-4 m-5","aria-label":"Table navigation",children:[e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["Showing ",e.jsxs("span",{className:"font-semibold text-black",children:[a==null?void 0:a.from,"-",a==null?void 0:a.to]})," of ",e.jsx("span",{className:"font-semibold text-black",children:a==null?void 0:a.total})]}),e.jsx("ul",{className:"inline-flex items-center -space-x-px",children:(h=a==null?void 0:a.links)==null?void 0:h.map(s=>e.jsx("li",{children:e.jsx("p",{onClick:()=>{g(s==null?void 0:s.url.slice(-1))},className:` ${(s==null?void 0:s.active)==!0?"bg-indigo-500 text-white":"bg-white text-gray-500"} px-3 py-2 leading-tight  border border-gray-300 hover:bg-indigo-100 hover:text-gray-700 cursor-pointer whitespace-nowrap`,children:v(s.label)})}))})]})]})]})};export{B as default};
