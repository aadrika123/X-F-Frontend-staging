import{j as e}from"./mui-8e804a04.js";import{u as E,r as l}from"./router-87042356.js";import{c as D,u as F,an as R,ao as T,R as H,ak as L,ap as U,n as x,X as _,y as P}from"./index-0f28b603.js";import{b as M}from"./index.esm-a4ef204f.js";import{a as u}from"./axios-97164839.js";import{C as W}from"./CitizenApplyApiList-5b22da78.js";import"./react-09dd1212.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";const K=()=>{var c;const{getApartmentLists:p,getWardNoList:h,getApartmentConsumer:f}=W(),g=E(),b=[{Header:"Sl.No.",Cell:({row:a})=>e.jsx("div",{children:(a==null?void 0:a.index)+1})},{Header:"WARD NO.",accessor:"ward_no",Cell:({cell:a})=>{var s;return x((s=a.row.original)==null?void 0:s.ward_no)}},{Header:"ADDRESS",accessor:"apt_address",Cell:({cell:a})=>{var s;return x((s=a.row.original)==null?void 0:s.apt_address)}},{Header:"APARTMENT NAME",accessor:"apt_name",Cell:({cell:a})=>{var s;return(s=a.row.original)==null?void 0:s.apt_name},className:"w -[7%]"},{Header:"TOTAL DEMAND",accessor:"demandAmt",Cell:({cell:a})=>{var s;return _((s=a.row.original)==null?void 0:s.demandAmt)}},{Header:"DEMAND UPTO",accessor:"demandUpto",Cell:({cell:a})=>{var s;return P((s=a.row.original)==null?void 0:s.demandUpto)}},{Header:"STATUS",accessor:"",Cell:({cell:a})=>{var s;return e.jsx("div",{className:"font-semibold",children:e.jsx("div",{children:((s=a.row.original)==null?void 0:s.demandAmt)<0?e.jsx("span",{className:"text-green-500",children:"Paid"}):e.jsx("span",{className:"text-red-500 ",children:"Unpaid"})})})}},{Header:"Action",Cell:({cell:a})=>e.jsx("div",{className:"flex items-center flex-wrap md:flex-nowrap flex-row gap-2 ",children:e.jsxs("button",{onClick:()=>{var s,t;g(`/apartments/${(t=(s=a==null?void 0:a.row)==null?void 0:s.original)==null?void 0:t.id}`)},className:`border border-sky-700 text-sky-700 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-sky-700 \r
                    hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(M,{})," View"]})})}],[n,w]=l.useState(),[j,N]=l.useState(0),[o,y]=l.useState(!1),[i,v]=l.useState(),[A,d]=l.useState(!1),S=D({}),r=F({initialValues:{wardNo:"",apartment:""},enableReinitialize:!0,onSubmit:(a,s)=>{var t,m;console.log("Value.....",a),w({wardNo:(t=r==null?void 0:r.values)==null?void 0:t.wardNo,id:(m=r==null?void 0:r.values)==null?void 0:m.apartment}),N(C=>C+1)},validationSchema:S});return l.useEffect(()=>{d(!0),u.post(h).then(a=>{d(!1),a.data.status&&v(a.data.data)}).catch(a=>{d(!1),console.log("Error while getting application data")})},[]),l.useEffect(()=>{var a,s;(a=r==null?void 0:r.values)!=null&&a.wardNo&&(d(!0),u.post(p,{wardNo:(s=r==null?void 0:r.values)==null?void 0:s.wardNo}).then(t=>{d(!1),t.data.status?y(t.data.data):console.log("Failed to fetch application data")}).catch(t=>{d(!1),console.log("Error while getting application data")}))},[(c=r==null?void 0:r.values)==null?void 0:c.wardNo]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-full",children:e.jsx("div",{className:"overflow-y-auto max-h-screen",children:e.jsx("div",{className:"w-full ",children:e.jsx("div",{className:" ",children:e.jsxs("div",{className:"w-full flex flex-col gap-5 justify-center items-center  transition-all duration-200",children:[e.jsx("aside",{className:" w-full bg-slate-50 shadow-md h-max",children:e.jsx(R,{value:r,children:e.jsxs(T,{onSubmit:r.handleSubmit,children:[e.jsx("h1",{className:"text-xl font-semibold uppercase text-center text-gray-700 border-b border-gray-400 mb-4 pb-1",children:"Search Apartments"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-x-4 items-center gap-y-2 pb-4 mb-2 border-b",children:[e.jsxs("div",{className:"w-full md:w-[25%] ml-3",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Ward No.",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...r.getFieldProps("wardNo"),className:`${r.errors.searchBy?"text-red-400 font-semibold border border-solid border-red-400 placeholder-red-300 shadow-red-100 ":"text-gray-700 font-normal border border-solid border-gray-400 placeholder-gray-400 h-10"} cursor-pointer w-full px-3 py-1 text-sm  bg-white bg-clip-padding rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-sm`,children:[e.jsx("option",{value:"",children:"Select"}),i==null?void 0:i.map(a=>e.jsx("option",{value:a.id,children:a.name}))]})]}),e.jsxs("div",{className:"w-full md:w-[25%]",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Apartment",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...r.getFieldProps("apartment"),className:`${r.errors.searchBy?"text-red-400 font-semibold border border-solid border-red-400 placeholder-red-300 shadow-red-100 ":"text-gray-700 font-normal border border-solid border-gray-400 placeholder-gray-400 h-10"} cursor-pointer w-full px-3 py-1 text-sm  bg-white bg-clip-padding rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-sm`,children:[e.jsx("option",{value:"",children:"Select"}),(o==null?void 0:o.length)>0&&(o==null?void 0:o.map(a=>e.jsx("option",{value:a.id,children:a.apt_name})))]})]}),e.jsx("div",{className:"mt-4 w-full  justify-center md:justify-start md:w-[30%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-6",children:e.jsx("div",{className:"max-sm:w-full flex justify-center",children:A?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(H,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):e.jsxs("button",{type:"submit",className:"py-2 max-sm:w-full flex items-center justify-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-md  text-sm px-5",children:[e.jsx("span",{className:"",children:e.jsx(L,{fontSize:""})}),e.jsx("span",{children:"Search Record"})]})})})]})]})})}),e.jsx("div",{className:"w-full px-2 ",children:e.jsx("div",{className:"",children:n!=null&&e.jsx(U,{api:f,columns:b,requestBody:n,changeData:j,search:!1})})})]})})})})})})};export{K as default};
