import{j as e}from"./mui-8e804a04.js";import{r as o,f as oe,u as se}from"./router-87042356.js";import"./setBatchUpdatesFn-4c0c10a7.js";import{M as H}from"./index-4e794517.js";import{A as E,b as ae,B as re,Z as ie,Q as p}from"./index-0f28b603.js";import"./AgencyNotification-9c2e47dc.js";import{a as ne,A as le}from"./ReuploadDocumentModal-4107fde6.js";import{H as de}from"./HoardingApplicationFullDetail-5282964e.js";import{r as ce}from"./materialTailwind-be55ec1d.js";import{C as pe}from"./CommonModal-340f9ebb.js";import{S as he}from"./ServerErrorCard-3ca8b150.js";import{A as ge}from"./AdvtListTablePagination-e5e2acf2.js";import"./react-09dd1212.js";import"./axios-97164839.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";import"./RazorpayPaymentScreen-07e994d7.js";import"./CitizenApplyApiList-5b22da78.js";import"./logo1-66954bc2.js";import"./WaterApiList-5dfb5a8b.js";import"./UseRazorpay-62e4000a.js";import"./index-48d14c2d.js";import"./react-tooltip.min-be248063.js";const me={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"none"}};H.setAppElement("#root");function $e(ue){o.useState(!1),o.useState(!1);const{api_postHoardingRenewList:M,api_archivedApplication:P}=ne(),[h,xe]=o.useState();o.useState(!1);const[I,_]=o.useState(),[D,O]=o.useState(),[fe,R]=o.useState(!1),[F,we]=o.useState(!1),[T,g]=o.useState(!1),k=()=>g(!0),m=()=>g(!1),B=()=>{};o.useState();const[a,V]=o.useState(!1),[u,x]=o.useState(!1),[q,n]=o.useState(!1),[$,U]=o.useState(0),[l,z]=o.useState(1),[Q,f]=o.useState(0),[d,W]=o.useState(10),[c,Z]=o.useState(""),[G,w]=o.useState(!1),{id:v}=oe();console.log("id im param",v);const J=t=>{R(t)},b=(t,s)=>{p.dismiss(),s=="success"&&p.success(t),s=="error"&&p.error(t)},K=se(),X=[{Header:"#",Cell:({row:t})=>e.jsx("div",{className:"pr-2",children:t.index+1})},{Header:"Application No",accessor:"application_no"},{Header:"Apply Date.",accessor:"application_date"},{Header:"Action",accessor:"id",Cell:({cell:t})=>e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("button",{onClick:()=>Y(t.row.values.id,"Approve"),className:`bg-indigo-500 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700 \r
                hover:text-white text-white`,children:"View"}),t.row.original.renew_option==1&&e.jsx("button",{onClick:()=>K(`/hoarding/${v}/${t.row.values.id}/renew`),className:`bg-indigo-500 px-3 py-1 ml-2 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700 \r
              hover:text-white text-white`,children:"Renew"}),t.row.original.renew_option=="Expired"&&e.jsx("button",{className:`bg-indigo-500 px-3 py-1 ml-2 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700 \r
              hover:text-white text-white`,disabled:!0,children:"Expired"}),t.row.original.renew_option=="Expired"&&e.jsx(ce.Tooltip,{className:"bg-gray-300 text-xs text-gray-900",content:"Archived",children:e.jsx("button",{onClick:()=>te(t.row.values.id),className:`bg-indigo-500 float-right px-2 py-1 ml-2 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700 \r
              hover:text-white text-white`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-5 h-5",children:e.jsx("path",{"fill-rule":"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z","clip-rule":"evenodd"})})})})]})})}],Y=(t,s)=>{console.log("..............application id..............",t),console.log("..............application type..............",s),O(t),_(s),k()};o.useEffect(()=>{j(l,d,c)},[l,c,d]);const j=(t,s,r="")=>{w(!0),n(!0),E.post(M,{page:t,perPage:s,key:r},ae()).then(i=>{var S,A,N,y,C,L;V((A=(S=i.data)==null?void 0:S.data)==null?void 0:A.data),x(!0),n(!1),U((y=(N=i.data)==null?void 0:N.data)==null?void 0:y.total),f((L=(C=i.data)==null?void 0:C.data)==null?void 0:L.last_page)}).catch(i=>{console.log("Error while fetching Filter Data",i),x(!1),n(!1)}),setTimeout(()=>{w(!1)},[500])},ee={totalDataCount:$,currentPageIndex:l,setcurrentPageIndex:z,pageLength:d,setpageLength:W,lastPageIndex:Q,setlastPageIndex:f,fetchInboxList:j,searchValue:c,setsearchValue:Z,refreshStatus:G};console.log("application renew list",h);const te=t=>{const s={applicationId:t};console.log("request body in renew...12",t),E.post(`${P}`,s,le()).then(function(r){console.log("archived response",r.data),b("Archived successfully","success")}).catch(function(r){console.log("errorrr.... ",r),b("failed to archived","error")})};return q?e.jsx(e.Fragment,{children:e.jsx(re,{})}):F?e.jsx(pe,{children:e.jsx(he,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):(console.log("application data in renew list 12",h),e.jsxs(e.Fragment,{children:[e.jsx(ie,{position:"top-right",autoClose:2e3}),e.jsx("div",{className:"container bg-white text-gray-600 h-screen mx-auto mt-12",children:e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-4 container mx-auto pt-4 ",children:e.jsx("div",{className:"col-span-12 p-2",children:e.jsxs("div",{className:"flex flex-row bg-white mb-4 rounded leading-5 shadow-md shadow-violet-100 ",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/3288/3288006.png",className:"h-10 ml-3 mt-2"}),e.jsx("h1",{className:"text-xl text-gray-700 font-semibold p-4",children:"RENEW APPLICATIONS"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 p-2",children:[u&&(a==null?void 0:a.length)!=0&&e.jsx(ge,{columns:X,dataList:a,values:ee}),u&&(a==null?void 0:a.length)==0&&e.jsx("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx(H,{isOpen:T,onAfterOpen:B,onRequestClose:m,style:me,contentLabel:"Example Modal",children:e.jsx("div",{class:" rounded-lg shadow-xl border-2 border-gray-50 mx-auto px-0 ",style:{width:"80vw",height:"100%"},children:e.jsx("div",{className:"h-[44rem] bg-white overflow-y-auto",children:e.jsx(de,{data:D,applicationType:I,showLoader:J,closeModal:m})})})})})]})})]}))}export{$e as default};
