import{j as e}from"./mui-8e804a04.js";import{f as ve,r as c,u as we}from"./router-87042356.js";import{B as _e}from"./BarLoader-9fd00c2c.js";import{c as ye,d as h,u as Ae,b as B,Z as Se,X as x,a0 as ie,v as De,A as de,Q as Ne,B as Ie,n as p}from"./index-0f28b603.js";import{a as je}from"./axios-97164839.js";import"./RazorpayPaymentScreen-07e994d7.js";import{C as Pe}from"./CitizenApplyApiList-5b22da78.js";import{b as Ue}from"./ValidationFunction-10ed4d73.js";import{B as Re}from"./BottomErrorCard-b31e4e97.js";import{U as qe}from"./UseRazorpay-62e4000a.js";import"./CommonModal-340f9ebb.js";import{S as Fe}from"./ServerErrorCard-3ca8b150.js";import"./react-09dd1212.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";import"./logo1-66954bc2.js";import"./WaterApiList-5dfb5a8b.js";import"./index-48d14c2d.js";import"./index-4e794517.js";const W=localStorage.getItem("citizenName"),Z=localStorage.getItem("citizenMobile");function Te(t){var S,D,I,y,d,f,g,o,N,U,R,q,F,T,E,C,z,xe,ue,be;const{handlePayment:X}=qe(),{propertyGenerateOrderId:v,propertyGenerateHoldingOrderId:J,propertyGenerateOrderIdDirect:A,api_getTransactionNoForReceipt:l,api_postPropertyPayment:ce,api_postSafPayment:ke,api_generatedreceipt:K}=Pe(),{id:_,moduleType:r,userType:O}=ve(),[ee,me]=c.useState(""),[ae,b]=c.useState(!1),m=we();c.useState(!1);const[w,te]=c.useState(),[se,le]=c.useState(!1),[ne,Y]=c.useState(null),[oe,re]=c.useState(!1),[L,$]=c.useState(null);let P;(r=="holding"||r=="direct")&&(P=ye({paymentUptoYear:h().required("Select Payment upto year"),paymentUptoQuarter:h().required("Select payment upt quarter"),paymentMode:h(),remarks:h().required("Enter remarks"),payAdvance:h(),advanceAmount:h().when("payAdvance",{is:!0,then:h().required("Enter advance amount")})})),r=="saf"&&(P=ye({paymentUptoYear:h(),paymentUptoQuarter:h(),paymentMode:h(),remarks:h(),payAdvance:h(),advanceAmount:h()}));const s=Ae({initialValues:{paymentUptoYear:"",paymentUptoQuarter:"",paymentMode:"ONLINE",remarks:"",payAdvance:"",advanceAmount:""},onSubmit:(a,i)=>{console.log("values at submit payment",a),G(a)},validationSchema:P}),V=a=>{let i=a.target.name,n=a.target.value;i=="paymentMode"&&te(n),i=="payAdvance"&&le(a.target.checked),i=="paymentUptoQuarter"&&(t==null||t.fetchDemandDetail(n,s.values.paymentUptoYear)),i=="remarks"&&s.setFieldValue("remarks",ie(n,s.values.remarks,100)),i=="bankName"&&s.setFieldValue("bankName",ie(n,s.values.bankName,100)),i=="branchName"&&s.setFieldValue("branchName",ie(n,s.values.branchName,100)),i=="cheque_dd_no"&&s.setFieldValue("cheque_dd_no",De(n,s.values.cheque_dd_no,20)),i=="advanceAmount"&&s.setFieldValue("advanceAmount",Ue(n,s.values.advanceAmount,10))},Q=async a=>{console.log("generateReceipt",a),console.log(a);let i={applicationId:a==null?void 0:a.applicationId,departmentId:a==null?void 0:a.departmentId,status:"",captured:"1",card_id:"",amount:a==null?void 0:a.amount,payment_method:"upi/netbanking",workflow_id:a==null?void 0:a.workflowId,user_id:a==null?void 0:a.user_id,ulb_id:a==null?void 0:a.ulbId,payment_order_id:a==null?void 0:a.razorpay_order_id,payment_id:a==null?void 0:a.razorpay_payment_id,created_at:""};console.log("Receipt",a),de.post(K,i,B()).then(n=>{var j;console.log("genereted receipt",n),n.data.status==!0?(console.log("Oder ID Generated ++++dddddddddddddddddddddddd+++++",n.data),H({orderId:a==null?void 0:a.razorpay_order_id,paymentId:a==null?void 0:a.razorpay_payment_id}),m(`/paymentReceipt/${(j=n==null?void 0:n.data)==null?void 0:j.data}/${r}`,{replace:!0})):Ne.error(n.data.message,"error")}).catch(n=>{console.log("Error genrating order id",n),Ne.error(n.message,"error")})},H=a=>{let i={orderId:a==null?void 0:a.razorpay_order_id,paymentId:a==null?void 0:a.razorpay_payment_id};je.post(l,i,B()).then(function(n){var j,M;Y((M=(j=n==null?void 0:n.data)==null?void 0:j.data)==null?void 0:M.transaction_no),console.log("transaction no get response...",n==null?void 0:n.data),b(!1)}).catch(function(n){console.log("transaction no get error...",n),b(!1)})};console.log("demand details => ",(S=t==null?void 0:t.safPaymentDetailsData)==null?void 0:S.isPayable);const G=async a=>{var j,M,he;b(!0);let i,n;r=="holding"&&(i=J,n={propId:_,amount:(j=t==null?void 0:t.paymentDetails)==null?void 0:j.payableAmount,name:W,contact:Z,qtr:a==null?void 0:a.paymentUptoQuarter,fYear:a==null?void 0:a.paymentUptoYear}),r=="saf"&&(i=v,n={id:_,amount:(M=t==null?void 0:t.safPaymentDetailsData)==null?void 0:M.payableAmount,name:W,contact:Z}),r=="direct"&&(i=A,n={propId:_,amount:(he=t==null?void 0:t.paymentDetails)==null?void 0:he.payableAmount,name:W,contact:Z,qtr:a==null?void 0:a.paymentUptoQuarter,fYear:a==null?void 0:a.paymentUptoYear}),console.log("name....",W,"....mobile..",Z),console.log("orderidpayload at payment before...",n,"moduleId..",r),je.post(i,n,B()).then(u=>{var fe,ge,pe;console.log("Order Id Response ",u==null?void 0:u.data),((fe=u==null?void 0:u.data)==null?void 0:fe.status)===!0?(console.log("OrderId Generated True",(ge=u==null?void 0:u.data)==null?void 0:ge.data),X((pe=u==null?void 0:u.data)==null?void 0:pe.data,Q)):k(!0,"Error occured. Please try again later."),b(!1)}).catch(u=>{k(!0,"Error occured. Please try again later."),console.log("ERROR :-  Unable to Generate Order Id ",u),b(!1)})},k=(a,i)=>{$(i),re(a)};return ee==!0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-full bg-white p-20",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-center font-semibold text-3xl",children:"Your payment has been successfully done !"}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>m(`/paymentReceipt/${ne}/${r=="saf"?"saf":"holding"}`),children:"View Receipt"}),r!="direct"&&e.jsx("button",{className:"mr-4 max-sm:mt-2 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>m(`/propApplicationDetails/${_}`),children:"View Application"})]})]})})}):e.jsxs(e.Fragment,{children:[ae&&e.jsx(_e,{}),oe&&e.jsx(Re,{activateBottomErrorCard:k,errorTitle:L}),e.jsx(Se,{position:"top-right",autoClose:2e3}),e.jsx("div",{className:" block p-4 mt-4 w-full md:py-4 md:px-40 md:pb-0 md:pt-0 rounded-lg shadow-lg bg-white md:w-full mx-auto  overflow-x-auto mb-20 ",children:e.jsx("div",{className:" block md:p-4 w-full md:py-6 rounded-lg bg-white mx-auto ",children:e.jsx("form",{onSubmit:s.handleSubmit,onChange:V,className:"md:p-4 relative",children:e.jsxs("div",{className:"grid grid-cols-12",children:[r!="saf"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Upto Year"]}),e.jsxs("select",{...s.getFieldProps("paymentUptoYear"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),(I=(D=t==null?void 0:t.paymentDetails)==null?void 0:D.paymentUptoYrs)==null?void 0:I.map((a,i)=>e.jsx("option",{selected:i==0,value:a,children:a}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.paymentUptoYear&&s.errors.paymentUptoYear?s.errors.paymentUptoYear:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Upto Quarter"]}),e.jsxs("select",{...s.getFieldProps("paymentUptoQuarter"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),(d=(y=t==null?void 0:t.paymentDetails)==null?void 0:y.paymentUptoQtrs)==null?void 0:d.map((a,i)=>e.jsx("option",{selected:i==0,value:a,children:a}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.paymentUptoQuarter&&s.errors.paymentUptoQuarter?s.errors.paymentUptoQuarter:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Mode"]}),e.jsx("select",{...s.getFieldProps("paymentMode"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:e.jsx("option",{value:"ONLINE",children:"Online"})}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.paymentMode&&s.errors.paymentMode?s.errors.paymentMode:null})]}),O!="direct"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Remarks"]}),e.jsx("input",{...s.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.remarks&&s.errors.remarks?s.errors.remarks:null})]}),(w=="CHEQUE"||w=="DD")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Bank Name"]}),e.jsx("input",{...s.getFieldProps("bankName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.bankName&&s.errors.bankName?s.errors.bankName:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Branch Name"]}),e.jsx("input",{...s.getFieldProps("branchName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.branchName&&s.errors.branchName?s.errors.branchName:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD No"]}),e.jsx("input",{...s.getFieldProps("cheque_dd_no"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.cheque_dd_no&&s.errors.cheque_dd_no?s.errors.cheque_dd_no:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD Date"]}),e.jsx("input",{...s.getFieldProps("cheque_dd_date"),type:"date",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.cheque_dd_date&&s.errors.cheque_dd_date?s.errors.cheque_dd_date:null})]})]}),r!="saf"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("input",{...s.getFieldProps("payAdvance"),id:"checked-checkbox",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 cursor-pointer"}),e.jsx("label",{for:"checked-checkbox",class:"ml-2 text-sm font-medium text-gray-900 darks:text-gray-300",children:"Pay Advance"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.payAdvance&&s.errors.payAdvance?s.errors.payAdvance:null})]}),se&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:"block mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Advance amount"]}),e.jsx("input",{...s.getFieldProps("advanceAmount"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter advance amount in ₹"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.advanceAmount&&s.errors.advanceAmount?s.errors.advanceAmount:null})]})]}),e.jsx("div",{className:"col-span-12"}),r!="saf"&&e.jsxs("div",{className:"bg-white col-span-12 grid grid-cols-12 pt-6 mb-4 border border-gray-200 max-sm:px-2",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Total Tax :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:x((f=t==null?void 0:t.paymentDetails)==null?void 0:f.totalDues)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Advance Amount Paid :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:x((g=t==null?void 0:t.paymentDetails)==null?void 0:g.advanceAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:x((o=t==null?void 0:t.paymentDetails)==null?void 0:o.rebateAmt)})]}),r=="saf"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Late Assessment Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:x((N=t==null?void 0:t.paymentDetails)==null?void 0:N.lateAssPenalty)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Special Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:x((U=t==null?void 0:t.paymentDetails)==null?void 0:U.specialRebateAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"1% Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:x((R=t==null?void 0:t.paymentDetails)==null?void 0:R.onePercPenalty)})]}),e.jsx("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:e.jsxs("div",{className:"w-2/3",children:[e.jsx("span",{children:"Total Payable Amount :"})," ",e.jsx("span",{className:"font-mono font-semibold text-xl",children:x((q=t==null?void 0:t.paymentDetails)==null?void 0:q.payableAmount)})]})})]}),r=="saf"&&e.jsxs("div",{className:"bg-white col-span-12 grid grid-cols-12 pt-6 mb-4 border border-gray-200",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Total Tax :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:x((F=t==null?void 0:t.safPaymentDetailsData)==null?void 0:F.totalTax)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:x((T=t==null?void 0:t.safPaymentDetailsData)==null?void 0:T.rebateAmt)})]}),r=="saf"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Late Assessment Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:x((E=t==null?void 0:t.safPaymentDetailsData)==null?void 0:E.lateAssessmentPenalty)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Special Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:x((C=t==null?void 0:t.safPaymentDetailsData)==null?void 0:C.specialRebateAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"1% Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:x((z=t==null?void 0:t.safPaymentDetailsData)==null?void 0:z.totalOnePercPenalty)})]}),e.jsx("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:e.jsxs("div",{className:"w-2/3",children:[e.jsx("span",{children:"Total Payable Amount :"})," ",e.jsx("span",{className:"font-mono font-semibold text-xl",children:x((xe=t==null?void 0:t.safPaymentDetailsData)==null?void 0:xe.payableAmount)})]})})]}),e.jsxs("div",{className:"col-span-12 grid grid-cols-2 mt-10",children:[e.jsx("div",{className:""}),e.jsx("div",{className:"md:pl-10 text-right",children:e.jsxs("button",{type:"submit",className:"md:ml-4 font-bold px-6 py-2 bg-indigo-500 text-white  text-sm leading-tight uppercase rounded  hover:bg-indigo-700 hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out shadow-xl border border-white",children:[e.jsx("span",{className:"mr-2",children:"Pay"}),r=="saf"&&x((ue=t==null?void 0:t.safPaymentDetailsData)==null?void 0:ue.payableAmount),r!="saf"&&x((be=t==null?void 0:t.paymentDetails)==null?void 0:be.payableAmount)]})})]})]})})})})]})}function ta(t){var L,$,P,s,V,Q,H,G,k,S,D,I;const[X,v]=c.useState(!1),[J,A]=c.useState(!1);c.useState();const[l,ce]=c.useState(),[ke,K]=c.useState();c.useState(!1);const[_,r]=c.useState(!1),[O,ee]=c.useState(null),[me,ae]=c.useState(null),{id:b,moduleType:m}=ve(),w=we(),{zeroDemandPayment:te,api_getDirectHoldingDemandById:se,api_getHoldingDemandById:le,api_getsafDemandById:ne}=Pe(),Y=(y=null,d=null)=>{r(!1);let f,g;m=="holding"&&(f=le,g={propId:b,fYear:d,qtr:y}),m=="saf"&&(f=ne,g={id:b}),m=="direct"&&(f=se,g={propId:b,fYear:d,qtr:y}),y!==null?A(!0):v(!0),console.log("before hit => ",g,f),de.post(f,g,B()).then(function(o){var N,U,R,q,F,T,E,C,z;console.log("payment details data...",o==null?void 0:o.data),ce((N=o==null?void 0:o.data)==null?void 0:N.data),K(o==null?void 0:o.data),((R=(U=o==null?void 0:o.data)==null?void 0:U.data)==null?void 0:R.paymentStatus)==1&&w(`/viewDemand/${b}`),y!==null?A(!1):v(!1),ae((T=(F=(q=o==null?void 0:o.data)==null?void 0:q.data)==null?void 0:F.amounts)==null?void 0:T.isPayable),((z=(C=(E=o==null?void 0:o.data)==null?void 0:E.data)==null?void 0:C.amounts)==null?void 0:z.isPayable)==!1&&oe()}).catch(function(o){console.log("payment details error...",o),r(!0),y!==null?A(!1):v(!1)})},oe=()=>{v(!0),r(!1);let y={id:b,paymentMode:"Online"};de.post(te,y,B()).then(d=>{var f,g,o,N;console.log("response zero payment => ",d),(f=d==null?void 0:d.data)!=null&&f.status?(console.log("response zero payment => ",(g=d==null?void 0:d.data)==null?void 0:g.data),ee((N=(o=d==null?void 0:d.data)==null?void 0:o.data)==null?void 0:N.TransactionNo)):(console.log("false status response zero payment => ",d),r(!0))}).catch(d=>{console.log("error zero payment => ",d),r(!0)}).finally(()=>v(!1))};if(c.useEffect(()=>{Y()},[b,m]),X)return e.jsxs(e.Fragment,{children:[e.jsx(Ie,{}),e.jsx("div",{className:"min-h-screen"})]});if(_)return e.jsx(Fe,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"});const re=()=>{m!="direct"&&w(`/paymentReceipt/${O}/${m=="saf"?"saf":"holding"}`),m=="direct"&&w(`/paymentReceipt/direct/${O}/${m=="saf"?"saf":"holding"}`)};return e.jsxs(e.Fragment,{children:[J&&e.jsx(_e,{}),e.jsxs("div",{className:m=="direct"&&" p-4 mt-10",children:[e.jsx("div",{className:"w-full bg-white shadow-xl mb-6",children:e.jsxs("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[m!="saf"&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((L=l==null?void 0:l.basicDetails)==null?void 0:L.holding_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Holding No."})]}),m=="saf"&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p(($=l==null?void 0:l.basicDetails)==null?void 0:$.saf_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Application No.(Saf No)"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((P=l==null?void 0:l.basicDetails)==null?void 0:P.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:p((s=l==null?void 0:l.basicDetails)==null?void 0:s.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"New Ward No"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:p((V=l==null?void 0:l.basicDetails)==null?void 0:V.ownership_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((Q=l==null?void 0:l.basicDetails)==null?void 0:Q.property_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property Type"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((H=l==null?void 0:l.basicDetails)==null?void 0:H.zone_mstr_id)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Zone"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((G=l==null?void 0:l.basicDetails)==null?void 0:G.is_mobile_tower)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property has Mobile Tower(s) ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-md",children:[p((k=l==null?void 0:l.basicDetails)==null?void 0:k.is_hoarding_board)," "]}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property has Hoarding Board(s) ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:p((S=l==null?void 0:l.basicDetails)==null?void 0:S.is_petrol_pump)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Is property a Petrol Pump ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((D=l==null?void 0:l.basicDetails)==null?void 0:D.is_water_harvesting)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Rainwater harvesting provision ?"})]})]})]})}),e.jsx("div",{children:me==!1?e.jsx("div",{className:"w-full h-full bg-white p-20",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-center font-semibold text-3xl",children:"Your application is successfully submitted !"}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>re(),children:"View Receipt"}),m!="direct"&&e.jsx("button",{className:"mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>w(`/propApplicationDetails/${b}`),children:"View Application"})]})]})}):e.jsx(Te,{fetchDemandDetail:Y,safPaymentDetailsData:l==null?void 0:l.amounts,paymentDetails:l==null?void 0:l.duesList,ulbId:(I=l==null?void 0:l.basicDetails)==null?void 0:I.ulb_id})})]}),e.jsx("div",{className:"w-full h-40 md:none"})]})}export{ta as default};
