import{j as e}from"./mui-8e804a04.js";import{r,u as b,a as A}from"./router-87042356.js";import{V as R}from"./index.esm-9d7434c8.js";import{l as N,V as G,A as I}from"./index-0f28b603.js";import{G as V}from"./GrievanceApiList-f1509de8.js";import{a as L}from"./axios-97164839.js";import q from"./GrievanceForm-0864722d.js";import{M as v}from"./index-4e794517.js";import"./react-09dd1212.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";function D(a){const[n,i]=r.useState(!1),[l,t]=r.useState(!1),[d,m]=r.useState(!1),[o,f]=r.useState(),[u,w]=r.useState(),[S,c]=r.useState(!1),[P,g]=r.useState(!1),{api_reqOtp:C,api_verifyOtp:k}=V(),{notify:x}=r.useContext(N);b();const p=r.useRef(null),j=r.useRef(null),O=()=>{p.current.focus()},y=()=>{j.current.focus()},h={filed:"flex-1 w-full px-4 py-2 text-base text-gray-800 placeholder-gray-400 bg-white border border-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-800 focus:border-transparent",required:"text-red-700 font-semibold"},T={headers:{Accept:"application/json"}},M=()=>{if(m(),c(),g(),O(),(o==null?void 0:o.length)!=10||!Number(o))return c("Enter 10 Digit Mobile No");t(!0),L.post(C,{mobileNo:o},T).then(s=>{s.data.status?(t(!1),x("OPT Send Successfully","success"),i(!0),setTimeout(()=>{y()},1e3)):(x("Failed to send OTP","error"),m("Failed to send OTP"),t(!1))}).catch(s=>{x("Failed to send OTP","error"),t(!1),m("Failed to send OTP"),console.log("Error while generating OTP",s)})},E=()=>{if(y(),(u==null?void 0:u.length)!=6)return g("Please Enter 6 Digit OTP");t(!0),I.post(k,{mobileNo:o,otp:u}).then(s=>{s.data.status?(t(!1),t(!1),x("OPT Verified Successfully","success"),a.screen(),a.phoneNo(o)):(t(!1),x("Failed to Verify OTP","error"),g("Invalid OTP"),t(!1))}).catch(s=>{t(!1),x("Failed to Verify OTP","error"),t(!1),g("Failed to Verify OTP"),console.log("Error while verifying OTP",s)})},F=s=>(f(s),!Number(s)||(s==null?void 0:s.length)!=10?c("Enter 10 Digit Mobile No"):c(!1));return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-5 py-6 rounded-lg border border-indigo-300 bg-white",children:[e.jsxs("p",{className:"absolute right-8 top-8 cursor-pointer bg-gray-100 hover:bg-gray-300",children:[" ",e.jsx(R,{size:30})," "]}),e.jsx("div",{className:"text-center text-lg font-semibold",children:" Verify Phone Number "}),e.jsxs("div",{children:[e.jsx("div",{className:"m-3",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("label",{htmlFor:"mobileNo",children:["Your Mobile No. ",e.jsx("span",{className:h.required,children:"*"})]}),e.jsxs("p",{className:"flex justify-center items-center gap-x-5 text-2xl border bg-gray-200 py-1 font-semibold text-gray-700",children:[o,e.jsx(G,{onClick:()=>i(!1),color:"indigo",size:20,className:"cursor-pointer"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("label",{htmlFor:"mobileNo",children:["Enter Mobile No. ",e.jsx("span",{className:h.required,children:"*"})]}),e.jsx("input",{disabled:n,maxLength:"10",ref:p,value:o,onChange:s=>F(s.target.value),name:"mobileNo",className:`${h.filed} ' disabled:bg-gray-200 rounded-md'`,type:"text",id:""}),e.jsx("p",{className:"text-red-500 text-xs",children:S})]})}),e.jsxs("div",{className:"m-3",children:[e.jsxs("label",{htmlFor:"opt",children:["Enter OTP. ",e.jsx("span",{className:h.required,children:"*"})]}),e.jsx("input",{disabled:!n,maxLength:"6",ref:j,onChange:s=>w(s.target.value),name:"opt",className:" flex-1 w-full px-4 py-2 text-base text-gray-800 placeholder-gray-400 disabled:bg-gray-200 bg-white border border-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-800 focus:border-transparent",type:"text",id:""}),e.jsx("p",{className:"text-red-500 text-xs",children:P})]}),e.jsx("p",{className:"text-center text-gray-600",children:"Default OTP : 123456"}),e.jsx("p",{className:"text-center text-red-600 font-semibold",children:d&&d}),e.jsx("div",{className:"m-3 flex justify-center",children:l?"Submitting...":n?e.jsx("button",{onClick:E,type:"button",className:"px-4 py-2 mt-5 bg-green-600 hover:bg-green-700 text-gray-50 text-base shadow-md rounded-md",children:"Verify OTP"}):e.jsx("button",{onClick:M,type:"button",className:"px-4 py-2 mt-5 bg-indigo-600 hover:bg-indigo-700 text-gray-50 text-base shadow-md rounded-md",children:"Send OTP"})})]})]})})}const z={overlay:{background:"#e6e6fc"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"transparent",border:"none",height:"700px"}};function B(a){const[n,i]=A.useState(!1),[l,t]=r.useState(!1),d=b();function m(){}function o(){i(!1),d("/grievance")}r.useEffect(()=>{i(!0)},[]);const f=()=>{a.screen(),i(!1)};return v.setAppElement("#root"),e.jsx("div",{className:"",children:e.jsx(v,{isOpen:n,onAfterOpen:m,onRequestClose:o,style:z,contentLabel:"Example Modal",children:e.jsx("div",{className:"container",children:e.jsx("div",{class:"relative w-full h-full mt-20 md:mt-0 max-w-3xl md:h-auto border-indigo-600 shadow-indigo-200 shadow-sm rounded",children:e.jsxs("div",{class:"relative bg-white rounded-lg shadow ",children:[e.jsxs("div",{class:"flex items-start justify-between p-4 border-b rounded-t darks:border-gray-600",children:[e.jsx("h3",{class:"text-sm md:text-xl font-semibold text-gray-900 darks:text-white",children:"Register Grievance / शिकायत दर्ज करें"}),e.jsxs("button",{onClick:o,class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-600 darks:hover:text-white","data-modal-hide":"defaultModal",children:[e.jsx("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})}),e.jsx("span",{class:"sr-only",children:"Close modal"})]})]}),e.jsxs("div",{class:"p-6 space-y-5 text-sm md:text-base",children:[e.jsx("p",{class:"leading-relaxed text-gray-800",children:"Such points will not be considered Public complain / ऐसे विषय या बिंदुओं की सूची, जिन्हें जनशिकायत नहीं मानी जायेगीः"}),e.jsxs("ol",{start:"1",children:[e.jsx("li",{children:"1. Matters related to RTI./ सूचना के अधिकार (RTI) से संबंधित मामले।"}),e.jsx("li",{children:"2. Matters related to Judiciary./ माननीय न्यायालयों में विचाराधीन मामले।"}),e.jsx("li",{children:"3. Matters undertaking Central Government./ केंद्र सरकार या सार्वजनिक क्षेत्र के उपक्रमों से जुड़े मामले।"}),e.jsx("li",{children:"4. Sanitary services are not supported by this Portal./ इस पोर्टल द्वारा स्वच्छता सेवाओं का समर्थन नहीं किया जाता है।"}),e.jsx("li",{children:"5. Matters related to schemes and policies./योजना और नीति से जुड़े मामले।"}),e.jsx("li",{children:"6. Suggestions./ सुझाव के रूप में प्राप्त मामले।"}),e.jsx("li",{children:"7. Complain demanding employment or financial help./आर्थिक सहायता या नौकरी की मांग से जुड़े मामले।"}),e.jsx("li",{children:"8. Religious matters./ धर्म-संप्रदाय से जुड़े मामले।"})]})]}),e.jsxs("div",{className:"block md:flex justify-center md:space-x-4",children:[e.jsx("input",{className:"float-left mt-1 ml-3 md:mt-0",type:"checkbox",onClick:()=>t(!l),checked:l,name:"term-condition",id:""}),e.jsx("div",{onClick:()=>t(!l),className:"select-none text-sm md:text-base font-semibold text-center cursor-pointer",children:"I acknowledge that I have read and agree to the above Terms and Condition"})]}),e.jsxs("div",{class:"flex flex-row-reverse items-center p-6 border-t border-gray-200 rounded-b",children:[e.jsx("button",{onClick:()=>f(),disabled:!l,class:"mx-2 text-white disabled:bg-gray-500 disabled:scale-100 bg-indigo-700 hover:bg-indigo-800 focus:ring-4 focus:outline-none focus:ring-indigo-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center darks:bg-indigo-600 darks:hover:bg-indigo-700 darks:focus:ring-indigo-800",children:"START"}),e.jsx("button",{onClick:o,class:"mx-2 text-white bg-gray-500 hover:bg-gray-600 focus:ring-4 focus:outline-none focus:ring-red-300 rounded-lg border border-red-200 text-sm font-medium px-5 py-2.5 focus:z-10 ",children:"CANCEL"})]})]})})})})})}function Y(a){r.useContext(N);const n=b();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-fit px-16 py-5 bg-green-50 rounded-lg border border-indigo-300 text-center",children:[e.jsx("p",{className:"absolute right-8 top-8 cursor-pointer bg-gray-100 hover:bg-gray-300",children:" "}),e.jsx("div",{className:"text-center text-lg font-semibold",children:"Applied Successfully "}),e.jsx("p",{className:"border-b my-2"}),e.jsxs("div",{children:["You have Successfully applied the Grievances.",e.jsxs("p",{children:["Acknowledgement No - ",e.jsxs("span",{className:"font-semibold",children:[" ",a==null?void 0:a.grievanceNo]})]})]}),e.jsxs("div",{className:"flex justify-center gap-x-5 mt-4",children:[e.jsx("button",{onClick:()=>n("/citizen"),type:"button",className:"px-2 py-1 border-2 border-gray-800 hover:bg-gray-700 hover:text-white rounded",children:"Home"}),e.jsx("button",{onClick:()=>n("/grievance"),type:"button",className:"px-2 py-1 border-2 border-gray-800 hover:bg-gray-700 hover:text-white rounded",children:"View Status"})]})]})})})}const se=()=>{const[a,n]=r.useState(),[i,l]=r.useState(1),[t,d]=r.useState();return console.log("grievanceApplicationNo",t),e.jsxs(e.Fragment,{children:[i===1&&e.jsx(B,{screen:()=>l(2)}),e.jsx("p",{className:"mt-20"}),e.jsxs("div",{className:"xl:mx-30 md:mx-[10rem]",children:[e.jsx("div",{className:"flex justify-center ",children:i===2&&e.jsx(D,{phoneNo:n,screen:()=>l(3)})}),i===3&&e.jsx(q,{mobileNo:a,screen:()=>l(4),grievanceApplicationNo:d}),i===4&&e.jsx(Y,{grievanceNo:t})]})]})};export{se as default};
