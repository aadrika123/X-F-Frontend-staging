import{j as a}from"./mui-8e804a04.js";import{r as n,f as Xe,u as ca}from"./router-87042356.js";import{f as ia}from"./folders-c40af08a.js";import{T as na,z as sa,A as $,Q as Je,m as L,P as Ze,b as Ke,n as M,y as We}from"./index-0f28b603.js";import{F as oa}from"./index.esm-388271cc.js";import{A as ma}from"./ApiHeader2-b5fd0f3d.js";import{p as A}from"./photo-8f85a095.js";import{M as ra}from"./index-4e794517.js";import{R as xa}from"./index.esm-799452e3.js";import{B as ua}from"./BottomErrorCard-b31e4e97.js";import{B as fa}from"./BarLoader-9fd00c2c.js";import"./react-09dd1212.js";import"./axios-97164839.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";import"./CommonModal-340f9ebb.js";const ha=e=>{var G,H,V,q,Q,Y,J,K,W,X,Z,p,ee,ae,te,le,de,ce,ie,ne,se,oe,me,re,xe,ue,fe,he,ge,je,we,ve,Ne,be,De,ye,Se,Fe,_e,Pe,Ce,Ee,Ie,Ue,ke,Me,Re,Be,Ae,$e,Le,Te,Oe,ze,Ge,He,Ve,qe,Qe;const[T,E]=n.useState(""),[O,m]=n.useState(null),[N,b]=n.useState(null),[w,l]=n.useState(!1),[D,h]=n.useState([]),[z,R]=n.useState(null),[B,I]=n.useState(!1),[y,U]=n.useState(""),[r,t]=n.useState(""),o=()=>I(!0),x=()=>I(!1),g=()=>{},{id:u,btc:S}=Xe();let v=S=="true"||S==!0;const{api_docUpload:pe}=Ze(),ea=n.useRef([]),aa=n.useRef([]),ta=(d,c)=>{var f;const i=d.target.name;let j=d.target.files[0];if(!sa(j)){e==null||e.activateBottomErrorCard(!0,`File is too large for ${i} ${e==null?void 0:e.name}`),b(null),E(""),m("");return}aa.current[c]=(f=d.target.files[0])==null?void 0:f.name,E(d.target.name),m(URL.createObjectURL(d.target.files[0])),b(d.target.files[0])};console.log("doc data getting => ",e==null?void 0:e.doc);const la=(d,c)=>{var j,f,F,_;if(l(!0),N==null){e==null||e.activateBottomErrorCard(!0,`Select document for ${d} ${e==null?void 0:e.name}`),l(!1);return}let i=new FormData;i.append("applicationId",u),i.append("document",N),i.append("docCode",(f=(j=e==null?void 0:e.doc)==null?void 0:j.masters[0])==null?void 0:f.documentCode),console.log("data before hit => ",u,N,(_=(F=e==null?void 0:e.doc)==null?void 0:F.masters[0])==null?void 0:_.documentCode),$.post(pe,i,ma()).then(s=>{var P,C;console.log("getting response of marriage doc upload => ",s),(P=s==null?void 0:s.data)!=null&&P.status?(console.log("doc upload of marriage => ",s),Je.success(`${e==null?void 0:e.name} uploaded successfully !!!`),e==null||e.refresh()):e==null||e.activateBottomErrorCard(!0,L((C=s==null?void 0:s.data)==null?void 0:C.message))}).catch(s=>{console.log("getting error doc upload for marriage => ",s),e==null||e.activateBottomErrorCard(!0,"Error getting document list, please try again later !")}).finally(()=>{l(!1)})},da=(d,c,i)=>{console.log("getting doc path => ",c),c==""&&Je.error("File not uploaded !!!"),c!=""&&(t(d),R(i),t(d),U(c),o())},k=d=>D==null?void 0:D.some(c=>c==d);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center w-full flex-wrap gap-2 hover:bg-gray-50 border-b py-1.5",children:[a.jsx("div",{className:"w-[5%]",children:a.jsx("img",{src:ia,alt:"rain",className:"w-4"})}),a.jsxs("div",{className:"w-[90%] md:w-[22%] font-semibold md:font-normal",children:[e==null?void 0:e.name," ",a.jsx("span",{className:"text-red-600 inline",children:"*"})]}),a.jsxs("div",{className:"w-full md:w-[20%] flex flex-row gap-2",children:[a.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Uploaded Preview :"}),a.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",onClick:()=>{var d,c,i,j,f,F,_,s,P,C,Ye;return da((_=(c=(d=e==null?void 0:e.doc)==null?void 0:d.uploadedDoc)==null?void 0:c.docPath)==null?void 0:_.split(".")[((F=(f=(j=(i=e==null?void 0:e.doc)==null?void 0:i.uploadedDoc)==null?void 0:j.docPath)==null?void 0:f.split("."))==null?void 0:F.length)-1],`${(P=(s=e==null?void 0:e.doc)==null?void 0:s.uploadedDoc)==null?void 0:P.docPath}`,(Ye=(C=e==null?void 0:e.doc)==null?void 0:C.uploadedDoc)==null?void 0:Ye.uploadedDocId)},children:((G=e==null?void 0:e.doc)==null?void 0:G.uploadedDoc)==""?a.jsx("i",{className:"not-italic",children:"NA"}):a.jsxs(a.Fragment,{children:[((K=(V=(H=e==null?void 0:e.doc)==null?void 0:H.uploadedDoc)==null?void 0:V.docPath)==null?void 0:K.split(".")[((J=(Y=(Q=(q=e==null?void 0:e.doc)==null?void 0:q.uploadedDoc)==null?void 0:Q.docPath)==null?void 0:Y.split("."))==null?void 0:J.length)-1])=="pdf"&&a.jsx("div",{className:"cursor-pointer flex-shrink-0 text-[28px]",children:a.jsx(oa,{})}),((te=(X=(W=e==null?void 0:e.doc)==null?void 0:W.uploadedDoc)==null?void 0:X.docPath)==null?void 0:te.split(".")[((ae=(ee=(p=(Z=e==null?void 0:e.doc)==null?void 0:Z.uploadedDoc)==null?void 0:p.docPath)==null?void 0:ee.split("."))==null?void 0:ae.length)-1])=="jpg"&&a.jsx("div",{className:"cursor-pointer flex-shrink-0",children:a.jsx("img",{onError:()=>h(d=>{var c,i;return[...d,(i=(c=e==null?void 0:e.doc)==null?void 0:c.uploadedDoc)==null?void 0:i.uploadedDocId]}),src:k((de=(le=e==null?void 0:e.doc)==null?void 0:le.uploadedDoc)==null?void 0:de.uploadedDocId)?A:`${(ie=(ce=e==null?void 0:e.doc)==null?void 0:ce.uploadedDoc)==null?void 0:ie.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),((ue=(se=(ne=e==null?void 0:e.doc)==null?void 0:ne.uploadedDoc)==null?void 0:se.docPath)==null?void 0:ue.split(".")[((xe=(re=(me=(oe=e==null?void 0:e.doc)==null?void 0:oe.uploadedDoc)==null?void 0:me.docPath)==null?void 0:re.split("."))==null?void 0:xe.length)-1])=="jpeg"&&a.jsx("div",{className:"cursor-pointer flex-shrink-0",children:a.jsx("img",{onError:()=>h(d=>{var c,i;return[...d,(i=(c=e==null?void 0:e.doc)==null?void 0:c.uploadedDoc)==null?void 0:i.uploadedDocId]}),src:k((he=(fe=e==null?void 0:e.doc)==null?void 0:fe.uploadedDoc)==null?void 0:he.uploadedDocId)?A:`${(je=(ge=e==null?void 0:e.doc)==null?void 0:ge.uploadedDoc)==null?void 0:je.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),((Se=(ve=(we=e==null?void 0:e.doc)==null?void 0:we.uploadedDoc)==null?void 0:ve.docPath)==null?void 0:Se.split(".")[((ye=(De=(be=(Ne=e==null?void 0:e.doc)==null?void 0:Ne.uploadedDoc)==null?void 0:be.docPath)==null?void 0:De.split("."))==null?void 0:ye.length)-1])=="png"&&a.jsx("div",{className:"cursor-pointer flex-shrink-0",children:a.jsx("img",{onError:()=>h(d=>{var c,i;return[...d,(i=(c=e==null?void 0:e.doc)==null?void 0:c.uploadedDoc)==null?void 0:i.uploadedDocId]}),src:k((_e=(Fe=e==null?void 0:e.doc)==null?void 0:Fe.uploadedDoc)==null?void 0:_e.uploadedDocId)?A:`${(Ce=(Pe=e==null?void 0:e.doc)==null?void 0:Pe.uploadedDoc)==null?void 0:Ce.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})})]})})]}),a.jsxs("div",{className:"w-full md:w-[15%] flex flex-row gap-2",children:[a.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Status :"}),a.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",children:((Ee=e==null?void 0:e.doc)==null?void 0:Ee.uploadedDoc)==""?a.jsx("i",{className:"not-italic",children:"NA"}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"whitespace-no-wrap",children:((Ue=(Ie=e==null?void 0:e.doc)==null?void 0:Ie.uploadedDoc)==null?void 0:Ue.verifyStatus)==0&&a.jsx(a.Fragment,{children:"Pending"})}),a.jsx("p",{className:"text-green-500 whitespace-no-wrap",children:((Me=(ke=e==null?void 0:e.doc)==null?void 0:ke.uploadedDoc)==null?void 0:Me.verifyStatus)==1&&a.jsx(a.Fragment,{children:"Verified"})}),a.jsx("p",{className:"text-red-500 whitespace-no-wrap",children:((Re=e==null?void 0:e.doc)==null?void 0:Re.btcStatus)===!0&&a.jsx(a.Fragment,{children:"BTC"})}),a.jsx("p",{className:"text-red-500 whitespace-no-wrap",children:((Ae=(Be=e==null?void 0:e.doc)==null?void 0:Be.uploadedDoc)==null?void 0:Ae.verifyStatus)==2&&a.jsx(a.Fragment,{children:"Rejected"})})]})})]}),a.jsxs("div",{className:"w-full md:w-[13%] flex flex-row gap-2",children:[a.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Remarks :"}),a.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",children:((Le=($e=e==null?void 0:e.doc)==null?void 0:$e.uploadedDoc)==null?void 0:Le.remarks)==""||((Oe=(Te=e==null?void 0:e.doc)==null?void 0:Te.uploadedDoc)==null?void 0:Oe.remarks)==null?a.jsx("i",{className:"not-italic",children:"NA"}):(Ge=(ze=e==null?void 0:e.doc)==null?void 0:ze.uploadedDoc)==null?void 0:Ge.remarks})]}),a.jsxs("div",{className:"w-full md:w-[20%] flex flex-row gap-2",children:[a.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Upload :"}),a.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",children:(He=e==null?void 0:e.doc)!=null&&He.btcStatus&&v||!((Ve=e==null?void 0:e.doc)!=null&&Ve.btcStatus)&&!v&&((qe=e==null?void 0:e.doc)==null?void 0:qe.uploadedDoc)==""||!((Qe=e==null?void 0:e.doc)!=null&&Qe.btcStatus)&&!v?a.jsx(a.Fragment,{children:w?a.jsx(a.Fragment,{children:a.jsx(na,{radius:"9",color:"#6366f1",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClassName:"",visible:!0})}):a.jsxs(a.Fragment,{children:[a.jsx("input",{ref:d=>ea.current[e==null?void 0:e.index]=d,type:"file",name:"groom",id:"",className:"",onChange:d=>ta(d)}),a.jsx("button",{disabled:w,onClick:()=>{var d;return la((d=e==null?void 0:e.doc)==null?void 0:d.docName,e==null?void 0:e.index)},className:"cursor-pointer w-max bg-indigo-400 hover:bg-indigo-500 text-white px-8 py-1 rounded-sm border border-indigo-600",children:"Upload"})]})}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"font-semibold text-sm text-green-500 text-center",children:"Uploaded"})})})]})]}),a.jsx(ra,{isOpen:B,onAfterOpen:g,onRequestClose:x,className:"w-screen h-screen flex justify-center items-center",contentLabel:"Example Modal",children:a.jsxs("div",{class:" rounded-lg shadow-xl border-2 border-gray-200 bg-white md:ml-32 p-4 animate__animated animate__zoomIn animate__faster w-full md:w-[60vw] h-[80vh]",children:[a.jsx("div",{className:"absolute top-2 font-normal bg-red-200 hover:bg-red-300 right-2 rounded-full p-2 cursor-pointer",onClick:x,children:a.jsx(xa,{})}),k(z)?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"w-full h-full bg-gray-700 flex items-center justify-center text-gray-200",children:[a.jsx("div",{className:"border-r-2 border-gray-200 pr-4",children:"Error"}),a.jsx("div",{className:"pl-4",children:"Document not visible"})]})}):a.jsxs(a.Fragment,{children:[r=="pdf"&&a.jsx(a.Fragment,{children:a.jsx("iframe",{className:"w-full h-full",src:y,frameborder:"0"})}),r!="pdf"&&a.jsx(a.Fragment,{children:a.jsx("div",{className:"w-full h-[77vh] overflow-auto flex flex-wrap items-center justify-center",children:a.jsx("img",{src:y,alt:"",srcset:"",className:""})})})]})]})})]})},Ma=()=>{const[e,T]=n.useState(!1),[E,O]=n.useState(""),[m,N]=n.useState([]),[b,w]=n.useState(!1),[l,D]=n.useState(null),{id:h,btc:z}=Xe(),{api_getDocList:R,api_getDetails:B}=Ze(),I=ca();n.useEffect(()=>{w(!0),U(),y()},[]);const y=()=>{$.post(B,{applicationId:h},Ke()).then(t=>{var o,x,g,u;console.log("getting response of user data => ",t),(o=t==null?void 0:t.data)!=null&&o.status?(console.log("user data => ",(x=t==null?void 0:t.data)==null?void 0:x.data),D((g=t==null?void 0:t.data)==null?void 0:g.data)):r(!0,L((u=t==null?void 0:t.data)==null?void 0:u.message))}).catch(t=>{console.log("getting error doc list for marriage => ",t),r(!0,"Error getting document list, please try again later !")}).finally(()=>{w(!1)})},U=()=>{$.post(R,{applicationId:h},Ke()).then(t=>{var o,x,g,u,S,v;console.log("getting response of marriage doc list => ",t),(o=t==null?void 0:t.data)!=null&&o.status?(console.log("doc List of marriage => ",(g=(x=t==null?void 0:t.data)==null?void 0:x.data)==null?void 0:g.listDocs),N((S=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:S.listDocs)):r(!0,L((v=t==null?void 0:t.data)==null?void 0:v.message))}).catch(t=>{console.log("getting error doc list for marriage => ",t),r(!0,"Error getting document list, please try again later !")}).finally(()=>{w(!1)})},r=(t,o)=>{O(o),T(t)};return a.jsxs(a.Fragment,{children:[b&&a.jsx(fa,{}),!b&&a.jsxs("div",{className:" animate__animated animate__fadeIn animate__faster overflow-x-hidden overflow-y-scroll w-[99%] mx-auto rounded-md gap-6 h-full p-4",children:[e&&a.jsx(ua,{activateBottomErrorCard:r,errorTitle:E}),a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("h1",{className:"bg-white shadow-lg shadow-indigo-300 text-indigo-500 border-[0.17vw] border-indigo-500 px-[4vw] py-[1.5vh] w-max font-semibold text-[2.8vh]",children:"Document Upload For Marriage Registration"})}),a.jsxs("div",{className:"flex items-center flex-wrap w-full text-sm bg-white p-4 shadow-lg gap-2",children:[a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[a.jsx("div",{children:"Application No. "}),a.jsx("div",{className:"font-semibold text-base",children:M(l==null?void 0:l.application_no)})]}),a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[a.jsx("div",{children:"Groom Name "}),a.jsx("div",{className:"font-semibold text-base",children:M(l==null?void 0:l.groom_name)})]}),a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[a.jsx("div",{children:"Bride Name "}),a.jsx("div",{className:"font-semibold text-base",children:M(l==null?void 0:l.bride_name)})]}),a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[a.jsx("div",{children:"Marriage Date "}),a.jsx("div",{className:"font-semibold text-base",children:We(l==null?void 0:l.marriage_date)})]}),a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[a.jsx("div",{children:"Marriage Place "}),a.jsx("div",{className:"font-semibold text-base",children:M(l==null?void 0:l.marriage_place)})]}),a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[27%]",children:[a.jsx("div",{children:"Either of the Bride or Groom belongs to BPL category ? "}),a.jsx("div",{className:"font-semibold text-base",children:We(l==null?void 0:l.is_bpl)})]})]}),a.jsx("p",{className:"text-sm mt-4",children:"Note : Image must be less than 1Mb and pdf must be less than 10MB."}),(l==null?void 0:l.doc_upload_status)==1&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"font-semibold text-sm text-green-600 py-2 flex gap-4 items-center",children:["All Documents Uploaded Successfully.",(l==null?void 0:l.payment_status)==0?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-black",children:"Continue to payment "})," ",a.jsx("button",{className:"border-[0.15vw] border-indigo-500 hover:bg-indigo-600 hover:text-white text-indigo-500 shadow-indigo-200 shadow-md px-[2vw] py-[0.6vh] text-[1.8vh] hover:shadow-none",onClick:()=>I(`/marriage-payment/${h}`),children:"Pay Now"})]}):a.jsx(a.Fragment,{children:"Your application is in verification process. Please wait for appointment date."})]})}),(l==null?void 0:l.doc_upload_status)==0?a.jsxs("div",{className:"bg-white  mt-4 flex flex-col p-4 shadow-lg text-sm transition-all duration-150 gap-2",children:[a.jsxs("div",{className:"hidden md:visible md:flex items-center w-full flex-wrap gap-2 border-b-2 border-indigo-400 mb-2 font-semibold text-base",children:[a.jsx("div",{className:"w-[5%]",children:"#"}),a.jsx("div",{className:"w-[22%]",children:"Document"}),a.jsx("div",{className:"w-[20%]",children:"Uploaded Preview"}),a.jsx("div",{className:"w-[15%]",children:"Status"}),a.jsx("div",{className:"w-[13%]",children:"Remarks"}),a.jsx("div",{className:"w-[20%]",children:"Upload"})]}),(m==null?void 0:m.length)>0&&(m==null?void 0:m.map((t,o)=>a.jsx(a.Fragment,{children:a.jsx(ha,{name:t==null?void 0:t.docName,doc:t,index:o,activateBottomErrorCard:r,refresh:()=>(U(),y())})})))]}):""]})]})};export{Ma as default};
