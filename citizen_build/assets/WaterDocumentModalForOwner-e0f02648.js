import{j as e}from"./mui-8e804a04.js";import{a as T,r as n}from"./router-87042356.js";import{M as _}from"./index-4e794517.js";import{a as L}from"./index.esm-2e3a7c1f.js";import{F as O}from"./index.esm-f717eb21.js";import{W as R}from"./WaterApiList-5dfb5a8b.js";import{l as A,A as B}from"./index-0f28b603.js";const X="/assets/image-506bbc5b.png",Y="/assets/no-photo-22d007b7.png",W="/assets/upload-2c8c7f58.gif",z={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function Z(s){var f,j,N;const[S,m]=T.useState(!1),[h,g]=n.useState(),[b,i]=n.useState(),[o,u]=n.useState(),[d,c]=n.useState(!1),{api_getDocList:C,api_waterUploadDoc:k,header:M}=R(),{notify:y}=n.useContext(A),t=s==null?void 0:s.payloadData;console.log("Doc type is",h,t),console.log("this isss...",t==null?void 0:t.refDocName),n.useEffect(()=>{s.openDocumentModal>0&&m(!0),console.log(s.openDocumentModal,"===========>props.openDocumentModal"),i()},[s.openDocumentModal]);function F(){}function x(){m(!1),g(),u()}const U=a=>{var w,v;a.preventDefault();const E=["jpg","jpeg","png","pdf"],I=(w=o==null?void 0:o.name)==null?void 0:w.split(".").pop().toLowerCase();if(!E.includes(I)){i(" Unsupported File Format. Please upload PDF, JPG, PNG, or JPEG.");return}if(h==null||h==""||o==null||o=="")return i("Please Select Correct File and Type");let l=new FormData;l.append("applicationId",(v=s==null?void 0:s.payloadData)==null?void 0:v.applicationId),l.append("document",o),l.append("docCode",h),l.append("docCategory",t==null?void 0:t.refDocName),c(!0),B.post(k,l,M).then(r=>{var D,p,P;r.data.status==!0?(y((D=r==null?void 0:r.data)==null?void 0:D.message,"success"),console.log("Data Uploaded",r),c(!1),x(),s.refetch()):(c(!1),y((p=r==null?void 0:r.data)==null?void 0:p.message,"error"),i((P=r==null?void 0:r.data)==null?void 0:P.message))}).catch(r=>{c(!1),y("Something went wrong","error")})};return e.jsx("div",{className:"",children:e.jsx(_,{isOpen:S,onAfterOpen:F,onRequestClose:x,style:z,contentLabel:"Example Modal",children:e.jsx("form",{encType:"multipart/form",onSubmit:U,children:e.jsxs("div",{className:"bg-indigo-200 shadow-2xl border border-sky-200 p-2 rounded-md w-full overflow-auto max-sm:w-[20rem]",children:[e.jsxs("div",{className:"my-2 mx-3",children:[e.jsxs("div",{onClick:x,className:"float-right cursor-pointer hover:bg-gray-300 rounded-sm p-1",children:[" ",e.jsx(L,{})]}),e.jsxs("h1",{className:"font-semibold text-gray-700",children:["Upload Document ",(f=s==null?void 0:s.payloadData)==null?void 0:f.docName]})]}),e.jsxs("div",{className:"md:inline-block w-full overflow-auto p-4",children:[e.jsxs("table",{className:" leading-normal border",children:[e.jsx("thead",{className:"bg-sky-100",children:e.jsxs("tr",{className:"font-semibold ",children:[e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"#"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Type"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Upload"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Submit"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:1})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:(j=t==null?void 0:t.refDocName)==null?void 0:j.replace(/_/g," ")})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:e.jsxs("select",{onChange:a=>g(a.target.selectedOptions[0].text),className:" outline-blue-600 border border-gray-400 w-40",children:[e.jsx("option",{children:"Select Document"}),(N=t==null?void 0:t.docVal)==null?void 0:N.map(a=>e.jsx("option",{value:a.id,children:a.doc_name}))]})})}),e.jsx("td",{className:"px-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{disabled:d,name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:a=>u(a.target.files[0])}),e.jsxs("label",{className:`${d?"cursor-wait hover:rounded-none":"cursor-pointer rounded-sm hover:rounded-md hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800"} bg-blue-500  shadow-lg flex pl-4 pr-5 py-2 text-white font-medium`,htmlFor:"contained-button-file",children:[e.jsx(O,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),o?o.name:"Browse File"]})]})]})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:d?e.jsx("img",{className:"h-8",src:W,alt:"Uploading"}):e.jsx("button",{disabled:d,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-4 py-2",children:"Submit"})})]})})]}),e.jsx("div",{className:"my-2 flex justify-center font-semibold text-red-600 relative",children:e.jsx("p",{className:"absolute",children:b&&b})})]})]})})})})}const G={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function ee(s){var f,j,N;const[S,m]=n.useState(),[h,g]=T.useState(!1),[b,i]=n.useState();n.useState();const[o,u]=n.useState(),[d,c]=n.useState(!1),{notify:C}=n.useContext(A),{api_getDocList:k,api_waterUploadDoc:M,header:y}=R(),t=s==null?void 0:s.payloadData;n.useEffect(()=>{s.openDocumentModal>0&&g(!0)},[s.openDocumentModal]);function F(){}function x(){g(!1),i(),u()}console.log("Props in water doc upload",s);const U=a=>{var w,v,r,D;if(a.preventDefault(),b==null||b==""||o==null||o=="")return m("Please Select Correct File and Type");const E=["jpg","jpeg","png","pdf"],I=(w=o==null?void 0:o.name)==null?void 0:w.split(".").pop().toLowerCase();if(!E.includes(I)){m("Invalid file extension");return}let l=new FormData;l.append("applicationId",(v=s==null?void 0:s.payloadData)==null?void 0:v.applicationId),l.append("docCategory",(r=s==null?void 0:s.payloadData)==null?void 0:r.docCategory),l.append("document",o),l.append("docCode",b),l.append("ownerId",(D=s==null?void 0:s.payloadData)==null?void 0:D.ownerId),console.log("Owner Document Complate Payload",l),c(!0),B.post(M,l,y).then(p=>{p.data.status==!0?(C("Document Uploaded Successfully","success"),console.log("Data Uploaded",p),c(!1),x(),s.refetch()):(c(!1),C("Failed to Upload Document","error"),m("Error : Exception : File is too large - must be under 2MB."))}).catch(p=>{c(!1),C("Something went wrong","error"),m("Exception : File is too large - must be under 2MB."),console.log("Expection...",p)})};return console.log("Paylidadd data in owner details",t),e.jsx("div",{className:"",children:e.jsx(_,{isOpen:h,onAfterOpen:F,onRequestClose:x,style:G,contentLabel:"Example Modal",children:e.jsx("form",{encType:"multipart/form",onSubmit:U,children:e.jsxs("div",{className:"bg-indigo-200 shadow-2xl border border-sky-200 p-2 rounded-md",children:[e.jsxs("div",{className:"my-2 mx-3",children:[e.jsxs("div",{onClick:x,className:"float-right cursor-pointer hover:bg-gray-300 rounded-sm p-1",children:[" ",e.jsx(L,{})]}),e.jsx("h1",{className:"font-semibold md:text-xl text-sm text-gray-700",children:"Upload Document"})]}),e.jsxs("div",{className:"md:inline-block min-w-full overflow-hidden hidden p-4",children:[e.jsxs("table",{className:"min-w-full leading-normal border",children:[e.jsx("thead",{className:"bg-sky-100",children:e.jsxs("tr",{className:"font-semibold ",children:[e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"#"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Owner Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Type"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Upload"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Submit"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:1})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap capitalize",children:(f=t==null?void 0:t.docName)==null?void 0:f.replace(/_/g," ")})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:t==null?void 0:t.ownerName})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:e.jsxs("select",{onChange:a=>i(a.target.selectedOptions[0].text),className:" outline-blue-600 border border-gray-400 w-40",children:[e.jsx("option",{children:"Select Documet"}),(j=t==null?void 0:t.docVal)==null?void 0:j.map(a=>e.jsx("option",{value:a.id,children:a.doc_name}))]})})}),e.jsx("td",{className:"px-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{disabled:d,name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:a=>u(a.target.files[0])}),e.jsxs("label",{className:` ${d?"cursor-wait hover:rounded-none":"cursor-pointer rounded-sm hover:rounded-md hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800"} bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium`,htmlFor:"contained-button-file",children:[e.jsx(O,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),"Browse File"]})]})]})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:d?e.jsx("img",{className:"h-8",src:W,alt:"Uploading"}):e.jsx("button",{disabled:d,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-4 py-2",children:"Submit"})})]})})]}),e.jsx("div",{className:"my-2 flex justify-center font-semibold text-red-600 relative",children:e.jsx("p",{className:"absolute",children:S&&S})})]}),e.jsxs("div",{className:"grid grid-cols-12 md:hidden",children:[e.jsxs("div",{className:"col-span-5 text-sm",children:[e.jsx("p",{children:"Document Name"}),e.jsx("p",{children:"Owner Name"}),e.jsx("p",{children:"Document Type"}),e.jsx("p",{children:"Select File"})]}),e.jsxs("div",{className:"col-span-7",children:[e.jsx("p",{children:t==null?void 0:t.docName}),e.jsx("p",{children:t==null?void 0:t.ownerName}),e.jsx("p",{children:e.jsxs("select",{onChange:a=>i(a.target.selectedOptions[0].text),className:" outline-blue-600 border border-gray-400 h-8 w-32 text-xs",children:[e.jsx("option",{children:"Select Document"}),(N=t==null?void 0:t.docVal)==null?void 0:N.map(a=>e.jsx("option",{value:a.id,children:a.doc_name}))]})}),e.jsx("p",{children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:a=>u(a.target.files[0])}),e.jsxs("label",{className:"bg-blue-500 hover:bg-blue-600 hover:ring-1 hover:ring-blue-800 rounded-sm hover:shadow-2xl shadow-lg cursor-pointer flex pl-2 pr-3 py-1  text-white font-medium",htmlFor:"contained-button-file",children:[e.jsx(O,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),"Browse File"]})]})]})})]}),e.jsxs("div",{className:"text-sm flex m-auto",children:[e.jsx("button",{type:"button",className:"border bg-sky-600 rounded-md text-white px-3 py-1",children:"Close"}),e.jsx("button",{disabled:d,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-3 py-1",children:"Submit"})]})]})]})})})})}export{Z as W,ee as a,X as i,Y as n};
