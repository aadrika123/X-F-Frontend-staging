import{j as e}from"./mui-8e804a04.js";import{r as t,a as I,f as T,u as A}from"./router-87042356.js";import{l as F,A as k}from"./index-0f28b603.js";import{M as O}from"./index-4e794517.js";import"./RazorpayPaymentScreen-07e994d7.js";import{F as E}from"./index.esm-f717eb21.js";import{P as M}from"./PetRegAPIList-7a71d901.js";import{a as V}from"./index.esm-2e3a7c1f.js";import{u as B}from"./upload-e931b2e1.js";import{R as W}from"./RigRegTopButtons-cf76a577.js";import{S as z}from"./ShimmerEffectInline-66ba2926.js";import{V as G}from"./ViewUploadedDoc-363cff11.js";import"./react-09dd1212.js";import"./axios-97164839.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";import"./CitizenApplyApiList-5b22da78.js";import"./logo1-66954bc2.js";import"./WaterApiList-5dfb5a8b.js";const L={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function $(o){var v,b;const[S,d]=t.useState(),[a,f]=I.useState(!1),[y,j]=t.useState((v=o==null?void 0:o.payloadData)==null?void 0:v.doc_code);t.useState();const[c,i]=t.useState(),[p,x]=t.useState(!1),{notify:m}=t.useContext(F),{api_RigReUploadDocument:N,header1:U}=M(),r=o==null?void 0:o.payloadData,[P,_]=t.useState([{label:"License",value:"LICENSE"},{label:"Tax Copy",value:"TAX"},{label:"Pollution",value:"POLLUTION"}]);console.log("Props Data in Doc upload modal..",r),t.useEffect(()=>{f(!0)},[]);function u(){}function h(){f(!1),j(),i(),o.close(!1)}const R=l=>{var n,g;if(l.preventDefault(),y==null||y==""||c==null||c=="")return d("Please Select Correct File and Type");const w=["jpg","jpeg","png","pdf"],C=(n=c==null?void 0:c.name)==null?void 0:n.split(".").pop().toLowerCase();if(!w.includes(C)){d("Invalid file extension");return}let s=new FormData;s.append("image",c),s.append("id",(g=o==null?void 0:o.payloadData)==null?void 0:g.id),console.log("Form Data Payload",s),x(!0),k.post(N,s,U).then(D=>{D.data.status==!0?(m("Document Uploaded Successfully","success"),console.log("Data Uploaded",D),x(!1),h(),o.refetch()):(x(!1),m("Failed to Upload Document","error"),d("Failed to upload file. Please Select Proper File."))}).catch(D=>{x(!1),m("Something went wrong","error"),d("Failed to upload file. Please Select Proper File."),console.log("Expection...",D)})};return e.jsx("div",{className:" overflow-auto",children:e.jsx(O,{isOpen:a,onAfterOpen:u,onRequestClose:h,style:L,contentLabel:"Example Modal",children:e.jsx("form",{encType:"multipart/form",onSubmit:R,children:e.jsxs("div",{className:"bg-indigo-200 shadow-2xl border border-sky-200 p-2 rounded-md",children:[e.jsxs("div",{className:"my-2 mx-3",children:[e.jsxs("div",{onClick:h,className:"float-right cursor-pointer hover:bg-gray-300 rounded-sm p-1",children:[" ",e.jsx(V,{})]}),e.jsx("h1",{className:"font-semibold md:text-xl text-sm text-gray-700",children:"Upload Document"})]}),e.jsxs("div",{className:"md:inline-block max-sm:w-[20rem] overflow-auto p-4",children:[e.jsxs("table",{className:"leading-normal border",children:[e.jsx("thead",{className:"bg-sky-100",children:e.jsxs("tr",{className:"font-semibold ",children:[e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"#"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Type"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Upload"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Submit"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:1})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap capitalize",children:(b=r==null?void 0:r.doc_code)==null?void 0:b.replace(/_/g," ")})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:e.jsxs("select",{onChange:l=>j(l.target.value),className:"outline-blue-600 border border-gray-400 w-40",children:[e.jsx("option",{value:"",children:"Select Document"}),console.log("asdasdasdasd",r),P.map(l=>e.jsx("option",{value:l.value,selected:(r==null?void 0:r.doc_code)==l.value,children:l.label},l.value))]})})}),e.jsx("td",{className:"px-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{disabled:p,name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:l=>i(l.target.files[0])}),e.jsxs("label",{className:` ${p?"cursor-wait hover:rounded-none":"cursor-pointer rounded-sm hover:rounded-md hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800"} bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium`,htmlFor:"contained-button-file",children:[e.jsx(E,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),"Browse File"]})]})]})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:p?e.jsx("img",{className:"h-8",src:B,alt:"Uploading"}):e.jsx("button",{disabled:p,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-4 py-2",children:"Submit"})})]})})]}),e.jsx("div",{className:"my-2 flex justify-center font-semibold text-red-600 relative",children:e.jsx("p",{className:"absolute",children:S})})]})]})})})})}const xe=o=>{t.useState(0);const[S,d]=t.useState(!1),[a,f]=t.useState(),[y,j]=t.useState(),[c,i]=t.useState(!0),[p,x]=t.useState(0),[m,N]=t.useState(!1),[U,r]=t.useState(0),[P,_]=t.useState();t.useContext(F);const{id:u}=T(),{api_RigRegistrationDocUploadList:h,header1:R}=M(),{setBreadCrumbData:v}=t.useContext(F);t.useEffect(()=>{v(["Vehicle Registration","Upload Document"])},[]);const b=A(),l=s=>{s&&(_(s),r(n=>n+1))},w=()=>{i(!0),k.post(h,{applicationId:u},R).then(s=>{var n,g;i(!1),(n=s==null?void 0:s.data)!=null&&n.status?(f((g=s==null?void 0:s.data)==null?void 0:g.data),console.log(s,"response from doc vehicle")):N(!0)}).catch(s=>{console.log("Error while getting pet doc list",s),i(!1),N(!0)})};t.useEffect(()=>{w()},[p]);const C=s=>{d(!0),j(s),console.log("Document Upload click..",s)};return e.jsxs("div",{className:"mt-3",children:[e.jsx(W,{active:"document",consumerNo:a==null?void 0:a.ApplicationNo}),e.jsx(G,{openDocviewModal:U,documentUrl:P}),S&&e.jsx($,{payloadData:y,refetch:w,applicationId:u,close:d}),e.jsxs("div",{className:"bg-white rounded-md shadow-sm py-2",children:[e.jsx("div",{className:"my-3",children:e.jsx("p",{className:"text-center text-2xl font-medium text-gray-800",children:"Vehicle Registration Document Upload"})}),c?e.jsxs("p",{className:"w-full",children:[" ",e.jsx(z,{})," "]}):e.jsxs("div",{className:"overflow-auto",children:[m==!0?e.jsx("p",{className:"m-auto font-semibold border border-gray-300 text-red-700 bg-red-100 px-5 py-2 rounded shadow w-fit",children:"Failed to Get Data"}):e.jsxs("table",{className:"w-full text-left text-gray-600",children:[e.jsx("thead",{className:"text-lg bg-gray-300 border-b-2",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"px-3 py-2",children:"Sl."}),e.jsx("th",{className:"px-3 py-2",children:"Document Name"}),e.jsx("th",{className:"px-3 py-2",children:"View "}),e.jsx("th",{className:"px-3 py-2",children:"Status"}),e.jsx("th",{className:"px-3 py-2",children:"Action"})]})}),e.jsx("tbody",{className:"",children:a&&(a==null?void 0:a.map((s,n)=>e.jsxs("tr",{className:"hover:bg-sky-100 border-b",children:[e.jsx("td",{className:"px-3 py-2",children:n+1}),e.jsxs("td",{className:"px-3 py-2",children:[s.doc_code," "]}),e.jsxs("td",{className:"px-3 py-2",children:[(s==null?void 0:s.doc_path)&&e.jsx("img",{className:"h-8 cursor-pointer",onClick:()=>l(s==null?void 0:s.doc_path),src:s==null?void 0:s.doc_path,alt:"images"}),!(s!=null&&s.doc_path)&&"N/A"]}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left text-[#37517e]",children:[(s==null?void 0:s.verify_status)==0&&e.jsx("p",{className:"text-orange-400 font-semibold",children:"Pending"}),(s==null?void 0:s.verify_status)==1&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Verified"}),(s==null?void 0:s.verify_status)==2&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Rejected"})]}),e.jsx("td",{className:"py-2 border-b border-gray-200 text-sm",children:(s==null?void 0:s.verify_status)==1?e.jsx("p",{className:"text-base",children:"Submitted"}):e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsx("span",{className:"relative ",onClick:()=>C(s),children:e.jsxs("label",{className:"cursor-pointer rounded-sm hover:rounded-sm hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800 bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium",htmlFor:"contained-button-file",children:[e.jsx(E,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),s.doc_path?"Re-Upload":"Upload"]})})]})})]})))})]}),(a==null?void 0:a.docUploadStatus)&&e.jsx("p",{className:"text-center mt-5 text-green-600 font-semibold",children:"All Documents are uploaded."})]}),e.jsxs("div",{className:"flex justify-center my-6 space-x-5",children:[e.jsx("button",{type:"button",onClick:()=>b("/vehicle-registration-dashboard"),className:"bg-indigo-500 px-5 py-1 text-white rounded shadow",children:"Back"}),(a==null?void 0:a.docUploadStatus)&&(a==null?void 0:a.paymentStatus)==0&&e.jsx("button",{onClick:()=>b(`/petPayment/${u}`),type:"submit",className:"bg-indigo-700 px-8 py-2 text-white rounded font-sans font-semibold shadow",children:"Pay Now"})]})]})]})};export{xe as default};
