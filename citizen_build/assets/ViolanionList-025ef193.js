import{j as e}from"./mui-8e804a04.js";import{r as s}from"./router-87042356.js";import{L as I}from"./ListTable-f78d3234.js";import{c as _,d as A,u as E,A as k,b as m,ak as D,P as H,n as u,X as B}from"./index-0f28b603.js";import{a as F}from"./axios-97164839.js";import{B as U}from"./BarLoader-9fd00c2c.js";import"./react-09dd1212.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";const G=()=>{const{api_violation_list:x,api_ulbList:p}=H(),[f,n]=s.useState(!1),[h,i]=s.useState([]),[r,b]=s.useState([]),[V,g]=s.useState(0),[c,j]=s.useState(null),[v,w]=s.useState(!1),[S,d]=s.useState(!1),y="form-control block w-full px-2 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md",N=_({ulbId:A().required("Select Your Ulb")}),o=E({initialValues:{ulbId:""},onSubmit:t=>{j({ulbId:t.ulbId}),g(a=>a+1),w(!0)},validationSchema:N}),L=()=>{n(!0),F.get(p,{},m()).then(t=>{var a,l;n(!1),((a=t==null?void 0:t.data)==null?void 0:a.status)==!0&&b((l=t==null?void 0:t.data)==null?void 0:l.data)}).catch(t=>{n(!1),console.log("Error fetching collector list:",t)})};s.useEffect(()=>{L()},[]),s.useEffect(()=>{c&&(d(!0),k.post(x,{userType:"EO",...c},m()).then(t=>{var a,l;(a=t==null?void 0:t.data)!=null&&a.status?(i((l=t==null?void 0:t.data)==null?void 0:l.data),d(!1)):i([])}).catch(t=>{console.log("Error fetching data:",t),i([]),d(!1)}))},[c]);const C=[{Header:"#",Cell:({row:t})=>e.jsx("div",{className:"pr-2",children:(t==null?void 0:t.index)+1})},{Header:"Violation Name",accessor:"violation_name",Cell:({cell:t})=>{var a;return u((a=t.row.original)==null?void 0:a.violation_name)}},{Header:"Violation Section",accessor:"violation_section",Cell:({cell:t})=>{var a;return u((a=t.row.original)==null?void 0:a.violation_section)}},{Header:"Department",accessor:"department_name",Cell:({cell:t})=>{var a;return u((a=t.row.original)==null?void 0:a.department_name)}},{Header:"Penalty Amount",accessor:"penalty_amount",Cell:({cell:t})=>{var a;return B((a=t.row.original)==null?void 0:a.penalty_amount)}}];return e.jsxs(e.Fragment,{children:[S&&e.jsx(U,{}),e.jsxs("div",{className:"w-full  md:pt-10 bg-white shadow-lg rounded-md",children:[e.jsx("form",{onChange:o.handleChange,onSubmit:o.handleSubmit,className:"mb-4 ml-[30%]",children:e.jsxs("div",{className:"flex flex-wrap flex-row justify-start w-full gap-x-6 gap-y-2 text-sm 3xl:text-base p-4 px-8",children:[e.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[e.jsx("div",{className:"col-span-6 font-semibold",children:"Select Ulb"}),e.jsx("div",{className:"col-span-6",children:e.jsxs("select",{name:"ulbId",id:"ulbId",className:y,value:o.values.ulbId,onChange:o.handleChange,children:[e.jsx("option",{value:"",children:"Select Your ULB"}),f?e.jsx("option",{value:"",disabled:!0,children:"Loading..."}):r==null?void 0:r.map(t=>e.jsx("option",{value:t==null?void 0:t.id,children:t==null?void 0:t.ulb_name},t==null?void 0:t.id))]})}),e.jsx("div",{className:"col-span-12 text-center",children:o.touched.ulbId&&o.errors.ulbId&&e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-red-600 text-xs",children:o.errors.ulbId})})})]}),e.jsx("div",{className:"w-full md:w-[20%] flex justify-start items-center mt-4",children:e.jsxs("button",{type:"submit",className:"flex flex-row items-center border border-green-600 bg-green-600 hover:bg-green-400 text-white hover:text-black shadow-lg rounded-sm text-sm font-semibold px-5 py-1 w-max",children:[" ",e.jsx("span",{className:"mr-2",children:e.jsx(D,{})}),"Search "]})})]})}),v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"uppercase font-semibold text-gray-700 text-2xl py-2 text-center tracking-[0.5rem]",children:"Violation List"}),e.jsx(I,{columns:C,dataList:h,exportStatus:!1})]})]})]})};export{G as default};
