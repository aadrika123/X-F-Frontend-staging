import{j as e}from"./mui-8e804a04.js";import{r as a,a as B,f as W,u as _}from"./router-87042356.js";import{l as M,A as I}from"./index-0f28b603.js";import{M as z}from"./index-4e794517.js";import"./RazorpayPaymentScreen-07e994d7.js";import{F as O}from"./index.esm-f717eb21.js";import{P as V}from"./PetRegAPIList-7a71d901.js";import{a as G}from"./index.esm-2e3a7c1f.js";import{u as $}from"./upload-e931b2e1.js";import{P as q}from"./PetRegTopButtons-48d948a5.js";import{S as H}from"./ShimmerEffectInline-66ba2926.js";import{V as J}from"./ViewUploadedDoc-363cff11.js";import"./react-09dd1212.js";import"./axios-97164839.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";import"./CitizenApplyApiList-5b22da78.js";import"./logo1-66954bc2.js";import"./WaterApiList-5dfb5a8b.js";const K={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function Q(o){var w,v;const[P,i]=a.useState(),[s,j]=B.useState(!1),[h,N]=a.useState();a.useState();const[d,r]=a.useState(),[m,g]=a.useState(!1),{notify:b}=a.useContext(M),{api_PetRegUploadDocument:x,header1:U}=V(),n=o==null?void 0:o.payloadData;console.log("Props Data in Doc upload modal..",n),a.useEffect(()=>{j(!0)},[]);function C(){}function f(){j(!1),N(),r(),o.close(!1)}const p=l=>{var y,S;if(l.preventDefault(),h==null||h==""||d==null||d=="")return i("Please Select Correct File and Type");const F=["jpg","jpeg","png","pdf"],D=(y=d==null?void 0:d.name)==null?void 0:y.split(".").pop().toLowerCase();if(!F.includes(D)){i("Invalid file extension");return}let c=new FormData;c.append("applicationId",o==null?void 0:o.applicationId),c.append("docCategory",(S=o==null?void 0:o.payloadData)==null?void 0:S.docName),c.append("document",d),c.append("docCode",h),console.log("Form Data Payload",c),g(!0),I.post(x,c,U).then(u=>{u.data.status==!0?(b("Document Uploaded Successfully","success"),console.log("Data Uploaded",u),g(!1),f(),o.refetch()):(g(!1),b("Failed to Upload Document","error"),i("Failed to upload file. Please Select Proper File."))}).catch(u=>{g(!1),b("Something went wrong","error"),i("Failed to upload file. Please Select Proper File."),console.log("Expection...",u)})};return e.jsx("div",{className:" overflow-auto",children:e.jsx(z,{isOpen:s,onAfterOpen:C,onRequestClose:f,style:K,contentLabel:"Example Modal",children:e.jsx("form",{encType:"multipart/form",onSubmit:p,children:e.jsxs("div",{className:"bg-indigo-200 shadow-2xl border border-sky-200 p-2 rounded-md",children:[e.jsxs("div",{className:"my-2 mx-3",children:[e.jsxs("div",{onClick:f,className:"float-right cursor-pointer hover:bg-gray-300 rounded-sm p-1",children:[" ",e.jsx(G,{})]}),e.jsx("h1",{className:"font-semibold md:text-xl text-sm text-gray-700",children:"Upload Document"})]}),e.jsxs("div",{className:"md:inline-block max-sm:w-[20rem] overflow-auto p-4",children:[e.jsxs("table",{className:"leading-normal border",children:[e.jsx("thead",{className:"bg-sky-100",children:e.jsxs("tr",{className:"font-semibold ",children:[e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"#"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Name"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Document Type"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Upload"}),e.jsx("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"Submit"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:1})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap capitalize",children:(w=n==null?void 0:n.docName)==null?void 0:w.replace(/_/g," ")})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:e.jsxs("select",{onChange:l=>N(l.target.value),className:" outline-blue-600 border border-gray-400 w-40",children:[e.jsx("option",{children:"Select Document"}),(v=n==null?void 0:n.masters)==null?void 0:v.map(l=>e.jsx("option",{value:l.documentCode,children:l.docVal}))]})})}),e.jsx("td",{className:"px-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsxs("span",{className:"relative ",children:[e.jsx("input",{disabled:m,name:"docPath",type:"file",style:{display:"none"},id:"contained-button-file",onChange:l=>r(l.target.files[0])}),e.jsxs("label",{className:` ${m?"cursor-wait hover:rounded-none":"cursor-pointer rounded-sm hover:rounded-md hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800"} bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium`,htmlFor:"contained-button-file",children:[e.jsx(O,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),"Browse File"]})]})]})}),e.jsx("td",{className:"px-5 py-2 border-b border-gray-200 bg-white text-sm",children:m?e.jsx("img",{className:"h-8",src:$,alt:"Uploading"}):e.jsx("button",{disabled:m,type:"submit",className:"border disabled:bg-green-300 disabled:text-gray-500 bg-green-600 rounded-md text-white px-4 py-2",children:"Submit"})})]})})]}),e.jsx("div",{className:"my-2 flex justify-center font-semibold text-red-600 relative",children:e.jsx("p",{className:"absolute",children:P})})]})]})})})})}const ge=o=>{var E;a.useState(0);const[P,i]=a.useState(!1),[s,j]=a.useState(),[h,N]=a.useState(),[d,r]=a.useState(!0),[m,g]=a.useState(0),[b,x]=a.useState(!1),[U,n]=a.useState(0),[C,f]=a.useState();a.useContext(M);const{id:p}=W(),{api_PetRegistrationDocUploadList:w,api_sendtoNextLevel:v,header1:l}=V(),{setBreadCrumbData:F}=a.useContext(M);a.useEffect(()=>{F(["Pet Registration","Upload Document"])},[]);const D=_(),c=t=>{t&&(f(t),n(k=>k+1))};console.log("nhjhjhghjghj",p);const y=()=>{r(!0),I.post(w,{applicationId:p},l).then(t=>{r(!1),t.data.status?j(t.data.data):x(!0)}).catch(t=>{console.log("Error while getting pet doc list",t),r(!1),x(!0)})},S=()=>{r(!0),I.post(v,{applicationId:p},l).then(t=>{r(!1),t.data.status?console.log("sendtonextlevel==>",t.data.message):x(!0)}).catch(t=>{console.log("Error while getting pet doc list",t),r(!1),x(!0)})};a.useEffect(()=>{y()},[m]);const u=t=>{i(!0),N(t),console.log("Document Upload click..",t)};return e.jsxs("div",{className:"mt-3",children:[e.jsx(q,{active:"document",consumerNo:s==null?void 0:s.ApplicationNo}),e.jsx(J,{openDocviewModal:U,documentUrl:C}),P&&e.jsx(Q,{payloadData:h,refetch:y,applicationId:p,close:i}),e.jsxs("div",{className:"bg-white rounded-md shadow-sm py-2",children:[e.jsx("div",{className:"my-3",children:e.jsx("p",{className:"text-center text-2xl font-medium text-gray-800",children:"Pet Registration Document Upload"})}),d?e.jsxs("p",{className:"w-full",children:[" ",e.jsx(H,{})," "]}):e.jsxs("div",{className:"overflow-auto",children:[b==!0?e.jsx("p",{className:"m-auto font-semibold border border-gray-300 text-red-700 bg-red-100 px-5 py-2 rounded shadow w-fit",children:"Failed to Get Data"}):e.jsxs("table",{className:"w-full text-left text-gray-600",children:[e.jsx("thead",{className:"text-lg bg-gray-300 border-b-2",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"px-3 py-2",children:"Sl."}),e.jsx("th",{className:"px-3 py-2",children:"Document Name"}),e.jsx("th",{className:"px-3 py-2",children:"View "}),e.jsx("th",{className:"px-3 py-2",children:"Status"}),e.jsx("th",{className:"px-3 py-2",children:"Action"})]})}),e.jsx("tbody",{className:"",children:s&&((E=s==null?void 0:s.listDocs)==null?void 0:E.map((t,k)=>{var R,A;return e.jsxs("tr",{className:"hover:bg-sky-100 border-b",children:[e.jsx("td",{className:"px-3 py-2",children:k+1}),e.jsxs("td",{className:"px-3 py-2",children:[t.docName," ",t.isMandatory==1&&e.jsx("span",{className:"text-red-600",children:"*"})," "]}),e.jsxs("td",{className:"px-3 py-2",children:[((R=t==null?void 0:t.uploadedDoc)==null?void 0:R.docPath)&&e.jsx("img",{className:"h-8 cursor-pointer",onClick:()=>{var T;return c((T=t==null?void 0:t.uploadedDoc)==null?void 0:T.docPath)},src:(A=t==null?void 0:t.uploadedDoc)==null?void 0:A.docPath,alt:"images"}),!(t!=null&&t.uploadedDoc)&&"N/A"]}),e.jsx("td",{className:"px-3 py-2 text-base",children:t.uploadedDoc?"Uploaded":"Not Uploaded"}),e.jsx("td",{className:"py-2 border-b border-gray-200 text-sm",children:(s==null?void 0:s.paymentStatus)==1?e.jsx("p",{className:"text-base",children:"Submitted"}):e.jsxs("span",{className:"relative inline-block ",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 "}),e.jsx("span",{className:"relative ",onClick:()=>u(t),children:e.jsxs("label",{className:"cursor-pointer rounded-sm hover:rounded-sm hover:shadow-2xl hover:bg-blue-600 hover:ring-1 hover:ring-blue-800 bg-blue-500  shadow-lg flex pl-4 pr-5 py-2  text-white font-medium",htmlFor:"contained-button-file",children:[e.jsx(O,{size:16,className:"mt-0 ml-0 mr-2 font-medium"}),t.uploadedDoc?"Re-Upload":"Upload"]})})]})})]})}))})]}),(s==null?void 0:s.docUploadStatus)&&e.jsx("p",{className:"text-center mt-5 text-green-600 font-semibold",children:"All Documents are uploaded."})]}),e.jsxs("div",{className:"flex justify-center my-6 space-x-5",children:[e.jsx("button",{type:"button",onClick:()=>D("/pet-registration-dashboard"),className:"bg-indigo-500 px-5 py-1 text-white rounded shadow",children:"Back"}),(s==null?void 0:s.docUploadStatus)&&(s==null?void 0:s.paymentStatus)==0&&e.jsx("button",{onClick:()=>D(`/petPayment/${p}`),type:"submit",className:"bg-indigo-700 px-8 py-2 text-white rounded font-sans font-semibold shadow",children:"Pay Now"}),e.jsx("button",{onClick:()=>S(),type:"submit",className:"bg-indigo-700 px-8 py-2 text-white rounded font-sans font-medium shadow",children:"Send To next Level"})]})]})]})};export{ge as default};
