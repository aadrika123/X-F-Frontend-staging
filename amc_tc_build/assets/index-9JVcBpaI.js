import{j as h,e as ee,b as te}from"./index-1he2n6vu.js";import{g as ne,d as w,r as a,b as z}from"./router-vn-0iGwJ.js";import{r as Z}from"./tailwind-umh7vczy.js";import{P as re}from"./index--HmRlT0-.js";import{u as oe}from"./useLocationRadius-viHRQgJ-.js";import"./reactQuery-VYMV1vFj.js";import"./axios-lPgvryBG.js";import"./reactIcons-lANGEfNm.js";import"./headlessui-pLs_kC1m.js";var se=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var c=s[o];if(!t(e[c],n[c]))return!1}return!0}return e!==e&&n!==n};const ae=ne(se);function ie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function le(t){var e=ie(t,"string");return typeof e=="symbol"?e:String(e)}function I(){return I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I.apply(this,arguments)}function A(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}const S={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},ce="https://maps.googleapis.com/maps/api/js";class P{static async load(e,n){var r;const o=e.libraries?e.libraries.split(","):[],s=this.serializeParams(e);this.listeners.push(n),(r=window.google)!=null&&(r=r.maps)!=null&&r.importLibrary?(this.serializedApiParams||(this.loadingStatus=S.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=s,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==s&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const c=["maps",...o];await Promise.all(c.map(i=>google.maps.importLibrary(i)))}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let n=null;const r=()=>n||(n=new Promise((o,s)=>{var c;const i=document.createElement("script"),m=new URLSearchParams;for(const[f,u]of Object.entries(e)){const v=f.replace(/[A-Z]/g,d=>"_"+d[0].toLowerCase());m.set(v,u)}m.set("loading","async"),m.set("callback","__googleMapsCallback__"),i.async=!0,i.src=ce+"?"+m.toString(),i.nonce=((c=document.querySelector("script[nonce]"))==null?void 0:c.nonce)||"",i.onerror=()=>{this.loadingStatus=S.FAILED,this.notifyLoadingStatusListeners(),s(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=S.LOADED,this.notifyLoadingStatusListeners(),o()},window.gm_authFailure=()=>{this.loadingStatus=S.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=S.LOADING,this.notifyLoadingStatusListeners(),document.head.append(i)}),n);google.maps.importLibrary=o=>r().then(()=>google.maps.importLibrary(o))}static notifyLoadingStatusListeners(){for(const e of this.listeners)e(this.loadingStatus)}}P.loadingStatus=S.NOT_LOADED;P.serializedApiParams=void 0;P.listeners=[];const ue=["onLoad","apiKey","version","libraries"],de=["children"],fe="GMP_visgl_rgmlibrary_v1_default",D=w.createContext(null);function ge(){const[t,e]=a.useState({});return{mapInstances:t,addMapInstance:(s,c="default")=>{e(i=>I({},i,{[c]:s}))},removeMapInstance:(s="default")=>{e(c=>A(c,[s].map(le)))},clearMapInstances:()=>{e({})}}}function me(t){const{onLoad:e,apiKey:n,version:r,libraries:o=[]}=t,s=A(t,ue),[c,i]=a.useState(P.loadingStatus),[m,f]=a.useReducer((l,g)=>I({},l,{[g.name]:g.value}),{}),u=a.useMemo(()=>o==null?void 0:o.join(","),[o]),v=a.useMemo(()=>JSON.stringify(I({apiKey:n,version:r},s)),[n,r,s]),d=a.useCallback(async l=>{var g;if(m[l])return m[l];if(!((g=google)!=null&&(g=g.maps)!=null&&g.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const p=await window.google.maps.importLibrary(l);return f({name:l,value:p}),p},[m]);return a.useEffect(()=>{(async()=>{try{const l=I({key:n},s);r&&(l.v=r),(u==null?void 0:u.length)>0&&(l.libraries=u),l.solutionChannel===void 0?l.solutionChannel=fe:l.solutionChannel===""&&delete l.solutionChannel,await P.load(l,g=>i(g));for(const g of["core","maps",...o])await d(g);e&&e()}catch(l){console.error("<ApiProvider> failed to load the Google Maps JavaScript API",l)}})()},[n,u,v]),{status:c,loadedLibraries:m,importLibrary:d}}const pe=t=>{const{children:e}=t,n=A(t,de),{mapInstances:r,addMapInstance:o,removeMapInstance:s,clearMapInstances:c}=ge(),{status:i,loadedLibraries:m,importLibrary:f}=me(n),u=a.useMemo(()=>({mapInstances:r,addMapInstance:o,removeMapInstance:s,clearMapInstances:c,status:i,loadedLibraries:m,importLibrary:f}),[r,o,s,c,i,m,f]);return w.createElement(D.Provider,{value:u},e)};function he(t,e){for(const n of ye){const r=e[n],o=J[n];a.useEffect(()=>{if(!t||!r)return;const s=google.maps.event.addListener(t,o,c=>{r(Ce(o,t,c))});return()=>s.remove()},[t,o,r])}}function Ce(t,e,n){const r={type:t,map:e,detail:{},stoppable:!1,stop:()=>{}};if(ve.includes(t)){const s=r,c=e.getCenter(),i=e.getZoom(),m=e.getHeading()||0,f=e.getTilt()||0,u=e.getBounds();return(!c||!u||!Number.isFinite(i))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),s.detail={center:(c==null?void 0:c.toJSON())||{lat:0,lng:0},zoom:i||0,heading:m,tilt:f,bounds:(u==null?void 0:u.toJSON())||{north:90,east:180,south:-90,west:-180}},s}else if(be.includes(t)){var o;if(!n)throw new Error("[createEvent] mouse events must provide a srcEvent");const s=r;return s.domEvent=n.domEvent,s.stoppable=!0,s.stop=()=>n.stop(),s.detail={latLng:((o=n.latLng)==null?void 0:o.toJSON())||null,placeId:n.placeId},s}return r}const J={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},ve=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],be=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],ye=Object.keys(J);function K(t,e){const n=a.useRef(void 0);(!n.current||!ae(e,n.current))&&(n.current=e),a.useEffect(t,n.current)}const xe=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","zoomControl","zoomControlOptions"]);function we(t,e){const n={},r=Object.keys(e);for(const o of r)xe.has(o)&&(n[o]=e[o]);K(()=>{t&&t.setOptions(n)},[n])}function q(){var t;return((t=a.useContext(D))==null?void 0:t.status)||S.NOT_LOADED}function Ee(t,e){const{viewport:n,viewState:r}=e,o=!!n;return a.useLayoutEffect(()=>{if(!t||!r)return;const{latitude:s,longitude:c,bearing:i,pitch:m,zoom:f}=r;t.moveCamera({center:{lat:s,lng:c},heading:i,tilt:m,zoom:f+1})},[t,r]),o}function Le(t){return!t||typeof t!="object"||!("lat"in t&&"lng"in t)?!1:Number.isFinite(t.lat)&&Number.isFinite(t.lng)}function Oe(t,e){if(!t||!e)return!1;const n=R(t),r=R(e);return!(n.lat!==r.lat||n.lng!==r.lng)}function R(t){return Le(t)?t:t.toJSON()}function ke(t,e,n){const r=n.center?R(n.center):null;let o=null,s=null;r&&Number.isFinite(r.lat)&&Number.isFinite(r.lng)&&(o=r.lat,s=r.lng);const c=Number.isFinite(n.zoom)?n.zoom:null,i=Number.isFinite(n.heading)?n.heading:null,m=Number.isFinite(n.tilt)?n.tilt:null;a.useLayoutEffect(()=>{if(!t)return;const f={};let u=!1;o!==null&&s!==null&&(e.current.center.lat!==o||e.current.center.lng!==s)&&(f.center={lat:o,lng:s},u=!0),c!==null&&e.current.zoom!==c&&(f.zoom=c,u=!0),i!==null&&e.current.heading!==i&&(f.heading=i,u=!0),m!==null&&e.current.tilt!==m&&(f.tilt=m,u=!0),u&&t.moveCamera(f)})}const Me=()=>{const t={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return w.createElement("div",{style:t},w.createElement("h2",null,"Error: AuthFailure"),w.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",w.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function Se(){const[t,e]=a.useState(null),n=a.useCallback(r=>e(r),[e]);return[t,n]}function V(){return q()===S.LOADED}function Ie(){const[,t]=a.useReducer(e=>e+1,0);return t}function Ae(t,e){const n=t.getCenter(),r=t.getZoom(),o=t.getHeading()||0,s=t.getTilt()||0,c=t.getBounds();(!n||!c||!Number.isFinite(r))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(e.current,{center:(n==null?void 0:n.toJSON())||{lat:0,lng:0},zoom:r||0,heading:o,tilt:s})}function _e(t){const e=Ie(),n=a.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return a.useEffect(()=>{if(!t)return;const r=google.maps.event.addListener(t,"bounds_changed",()=>{Ae(t,n),e()});return()=>r.remove()},[t,e]),n}const Ne=["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps"],Pe=["padding"];class j{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,n){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(n)}}j.entries={};function De(t,e){const n=V(),[r,o]=a.useState(null),[s,c]=Se(),i=_e(r),{id:m,defaultBounds:f,defaultCenter:u,defaultZoom:v,defaultHeading:d,defaultTilt:l,reuseMaps:g}=t,p=A(t,Ne),x=t.zoom!==void 0||t.defaultZoom!==void 0,y=t.center!==void 0||t.defaultCenter!==void 0;!f&&(!x||!y)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!p.center&&u&&(p.center=u),!p.zoom&&Number.isFinite(v)&&(p.zoom=v),!p.heading&&Number.isFinite(d)&&(p.heading=d),!p.tilt&&Number.isFinite(l)&&(p.tilt=l);for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const C=a.useRef();return a.useEffect(()=>{if(!s||!n)return;const{addMapInstance:b,removeMapInstance:L}=e,O=t.mapId,M=O||"default";let k,E;if(g&&j.has(M)?(E=j.pop(M),k=E.getDiv(),s.appendChild(k),E.setOptions(p),setTimeout(()=>E.setCenter(E.getCenter()),0)):(k=document.createElement("div"),k.style.height="100%",s.appendChild(k),E=new google.maps.Map(k,p)),o(E),b(E,m),f){const{padding:F}=f,T=A(f,Pe);E.fitBounds(T,F)}else(!x||!y)&&E.fitBounds({east:180,west:-180,south:-90,north:90});if(C.current){const{mapId:F,cameraState:T}=C.current;F!==O&&E.setOptions(T)}return()=>{C.current={mapId:O,cameraState:i.current},k.remove(),g?j.push(M,E):google.maps.event.clearInstanceListeners(E),o(null),L(m)}},[s,n,m,t.mapId]),[r,c,i]}const H=w.createContext(null),Y=t=>{const{children:e,id:n,className:r,style:o}=t,s=a.useContext(D),c=q();if(!s)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[i,m,f]=De(t,s);ke(i,f,t),he(i,t),we(i,t);const u=Ee(i,t),v=!!t.controlled;a.useEffect(()=>{if(i)return u&&i.setOptions({disableDefaultUI:!0}),(u||v)&&i.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{i.setOptions({gestureHandling:t.gestureHandling,keyboardShortcuts:t.keyboardShortcuts})}},[i,u,v,t.gestureHandling,t.keyboardShortcuts]);const d=t.center?R(t.center):null;let l=null,g=null;d&&Number.isFinite(d.lat)&&Number.isFinite(d.lng)&&(l=d.lat,g=d.lng);const p=a.useMemo(()=>{var C,b,L,O,M;return{center:{lat:(C=l)!=null?C:0,lng:(b=g)!=null?b:0},zoom:(L=t.zoom)!=null?L:0,heading:(O=t.heading)!=null?O:0,tilt:(M=t.tilt)!=null?M:0}},[l,g,t.zoom,t.heading,t.tilt]);a.useLayoutEffect(()=>{if(!i||!v)return;i.moveCamera(p);const C=i.addListener("bounds_changed",()=>{i.moveCamera(p)});return()=>C.remove()},[i,v,p]);const x=a.useMemo(()=>I({width:"100%",height:"100%",position:"relative",zIndex:u?-1:0},o),[o,u]),y=a.useMemo(()=>({map:i}),[i]);return c===S.AUTH_FAILURE?w.createElement("div",{style:I({position:"relative"},r?{}:x),className:r},w.createElement(Me,null)):w.createElement("div",I({ref:m,"data-testid":"map",style:r?void 0:x,className:r},n?{id:n}:{}),i?w.createElement(H.Provider,{value:y},e):null)};Y.deckGLViewProps=!0;const G=new Set;function je(...t){const e=JSON.stringify(t);G.has(e)||(G.add(e),console.error(...t))}const U=(t=null)=>{const e=a.useContext(D),{map:n}=a.useContext(H)||{};if(e===null)return je("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:r}=e;return t!==null?r[t]||null:n||r.default||null};function X(t){const e=V(),n=a.useContext(D);return a.useEffect(()=>{!e||!n||n.importLibrary(t)},[e,n,t]),(n==null?void 0:n.loadedLibraries[t])||null}function Q(t,e,n){if(e!=null&&typeof e!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const r=t.style;if(n==null){if(e==null)return;for(const o in e)e.hasOwnProperty(o)&&B(r,o,e[o]);return}for(const o in n)n.hasOwnProperty(o)&&(e==null||!e.hasOwnProperty(o))&&(o.indexOf("--")===0?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="");if(e!=null)for(const o in e){const s=e[o];e.hasOwnProperty(o)&&n[o]!==s&&B(r,o,s)}}function B(t,e,n){const r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n=="number"&&n!==0&&!Fe(e)?t[e]=n+"px":e==="float"?t.cssFloat=n:t[e]=(""+n).trim()}const Re=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function Fe(t){return Re.has(t)}function _(t,e,n){a.useEffect(()=>{if(!t||!e||!n)return;const r=google.maps.event.addListener(t,e,n);return()=>r.remove()},[t,e,n])}function N(t,e,n){a.useEffect(()=>{t&&(t[e]=n)},[t,e,n])}const Te=w.createContext(null);function ze(t){const[e,n]=a.useState(null),[r,o]=a.useState(null),s=a.useRef(null),c=U(),i=X("marker"),{children:m,className:f,style:u,onClick:v,onDrag:d,onDragStart:l,onDragEnd:g,collisionBehavior:p,clickable:x,draggable:y,position:C,title:b,zIndex:L}=t,O=a.Children.count(m);return a.useEffect(()=>{if(!c||!i)return;const M=new i.AdvancedMarkerElement;M.map=c,n(M);let k=null;return O>0&&(k=document.createElement("div"),M.content=k,o(k)),()=>{var E;M.map=null,(E=k)==null||E.remove(),n(null),o(null)}},[c,i,O]),a.useEffect(()=>{!e||!e.content||(e.content.className=f||"")},[e,f]),N(r,"className",f!=null?f:""),a.useEffect(()=>{r&&(Q(r,u||null,s.current),s.current=u||null)},[r,f,u]),N(e,"position",C),N(e,"title",b!=null?b:""),N(e,"zIndex",L),N(e,"collisionBehavior",p),a.useEffect(()=>{e&&(y!==void 0?e.gmpDraggable=y:d||l||g?e.gmpDraggable=!0:e.gmpDraggable=!1)},[e,y,d,g,l]),a.useEffect(()=>{e&&(x!==void 0?e.gmpClickable=x:v?e.gmpClickable=!0:e.gmpClickable=!1)},[e,x,v]),_(e,"click",v),_(e,"drag",d),_(e,"dragstart",l),_(e,"dragend",g),[e,r]}a.forwardRef((t,e)=>{const{children:n}=t,[r,o]=ze(t),s=a.useMemo(()=>r?{marker:r}:null,[r]);return a.useImperativeHandle(e,()=>r,[r]),o?w.createElement(Te.Provider,{value:s},z.createPortal(n,o)):null});function He(){const[t,e]=a.useState(null);return[a.useCallback(r=>{e(r)},[]),t]}const Ue=["children","headerContent","style","className","pixelOffset","anchor","shouldFocus","onClose","onCloseClick"],Ze=t=>{const{children:e,headerContent:n,style:r,className:o,pixelOffset:s,anchor:c,shouldFocus:i,onClose:m,onCloseClick:f}=t,u=A(t,Ue),v=X("maps"),[d,l]=a.useState(null),g=a.useRef(null),p=a.useRef(null);a.useEffect(()=>{if(!v)return;g.current=document.createElement("div"),p.current=document.createElement("div");const C=u;s&&(C.pixelOffset=new google.maps.Size(s[0],s[1])),n&&(C.headerContent=typeof n=="string"?n:p.current);const b=new google.maps.InfoWindow(u);return b.setContent(g.current),l(b),()=>{var L,O;b.setContent(null),(L=g.current)==null||L.remove(),(O=p.current)==null||O.remove(),g.current=null,p.current=null,l(null)}},[v]);const x=a.useRef(null);a.useEffect(()=>{!d||!g.current||(Q(g.current,r||null,x.current),x.current=r||null,o!==g.current.className&&(g.current.className=o||""))},[d,o,r]),K(()=>{if(!d)return;const C=u;s?C.pixelOffset=new google.maps.Size(s[0],s[1]):C.pixelOffset=null,n?C.headerContent=typeof n=="string"?n:p.current:C.headerContent=null,d.setOptions(u)},[u,s,n]),_(d,"close",m),_(d,"closeclick",f);const y=U();return a.useEffect(()=>{if(!y||!d||c===null)return;const C=!!c,b={map:y};return c&&(b.anchor=c),i!==void 0&&(b.shouldFocus=i),d.open(b),()=>{C&&d.set("anchor",null),d.close()}},[d,c,y,i]),w.createElement(w.Fragment,null,g.current&&z.createPortal(e,g.current),p.current!==null&&z.createPortal(n,p.current))},Ge=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];function Be(t){const[e,n]=a.useState(null),r=U(),{onClick:o,onDrag:s,onDragStart:c,onDragEnd:i,onMouseOver:m,onMouseOut:f}=t,u=A(t,Ge),{position:v,draggable:d}=u;return a.useEffect(()=>{if(!r){r===void 0&&console.error("<Marker> has to be inside a Map component.");return}const l=new google.maps.Marker(u);return l.setMap(r),n(l),()=>{l.setMap(null),n(null)}},[r]),a.useEffect(()=>{if(!e)return;const l=e,g=google.maps.event;return o&&g.addListener(l,"click",o),s&&g.addListener(l,"drag",s),c&&g.addListener(l,"dragstart",c),i&&g.addListener(l,"dragend",i),m&&g.addListener(l,"mouseover",m),f&&g.addListener(l,"mouseout",f),e.setDraggable(!!d),()=>{g.clearInstanceListeners(l)}},[e,d,o,s,c,i,m,f]),a.useEffect(()=>{e&&u&&e.setOptions(u)},[e,u]),a.useEffect(()=>{d||!v||!e||e.setPosition(v)},[d,v,e]),e}const We=a.forwardRef((t,e)=>{const n=Be(t);return a.useImperativeHandle(e,()=>n,[n]),w.createElement(w.Fragment,null)});function $e(t){var p;const{onClick:e,onDrag:n,onDragStart:r,onDragEnd:o,onMouseOver:s,onMouseOut:c,onRadiusChanged:i,onCenterChanged:m,radius:f,center:u,...v}=t,d=a.useRef({});Object.assign(d.current,{onClick:e,onDrag:n,onDragStart:r,onDragEnd:o,onMouseOver:s,onMouseOut:c,onRadiusChanged:i,onCenterChanged:m});const l=a.useRef(new google.maps.Circle).current;l.setOptions(v),a.useEffect(()=>{u&&(Oe(u,l.getCenter())||l.setCenter(u))},[u]),a.useEffect(()=>{f!=null&&f!==l.getRadius()&&l.setRadius(f)},[f]);const g=(p=a.useContext(H))==null?void 0:p.map;return a.useEffect(()=>{if(!g){g===void 0&&console.error("<Circle> has to be inside a Map component.");return}return l.setMap(g),()=>{l.setMap(null)}},[g]),a.useEffect(()=>{if(!l)return;const x=google.maps.event;return[["click","onClick"],["drag","onDrag"],["dragstart","onDragStart"],["dragend","onDragEnd"],["mouseover","onMouseOver"],["mouseout","onMouseOut"]].forEach(([y,C])=>{x.addListener(l,y,b=>{const L=d.current[C];L&&L(b)})}),x.addListener(l,"radius_changed",()=>{var C,b;const y=l.getRadius();(b=(C=d.current).onRadiusChanged)==null||b.call(C,y)}),x.addListener(l,"center_changed",()=>{var C,b;const y=l.getCenter();(b=(C=d.current).onCenterChanged)==null||b.call(C,y)}),()=>{x.clearInstanceListeners(l)}},[l]),l}const Je=a.forwardRef((t,e)=>{const n=$e(t);return a.useImperativeHandle(e,()=>n),null}),W=({lat:t,lng:e,popOver:n,title:r,subTitle:o,name:s})=>{const[c,i]=a.useState(!0),[m,f]=He();return h.jsxs(h.Fragment,{children:[h.jsx(We,{onClick:()=>i(!0),position:{lat:t!=null?t:28,lng:e!=null?e:-82},title:n!=null?n:"This is a marker",ref:m,icon:{url:s=="JSK"?"/assets/marker2.svg":"/assets/marker4.svg",scaledSize:{width:30,height:30}}}),c&&h.jsxs(Ze,{anchor:f,headerDisabled:!0,children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("h1",{className:"text-xs font-bold",children:s}),h.jsx("button",{onClick:()=>i(!1),className:"text-xl font-bold -mt-2",children:"×"})]}),h.jsxs("div",{className:"bg-green-200 border border-gray-300 rounded-lg shadow-md p-2 text-center text-black",children:[h.jsx("h1",{className:"text-sm font-bold",children:r!=null?r:"Title"}),h.jsx("p",{className:"font-semibold text-xs",children:o!=null?o:"Subtitle"})]})]})]})},$=[{id:1,name:"East Zone",latitude:"20.7122002",longitude:"77.0102968"},{id:2,name:"West Zone",latitude:"20.7088910",longitude:"76.9867701"},{id:3,name:"North Zone",latitude:"20.7214404",longitude:"77.0039020"},{id:4,name:"South Zone",latitude:"20.6937346",longitude:"77.0063663"}],Ke=20.7122002,qe=77.0102968,st=()=>{var m,f,u,v;const{coords:t,isGeolocationEnabled:e}=ee(),n=te(),{radiusInMeters:r,distanceToTargetEast:o,distanceToTargetWest:s,distanceToTargetSouth:c,distanceToTargetNorth:i}=oe();return h.jsx(re,{title:"Profile",children:h.jsxs("div",{className:"p-2",children:[h.jsx(Z.Card,{className:"w-full",children:h.jsx(Z.CardBody,{children:h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx("h1",{className:"text-sm font-bold text-gray-600",children:"Latitude:"}),h.jsx("h1",{className:"text-sm  text-gray-600",children:t==null?void 0:t.latitude}),h.jsx("h1",{className:"text-sm font-bold text-gray-600",children:"Longitude:"}),h.jsx("h1",{className:"text-sm text-gray-600",children:t==null?void 0:t.longitude}),h.jsx("h1",{className:"text-sm font-bold text-gray-600",children:"Is Enabled:"}),h.jsx("h1",{className:"text-sm font-bold \n                ".concat(e?"text-green-500":"text-red-500","\n                "),children:e?"Yes":"No"}),h.jsx("div",{className:"border-t border-gray-300 my-1 col-span-2"}),h.jsx("div",{className:"col-span-2 justify-center flex",children:h.jsx("h1",{className:"text-sm  font-bold\n                ".concat(o<=r||s<=r||c<=r||i<=r?"text-green-500":"text-red-500","\n                  "),children:o<=r||s<=r||c<=r||i<=r?"You are outside the zone":"You are inside the zone"})})]})})}),h.jsx("div",{className:"border-t border-gray-300 my-4"}),h.jsx(pe,{apiKey:"AIzaSyC0AArVHmqXGAxgWcljuOD_fvY5eDXfwS0",children:h.jsxs(Y,{className:"w-full h-screen",defaultCenter:{lat:Ke,lng:qe},defaultZoom:60,gestureHandling:"greedy",disableDefaultUI:!1,children:[h.jsx(W,{name:"Employee",lat:(m=t==null?void 0:t.latitude)!=null?m:20.7122002,lng:(f=t==null?void 0:t.longitude)!=null?f:77.0102968,popOver:"This is your current location",title:(u=n==null?void 0:n.user)==null?void 0:u.user_name,subTitle:(v=n==null?void 0:n.user)==null?void 0:v.role[0]}),$.map(d=>h.jsx(Je,{radius:50,center:{lat:parseFloat(d.latitude),lng:parseFloat(d.longitude)},strokeColor:"#0c4cb3",strokeOpacity:1,strokeWeight:3,fillColor:"#3b82f6",fillOpacity:.3},d.id)),$.map(d=>h.jsx(W,{name:"JSK",lat:parseFloat(d.latitude),lng:parseFloat(d.longitude),popOver:"This is ".concat(d.name," location"),title:d.name,subTitle:"Latitude: ".concat(d.latitude,", Longitude: ").concat(d.longitude)},d.id))]})})]})})};export{st as default};
