import{j as e,b as Y,a as z,p as I,S as Z,Q as _,f as k}from"./index-rvbWXsAs.js";import{e as P,u as J,R as K,h as X,r as ee}from"./react-HXRlOr-l.js";import{u as se}from"./formik.esm-BYe_KACy.js";import{c as re,a as h}from"./index.esm-yBrOrWJe.js";import{P as le}from"./index-ydPQ-Vjj.js";import{O as te}from"./OverLayLoader-VNf_HxNe.js";import{F as ae}from"./FormProvider-KXcKKeLM.js";import{T as o}from"./TextField-7yddcJ1G.js";import{S as $}from"./SelectField-JetkCZi6.js";import"./index-mWJwE1Yp.js";import"./module-P9sElsZx.js";function ne({data:s}){var n,x,r,j,c,g,b,N,y,l,d,i,m,t,p,f,u,T,w,D;return e.jsx(P.Card,{children:e.jsxs("div",{className:"px-4 py-6",children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Basic Details"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Holding No:"}),e.jsx("h1",{className:"text-sm",children:(x=(n=s==null?void 0:s.data)==null?void 0:n.basicDetails)==null?void 0:x.holding_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property No:"}),e.jsx("h1",{className:"text-sm",children:(j=(r=s==null?void 0:s.data)==null?void 0:r.basicDetails)==null?void 0:j.property_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Owner Name:"}),e.jsx("h1",{className:"text-sm",children:(g=(c=s==null?void 0:s.data)==null?void 0:c.basicDetails)==null?void 0:g.owner_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Owner Name (In Marathi):"}),e.jsx("h1",{className:"text-sm",children:((N=(b=s==null?void 0:s.data)==null?void 0:b.basicDetails)==null?void 0:N.owner_name_marathi)||"N/A"})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Applicant Name:"}),e.jsx("h1",{className:"text-sm",children:(l=(y=s==null?void 0:s.data)==null?void 0:y.basicDetails)==null?void 0:l.applicant_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Address:"}),e.jsx("h1",{className:"text-sm",children:(i=(d=s==null?void 0:s.data)==null?void 0:d.basicDetails)==null?void 0:i.prop_address})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Zone:"}),e.jsx("h1",{className:"text-sm",children:(t=(m=s==null?void 0:s.data)==null?void 0:m.basicDetails)==null?void 0:t.zone_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Ward No:"}),e.jsx("h1",{className:"text-sm",children:(f=(p=s==null?void 0:s.data)==null?void 0:p.basicDetails)==null?void 0:f.ward_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Ownership Type:"}),e.jsx("h1",{className:"text-sm",children:(T=(u=s==null?void 0:s.data)==null?void 0:u.basicDetails)==null?void 0:T.ownership_type})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property Type:"}),e.jsx("h1",{className:"text-sm",children:(D=(w=s==null?void 0:s.data)==null?void 0:w.basicDetails)==null?void 0:D.property_type})]})]}),e.jsx("div",{className:"my-3 border-b-2"})]})})}function de({data:s}){var n,x;return e.jsx(P.Card,{className:"mt-4 w-full",children:e.jsxs(P.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Demand List"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Financial Year :"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:(x=(n=s==null?void 0:s.data)==null?void 0:n.demandList)==null?void 0:x.map((r,j)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.fyear}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.light_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.total_tax})]},j))})]})})]})})}function oe({data:s}){var n,x,r,j,c,g,b,N,y,l,d,i,m,t,p,f,u,T,w,D,A,C,q,E,v,a,B,R,S,U,M,O,H,L,Q,W,V,G;return e.jsx(P.Card,{className:"mt-4 w-full",children:e.jsxs(P.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Grand Total Tax"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Interest"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(x=(n=s==null?void 0:s.data)==null?void 0:n.grandTaxes)==null?void 0:x.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(j=(r=s==null?void 0:s.data)==null?void 0:r.grandTaxes)==null?void 0:j.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(g=(c=s==null?void 0:s.data)==null?void 0:c.grandTaxes)==null?void 0:g.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(N=(b=s==null?void 0:s.data)==null?void 0:b.grandTaxes)==null?void 0:N.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(l=(y=s==null?void 0:s.data)==null?void 0:y.grandTaxes)==null?void 0:l.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(i=(d=s==null?void 0:s.data)==null?void 0:d.grandTaxes)==null?void 0:i.cleanliness_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(t=(m=s==null?void 0:s.data)==null?void 0:m.grandTaxes)==null?void 0:t.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(f=(p=s==null?void 0:s.data)==null?void 0:p.grandTaxes)==null?void 0:f.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(T=(u=s==null?void 0:s.data)==null?void 0:u.grandTaxes)==null?void 0:T.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(D=(w=s==null?void 0:s.data)==null?void 0:w.grandTaxes)==null?void 0:D.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(C=(A=s==null?void 0:s.data)==null?void 0:A.grandTaxes)==null?void 0:C.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(E=(q=s==null?void 0:s.data)==null?void 0:q.grandTaxes)==null?void 0:E.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(a=(v=s==null?void 0:s.data)==null?void 0:v.grandTaxes)==null?void 0:a.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(R=(B=s==null?void 0:s.data)==null?void 0:B.grandTaxes)==null?void 0:R.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(U=(S=s==null?void 0:s.data)==null?void 0:S.grandTaxes)==null?void 0:U.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(O=(M=s==null?void 0:s.data)==null?void 0:M.grandTaxes)==null?void 0:O.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(L=(H=s==null?void 0:s.data)==null?void 0:H.grandTaxes)==null?void 0:L.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(W=(Q=s==null?void 0:s.data)==null?void 0:Q.grandTaxes)==null?void 0:W.monthlyPenalty}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(G=(V=s==null?void 0:s.data)==null?void 0:V.grandTaxes)==null?void 0:G.total_tax})]})})]})})]})})}const F=[{id:1,label:"Cash",value:"CASH"},{id:2,label:"Cheque",value:"CHEQUE"},{id:3,label:"DD",value:"DD"},{id:4,label:"Online",value:"ONLINE"},{id:5,label:"NEFT",value:"NEFT"}],ce=[{id:1,label:"Full Payment",value:"isFullPayment"},{id:2,label:"Arrear Amount",value:"isArrearPayment"},{id:3,label:"Part Payment",value:"isPartPayment"}];function xe({data:s,formik:n,calculateActualAmount:x}){var r,j,c,g,b,N,y,l,d,i,m;return e.jsx(P.Card,{className:"mt-4 w-full",children:e.jsxs(P.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Payment Action"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold ",children:"* Total Arrear Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold text-red-500",children:["₹ ",(r=s==null?void 0:s.data)==null?void 0:r.arrear]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Current Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold text-cyan-500",children:["₹ ",(j=s==null?void 0:s.data)==null?void 0:j.currentDemand]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Interest Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold ",children:[e.jsxs("span",{className:"text-red-500",children:["₹ ",(c=s==null?void 0:s.data)==null?void 0:c.totalInterestPenalty]})," ",e.jsxs("small",{children:["( Interest on Arrear ₹ ",(g=s==null?void 0:s.data)==null?void 0:g.arrearInterest," + Previous Interest ₹ ",(b=s==null?void 0:s.data)==null?void 0:b.previousInterest,")"]})]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Payable Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(N=s==null?void 0:s.data)==null?void 0:N.payableAmt]})," ",e.jsx("small",{children:"(Arrear + Current + Interest)"})]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Advance Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(y=s==null?void 0:s.data)==null?void 0:y.remainAdvance]})," ",e.jsx("small",{className:"text-green-500",children:"(This Is An Adjustable Amount From Total Payment Value.)"})]})})]}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs(ae,{formik:n,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"mb-4",children:e.jsxs($,{label:"Payment Mode",name:"paymentMode",formik:n,children:[e.jsx("option",{value:"",children:"select"}),F==null?void 0:F.map(t=>e.jsx("option",{value:t==null?void 0:t.value,children:t==null?void 0:t.label},t==null?void 0:t.id))]})}),e.jsx("div",{children:e.jsxs($,{label:"Payment Option",name:"paymentType",formik:n,type:"select",children:[e.jsx("option",{value:"",children:"select"}),ce.map(t=>{var p;return((p=s==null?void 0:s.data)==null?void 0:p.arrear)>0?e.jsx("option",{value:t==null?void 0:t.value,children:t==null?void 0:t.label},t==null?void 0:t.id):t.value!="isArrearPayment"&&e.jsx("option",{value:t==null?void 0:t.value,children:t==null?void 0:t.label},t==null?void 0:t.id)})]})})]}),((l=n.values)==null?void 0:l.paymentMode)==="CHEQUE"?e.jsx(ie,{formik:n}):((d=n.values)==null?void 0:d.paymentMode)==="DD"?e.jsx(me,{formik:n}):((i=n.values)==null?void 0:i.paymentMode)==="NEFT"?e.jsx(he,{formik:n}):null,((m=n.values)==null?void 0:m.paymentType)==="isPartPayment"&&e.jsx("div",{className:"",children:e.jsx(o,{label:"Part Payment Amount",name:"paidAmount",type:"number",formik:n})}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsxs(P.Button,{type:"submit",color:"indigo",disabled:!n.isValid,children:["Submit ₹",x()||0]})})]})]})})}const ie=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(o,{label:"Cheque No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Cheque Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Upload Cheque Image",name:"neftImage",type:"file",onChange:n=>{s.setFieldValue("neftImage",n.target.files[0])}})})]}),me=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(o,{label:"DD No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"DD Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Upload DD Image",name:"neftImage",type:"file",onChange:n=>{s.setFieldValue("neftImage",n.target.files[0])}})})]}),he=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(o,{label:"NEFT No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"NEFT Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Upload NEFT Image",name:"neftImage",type:"file",onChange:n=>{s.setFieldValue("neftImage",n.target.files[0])}})})]}),be=re().shape({paymentMode:h().required("Payment Mode is required"),paymentType:h().required("Payment Type is required"),paidAmount:h().when(["paymentType"],{is:s=>s=="isPartPayment",then:()=>h().required("Part Payment Amount is required")}),chequeNo:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Cheque No is required")}),chequeDate:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Cheque Date is required")}),neftImage:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Cheque Upload is required")}),bankName:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Bank Name is required")}),branchName:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Branch Name is required")}),paymentRemark:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Payment Remark is required")})});function _e(){var N,y;const s=J();K.useState(0);const n=Y({}),{id:x}=X(),{data:r,isLoading:j}=z({api:I.getDemandDetails,config:{propId:x},value:x,options:{enabled:!!x}}),c=se({enableReinitialize:!0,initialValues:{paymentMode:"",paymentType:"",chequeNo:"",chequeDate:"",bankName:"",branchName:"",paymentRemark:"",neftImage:"",paidAmount:""},validationSchema:be,onSubmit:async l=>{Z.fire({title:"Are you sure?",text:"You want to proceed with payment of Rs."+b(),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(d=>{d.isConfirmed&&g(l)}).catch(d=>{var i,m;_.error((m=(i=d==null?void 0:d.response)==null?void 0:i.data)==null?void 0:m.message)})}}),g=async l=>{var i,m,t,p,f,u,T,w,D,A,C,q,E,v;let d={};if((l==null?void 0:l.paymentMode)==="ONLINE"){d={propId:x,paymentMode:l==null?void 0:l.paymentMode,paymentType:l==null?void 0:l.paymentType,paidAmount:b(),deviceType:"android",callbackUrl:"https://modernulb.com/amc-app/property/payment-history"};const a=await n.mutateAsync({api:I.iciciPayment,data:d});(i=a==null?void 0:a.data)!=null&&i.status?(_.success((m=a==null?void 0:a.data)==null?void 0:m.message),window.location.href=(p=(t=a==null?void 0:a.data)==null?void 0:t.data)==null?void 0:p.encryptUrl,c.resetForm()):_.error((f=a==null?void 0:a.data)==null?void 0:f.message)}else{(l==null?void 0:l.paymentMode)==="CHEQUE"||(l==null?void 0:l.paymentMode)==="DD"||(l==null?void 0:l.paymentMode)==="NEFT"?d={id:x,paymentMode:l==null?void 0:l.paymentMode,paymentType:l==null?void 0:l.paymentType,chequeNo:l==null?void 0:l.chequeNo,chequeDate:l==null?void 0:l.chequeDate,bankName:l==null?void 0:l.bankName,branchName:l==null?void 0:l.branchName,paymentRemark:l==null?void 0:l.paymentRemark,neftImage:l==null?void 0:l.neftImage,paidAmount:b(),deviceType:"android"}:d={id:x,paymentMode:l==null?void 0:l.paymentMode,paymentType:l==null?void 0:l.paymentType,paidAmount:b(),deviceType:"android"};try{const a=await n.mutateAsync({api:I.holdingPayment,data:d});(u=a==null?void 0:a.data)!=null&&u.status?(_.success((T=a==null?void 0:a.data)==null?void 0:T.message),s("/amc-app/property/payment-response?response=".concat((D=(w=a==null?void 0:a.data)==null?void 0:w.data)==null?void 0:D.transactionId,"&tranNo=").concat((C=(A=a==null?void 0:a.data)==null?void 0:A.data)==null?void 0:C.TransactionNo),{replace:!0}),c.resetForm()):_.error((q=a==null?void 0:a.data)==null?void 0:q.message)}catch(a){_.error((v=(E=a==null?void 0:a.response)==null?void 0:E.data)==null?void 0:v.message)}}},b=()=>{var d,i,m,t,p,f,u,T;let l=0;return((d=c.values)==null?void 0:d.paymentType)=="isFullPayment"&&(l=parseInt((i=r==null?void 0:r.data)==null?void 0:i.payableAmt)-parseInt((m=r==null?void 0:r.data)==null?void 0:m.remainAdvance)),((t=c.values)==null?void 0:t.paymentType)=="isArrearPayment"&&(l=parseInt((p=r==null?void 0:r.data)==null?void 0:p.arrearPayableAmt)-parseInt((f=r==null?void 0:r.data)==null?void 0:f.remainAdvance)),((u=c.values)==null?void 0:u.paymentType)=="isPartPayment"&&(l=parseInt((T=c.values)==null?void 0:T.paidAmount)),l};return ee.useEffect(()=>{var l;((l=c.values)==null?void 0:l.paymentType)=="paidAmount"&&b()},[(N=c.values)==null?void 0:N.paidAmount]),j?e.jsx(k,{}):e.jsxs(le,{title:"Demand Details",children:[n.isLoading&&e.jsx(te,{}),e.jsx("div",{className:"flex flex-col h-full py-3 px-4",children:e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsx(ne,{data:r}),e.jsx(de,{data:r}),e.jsx(oe,{data:r}),((y=r==null?void 0:r.data)==null?void 0:y.payableAmt)>0?e.jsx(xe,{formik:c,data:r,calculateActualAmount:b}):e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{onClick:()=>s("/amc-app/property/search-holding"),className:"text-red-500 border border-red-500 px-4 py-2 rounded-md hover:bg-red-500 hover:text-white transition duration-300 ease-in-out",children:"Payment Already Done"})})]})})]})}export{_e as default};
