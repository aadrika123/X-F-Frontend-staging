import{j as v,e as ee,b as te}from"./index-9aYkk1LG.js";import{g as ne,d as w,r as a,b as H}from"./router-vn-0iGwJ.js";import{r as Z}from"./tailwind-umh7vczy.js";import{P as re}from"./index-0QjlrZeX.js";import{u as oe}from"./useLocationRadius-w8kuIvZ6.js";import"./reactQuery-VYMV1vFj.js";import"./axios-lPgvryBG.js";import"./reactIcons-lANGEfNm.js";import"./headlessui-pLs_kC1m.js";var se=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var u=s[o];if(!t(e[u],n[u]))return!1}return!0}return e!==e&&n!==n};const ae=ne(se);function ie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function le(t){var e=ie(t,"string");return typeof e=="symbol"?e:String(e)}function I(){return I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I.apply(this,arguments)}function A(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}const S={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},ue="https://maps.googleapis.com/maps/api/js";class D{static async load(e,n){var r;const o=e.libraries?e.libraries.split(","):[],s=this.serializeParams(e);this.listeners.push(n),(r=window.google)!=null&&(r=r.maps)!=null&&r.importLibrary?(this.serializedApiParams||(this.loadingStatus=S.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=s,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==s&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const u=["maps",...o];await Promise.all(u.map(i=>google.maps.importLibrary(i)))}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let n=null;const r=()=>n||(n=new Promise((o,s)=>{var u;const i=document.createElement("script"),m=new URLSearchParams;for(const[f,c]of Object.entries(e)){const d=f.replace(/[A-Z]/g,p=>"_"+p[0].toLowerCase());m.set(d,c)}m.set("loading","async"),m.set("callback","__googleMapsCallback__"),i.async=!0,i.src=ue+"?"+m.toString(),i.nonce=((u=document.querySelector("script[nonce]"))==null?void 0:u.nonce)||"",i.onerror=()=>{this.loadingStatus=S.FAILED,this.notifyLoadingStatusListeners(),s(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=S.LOADED,this.notifyLoadingStatusListeners(),o()},window.gm_authFailure=()=>{this.loadingStatus=S.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=S.LOADING,this.notifyLoadingStatusListeners(),document.head.append(i)}),n);google.maps.importLibrary=o=>r().then(()=>google.maps.importLibrary(o))}static notifyLoadingStatusListeners(){for(const e of this.listeners)e(this.loadingStatus)}}D.loadingStatus=S.NOT_LOADED;D.serializedApiParams=void 0;D.listeners=[];const ce=["onLoad","apiKey","version","libraries"],de=["children"],fe="GMP_visgl_rgmlibrary_v1_default",N=w.createContext(null);function ge(){const[t,e]=a.useState({});return{mapInstances:t,addMapInstance:(s,u="default")=>{e(i=>I({},i,{[u]:s}))},removeMapInstance:(s="default")=>{e(u=>A(u,[s].map(le)))},clearMapInstances:()=>{e({})}}}function me(t){const{onLoad:e,apiKey:n,version:r,libraries:o=[]}=t,s=A(t,ce),[u,i]=a.useState(D.loadingStatus),[m,f]=a.useReducer((l,g)=>I({},l,{[g.name]:g.value}),{}),c=a.useMemo(()=>o==null?void 0:o.join(","),[o]),d=a.useMemo(()=>JSON.stringify(I({apiKey:n,version:r},s)),[n,r,s]),p=a.useCallback(async l=>{var g;if(m[l])return m[l];if(!((g=google)!=null&&(g=g.maps)!=null&&g.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const h=await window.google.maps.importLibrary(l);return f({name:l,value:h}),h},[m]);return a.useEffect(()=>{(async()=>{try{const l=I({key:n},s);r&&(l.v=r),(c==null?void 0:c.length)>0&&(l.libraries=c),l.solutionChannel===void 0?l.solutionChannel=fe:l.solutionChannel===""&&delete l.solutionChannel,await D.load(l,g=>i(g));for(const g of["core","maps",...o])await p(g);e&&e()}catch(l){console.error("<ApiProvider> failed to load the Google Maps JavaScript API",l)}})()},[n,c,d]),{status:u,loadedLibraries:m,importLibrary:p}}const pe=t=>{const{children:e}=t,n=A(t,de),{mapInstances:r,addMapInstance:o,removeMapInstance:s,clearMapInstances:u}=ge(),{status:i,loadedLibraries:m,importLibrary:f}=me(n),c=a.useMemo(()=>({mapInstances:r,addMapInstance:o,removeMapInstance:s,clearMapInstances:u,status:i,loadedLibraries:m,importLibrary:f}),[r,o,s,u,i,m,f]);return w.createElement(N.Provider,{value:c},e)};function he(t,e){for(const n of ye){const r=e[n],o=J[n];a.useEffect(()=>{if(!t||!r)return;const s=google.maps.event.addListener(t,o,u=>{r(Ce(o,t,u))});return()=>s.remove()},[t,o,r])}}function Ce(t,e,n){const r={type:t,map:e,detail:{},stoppable:!1,stop:()=>{}};if(ve.includes(t)){const s=r,u=e.getCenter(),i=e.getZoom(),m=e.getHeading()||0,f=e.getTilt()||0,c=e.getBounds();return(!u||!c||!Number.isFinite(i))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),s.detail={center:(u==null?void 0:u.toJSON())||{lat:0,lng:0},zoom:i||0,heading:m,tilt:f,bounds:(c==null?void 0:c.toJSON())||{north:90,east:180,south:-90,west:-180}},s}else if(be.includes(t)){var o;if(!n)throw new Error("[createEvent] mouse events must provide a srcEvent");const s=r;return s.domEvent=n.domEvent,s.stoppable=!0,s.stop=()=>n.stop(),s.detail={latLng:((o=n.latLng)==null?void 0:o.toJSON())||null,placeId:n.placeId},s}return r}const J={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},ve=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],be=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],ye=Object.keys(J);function K(t,e){const n=a.useRef(void 0);(!n.current||!ae(e,n.current))&&(n.current=e),a.useEffect(t,n.current)}const xe=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","zoomControl","zoomControlOptions"]);function we(t,e){const n={},r=Object.keys(e);for(const o of r)xe.has(o)&&(n[o]=e[o]);K(()=>{t&&t.setOptions(n)},[n])}function V(){var t;return((t=a.useContext(N))==null?void 0:t.status)||S.NOT_LOADED}function Ee(t,e){const{viewport:n,viewState:r}=e,o=!!n;return a.useLayoutEffect(()=>{if(!t||!r)return;const{latitude:s,longitude:u,bearing:i,pitch:m,zoom:f}=r;t.moveCamera({center:{lat:s,lng:u},heading:i,tilt:m,zoom:f+1})},[t,r]),o}function Le(t){return!t||typeof t!="object"||!("lat"in t&&"lng"in t)?!1:Number.isFinite(t.lat)&&Number.isFinite(t.lng)}function Oe(t,e){if(!t||!e)return!1;const n=R(t),r=R(e);return!(n.lat!==r.lat||n.lng!==r.lng)}function R(t){return Le(t)?t:t.toJSON()}function ke(t,e,n){const r=n.center?R(n.center):null;let o=null,s=null;r&&Number.isFinite(r.lat)&&Number.isFinite(r.lng)&&(o=r.lat,s=r.lng);const u=Number.isFinite(n.zoom)?n.zoom:null,i=Number.isFinite(n.heading)?n.heading:null,m=Number.isFinite(n.tilt)?n.tilt:null;a.useLayoutEffect(()=>{if(!t)return;const f={};let c=!1;o!==null&&s!==null&&(e.current.center.lat!==o||e.current.center.lng!==s)&&(f.center={lat:o,lng:s},c=!0),u!==null&&e.current.zoom!==u&&(f.zoom=u,c=!0),i!==null&&e.current.heading!==i&&(f.heading=i,c=!0),m!==null&&e.current.tilt!==m&&(f.tilt=m,c=!0),c&&t.moveCamera(f)})}const Me=()=>{const t={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return w.createElement("div",{style:t},w.createElement("h2",null,"Error: AuthFailure"),w.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",w.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function Se(){const[t,e]=a.useState(null),n=a.useCallback(r=>e(r),[e]);return[t,n]}function q(){return V()===S.LOADED}function Ie(){const[,t]=a.useReducer(e=>e+1,0);return t}function Ae(t,e){const n=t.getCenter(),r=t.getZoom(),o=t.getHeading()||0,s=t.getTilt()||0,u=t.getBounds();(!n||!u||!Number.isFinite(r))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(e.current,{center:(n==null?void 0:n.toJSON())||{lat:0,lng:0},zoom:r||0,heading:o,tilt:s})}function _e(t){const e=Ie(),n=a.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return a.useEffect(()=>{if(!t)return;const r=google.maps.event.addListener(t,"bounds_changed",()=>{Ae(t,n),e()});return()=>r.remove()},[t,e]),n}const Pe=["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps"],De=["padding"];class j{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,n){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(n)}}j.entries={};function Ne(t,e){const n=q(),[r,o]=a.useState(null),[s,u]=Se(),i=_e(r),{id:m,defaultBounds:f,defaultCenter:c,defaultZoom:d,defaultHeading:p,defaultTilt:l,reuseMaps:g}=t,h=A(t,Pe),x=t.zoom!==void 0||t.defaultZoom!==void 0,y=t.center!==void 0||t.defaultCenter!==void 0;!f&&(!x||!y)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!h.center&&c&&(h.center=c),!h.zoom&&Number.isFinite(d)&&(h.zoom=d),!h.heading&&Number.isFinite(p)&&(h.heading=p),!h.tilt&&Number.isFinite(l)&&(h.tilt=l);for(const b of Object.keys(h))h[b]===void 0&&delete h[b];const C=a.useRef();return a.useEffect(()=>{if(!s||!n)return;const{addMapInstance:b,removeMapInstance:L}=e,O=t.mapId,M=O||"default";let k,E;if(g&&j.has(M)?(E=j.pop(M),k=E.getDiv(),s.appendChild(k),E.setOptions(h),setTimeout(()=>E.setCenter(E.getCenter()),0)):(k=document.createElement("div"),k.style.height="100%",s.appendChild(k),E=new google.maps.Map(k,h)),o(E),b(E,m),f){const{padding:F}=f,T=A(f,De);E.fitBounds(T,F)}else(!x||!y)&&E.fitBounds({east:180,west:-180,south:-90,north:90});if(C.current){const{mapId:F,cameraState:T}=C.current;F!==O&&E.setOptions(T)}return()=>{C.current={mapId:O,cameraState:i.current},k.remove(),g?j.push(M,E):google.maps.event.clearInstanceListeners(E),o(null),L(m)}},[s,n,m,t.mapId]),[r,u,i]}const U=w.createContext(null),Y=t=>{const{children:e,id:n,className:r,style:o}=t,s=a.useContext(N),u=V();if(!s)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[i,m,f]=Ne(t,s);ke(i,f,t),he(i,t),we(i,t);const c=Ee(i,t),d=!!t.controlled;a.useEffect(()=>{if(i)return c&&i.setOptions({disableDefaultUI:!0}),(c||d)&&i.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{i.setOptions({gestureHandling:t.gestureHandling,keyboardShortcuts:t.keyboardShortcuts})}},[i,c,d,t.gestureHandling,t.keyboardShortcuts]);const p=t.center?R(t.center):null;let l=null,g=null;p&&Number.isFinite(p.lat)&&Number.isFinite(p.lng)&&(l=p.lat,g=p.lng);const h=a.useMemo(()=>{var C,b,L,O,M;return{center:{lat:(C=l)!=null?C:0,lng:(b=g)!=null?b:0},zoom:(L=t.zoom)!=null?L:0,heading:(O=t.heading)!=null?O:0,tilt:(M=t.tilt)!=null?M:0}},[l,g,t.zoom,t.heading,t.tilt]);a.useLayoutEffect(()=>{if(!i||!d)return;i.moveCamera(h);const C=i.addListener("bounds_changed",()=>{i.moveCamera(h)});return()=>C.remove()},[i,d,h]);const x=a.useMemo(()=>I({width:"100%",height:"100%",position:"relative",zIndex:c?-1:0},o),[o,c]),y=a.useMemo(()=>({map:i}),[i]);return u===S.AUTH_FAILURE?w.createElement("div",{style:I({position:"relative"},r?{}:x),className:r},w.createElement(Me,null)):w.createElement("div",I({ref:m,"data-testid":"map",style:r?void 0:x,className:r},n?{id:n}:{}),i?w.createElement(U.Provider,{value:y},e):null)};Y.deckGLViewProps=!0;const B=new Set;function je(...t){const e=JSON.stringify(t);B.has(e)||(B.add(e),console.error(...t))}const G=(t=null)=>{const e=a.useContext(N),{map:n}=a.useContext(U)||{};if(e===null)return je("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:r}=e;return t!==null?r[t]||null:n||r.default||null};function X(t){const e=q(),n=a.useContext(N);return a.useEffect(()=>{!e||!n||n.importLibrary(t)},[e,n,t]),(n==null?void 0:n.loadedLibraries[t])||null}function Q(t,e,n){if(e!=null&&typeof e!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const r=t.style;if(n==null){if(e==null)return;for(const o in e)e.hasOwnProperty(o)&&$(r,o,e[o]);return}for(const o in n)n.hasOwnProperty(o)&&(e==null||!e.hasOwnProperty(o))&&(o.indexOf("--")===0?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="");if(e!=null)for(const o in e){const s=e[o];e.hasOwnProperty(o)&&n[o]!==s&&$(r,o,s)}}function $(t,e,n){const r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n=="number"&&n!==0&&!Fe(e)?t[e]=n+"px":e==="float"?t.cssFloat=n:t[e]=(""+n).trim()}const Re=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function Fe(t){return Re.has(t)}function _(t,e,n){a.useEffect(()=>{if(!t||!e||!n)return;const r=google.maps.event.addListener(t,e,n);return()=>r.remove()},[t,e,n])}function P(t,e,n){a.useEffect(()=>{t&&(t[e]=n)},[t,e,n])}const Te=w.createContext(null);function He(t){const[e,n]=a.useState(null),[r,o]=a.useState(null),s=a.useRef(null),u=G(),i=X("marker"),{children:m,className:f,style:c,onClick:d,onDrag:p,onDragStart:l,onDragEnd:g,collisionBehavior:h,clickable:x,draggable:y,position:C,title:b,zIndex:L}=t,O=a.Children.count(m);return a.useEffect(()=>{if(!u||!i)return;const M=new i.AdvancedMarkerElement;M.map=u,n(M);let k=null;return O>0&&(k=document.createElement("div"),M.content=k,o(k)),()=>{var E;M.map=null,(E=k)==null||E.remove(),n(null),o(null)}},[u,i,O]),a.useEffect(()=>{!e||!e.content||(e.content.className=f||"")},[e,f]),P(r,"className",f!=null?f:""),a.useEffect(()=>{r&&(Q(r,c||null,s.current),s.current=c||null)},[r,f,c]),P(e,"position",C),P(e,"title",b!=null?b:""),P(e,"zIndex",L),P(e,"collisionBehavior",h),a.useEffect(()=>{e&&(y!==void 0?e.gmpDraggable=y:p||l||g?e.gmpDraggable=!0:e.gmpDraggable=!1)},[e,y,p,g,l]),a.useEffect(()=>{e&&(x!==void 0?e.gmpClickable=x:d?e.gmpClickable=!0:e.gmpClickable=!1)},[e,x,d]),_(e,"click",d),_(e,"drag",p),_(e,"dragstart",l),_(e,"dragend",g),[e,r]}a.forwardRef((t,e)=>{const{children:n}=t,[r,o]=He(t),s=a.useMemo(()=>r?{marker:r}:null,[r]);return a.useImperativeHandle(e,()=>r,[r]),o?w.createElement(Te.Provider,{value:s},H.createPortal(n,o)):null});function Ue(){const[t,e]=a.useState(null);return[a.useCallback(r=>{e(r)},[]),t]}const Ge=["children","headerContent","style","className","pixelOffset","anchor","shouldFocus","onClose","onCloseClick"],Ze=t=>{const{children:e,headerContent:n,style:r,className:o,pixelOffset:s,anchor:u,shouldFocus:i,onClose:m,onCloseClick:f}=t,c=A(t,Ge),d=X("maps"),[p,l]=a.useState(null),g=a.useRef(null),h=a.useRef(null);a.useEffect(()=>{if(!d)return;g.current=document.createElement("div"),h.current=document.createElement("div");const C=c;s&&(C.pixelOffset=new google.maps.Size(s[0],s[1])),n&&(C.headerContent=typeof n=="string"?n:h.current);const b=new google.maps.InfoWindow(c);return b.setContent(g.current),l(b),()=>{var L,O;b.setContent(null),(L=g.current)==null||L.remove(),(O=h.current)==null||O.remove(),g.current=null,h.current=null,l(null)}},[d]);const x=a.useRef(null);a.useEffect(()=>{!p||!g.current||(Q(g.current,r||null,x.current),x.current=r||null,o!==g.current.className&&(g.current.className=o||""))},[p,o,r]),K(()=>{if(!p)return;const C=c;s?C.pixelOffset=new google.maps.Size(s[0],s[1]):C.pixelOffset=null,n?C.headerContent=typeof n=="string"?n:h.current:C.headerContent=null,p.setOptions(c)},[c,s,n]),_(p,"close",m),_(p,"closeclick",f);const y=G();return a.useEffect(()=>{if(!y||!p||u===null)return;const C=!!u,b={map:y};return u&&(b.anchor=u),i!==void 0&&(b.shouldFocus=i),p.open(b),()=>{C&&p.set("anchor",null),p.close()}},[p,u,y,i]),w.createElement(w.Fragment,null,g.current&&H.createPortal(e,g.current),h.current!==null&&H.createPortal(n,h.current))},Be=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];function $e(t){const[e,n]=a.useState(null),r=G(),{onClick:o,onDrag:s,onDragStart:u,onDragEnd:i,onMouseOver:m,onMouseOut:f}=t,c=A(t,Be),{position:d,draggable:p}=c;return a.useEffect(()=>{if(!r){r===void 0&&console.error("<Marker> has to be inside a Map component.");return}const l=new google.maps.Marker(c);return l.setMap(r),n(l),()=>{l.setMap(null),n(null)}},[r]),a.useEffect(()=>{if(!e)return;const l=e,g=google.maps.event;return o&&g.addListener(l,"click",o),s&&g.addListener(l,"drag",s),u&&g.addListener(l,"dragstart",u),i&&g.addListener(l,"dragend",i),m&&g.addListener(l,"mouseover",m),f&&g.addListener(l,"mouseout",f),e.setDraggable(!!p),()=>{g.clearInstanceListeners(l)}},[e,p,o,s,u,i,m,f]),a.useEffect(()=>{e&&c&&e.setOptions(c)},[e,c]),a.useEffect(()=>{p||!d||!e||e.setPosition(d)},[p,d,e]),e}const We=a.forwardRef((t,e)=>{const n=$e(t);return a.useImperativeHandle(e,()=>n,[n]),w.createElement(w.Fragment,null)});function ze(t){var h;const{onClick:e,onDrag:n,onDragStart:r,onDragEnd:o,onMouseOver:s,onMouseOut:u,onRadiusChanged:i,onCenterChanged:m,radius:f,center:c,...d}=t,p=a.useRef({});Object.assign(p.current,{onClick:e,onDrag:n,onDragStart:r,onDragEnd:o,onMouseOver:s,onMouseOut:u,onRadiusChanged:i,onCenterChanged:m});const l=a.useRef(new google.maps.Circle).current;l.setOptions(d),a.useEffect(()=>{c&&(Oe(c,l.getCenter())||l.setCenter(c))},[c]),a.useEffect(()=>{f!=null&&f!==l.getRadius()&&l.setRadius(f)},[f]);const g=(h=a.useContext(U))==null?void 0:h.map;return a.useEffect(()=>{if(!g){g===void 0&&console.error("<Circle> has to be inside a Map component.");return}return l.setMap(g),()=>{l.setMap(null)}},[g]),a.useEffect(()=>{if(!l)return;const x=google.maps.event;return[["click","onClick"],["drag","onDrag"],["dragstart","onDragStart"],["dragend","onDragEnd"],["mouseover","onMouseOver"],["mouseout","onMouseOut"]].forEach(([y,C])=>{x.addListener(l,y,b=>{const L=p.current[C];L&&L(b)})}),x.addListener(l,"radius_changed",()=>{var C,b;const y=l.getRadius();(b=(C=p.current).onRadiusChanged)==null||b.call(C,y)}),x.addListener(l,"center_changed",()=>{var C,b;const y=l.getCenter();(b=(C=p.current).onCenterChanged)==null||b.call(C,y)}),()=>{x.clearInstanceListeners(l)}},[l]),l}const Je=a.forwardRef((t,e)=>{const n=ze(t);return a.useImperativeHandle(e,()=>n),null}),W=({lat:t,lng:e,popOver:n,title:r,subTitle:o,name:s})=>{const[u,i]=a.useState(!0),[m,f]=Ue();return v.jsxs(v.Fragment,{children:[v.jsx(We,{onClick:()=>i(!0),position:{lat:t!=null?t:28,lng:e!=null?e:-82},title:n!=null?n:"This is a marker",ref:m,icon:{url:s=="JSK"?"/assets/marker2.svg":"/assets/marker4.svg",scaledSize:{width:30,height:30}}}),u&&v.jsxs(Ze,{anchor:f,headerDisabled:!0,children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("h1",{className:"text-xs font-bold",children:s}),v.jsx("button",{onClick:()=>i(!1),className:"text-xl font-bold -mt-2",children:"×"})]}),v.jsxs("div",{className:"bg-green-200 border border-gray-300 rounded-lg shadow-md p-2 text-center text-black",children:[v.jsx("h1",{className:"text-sm font-bold",children:r!=null?r:"Title"}),v.jsx("p",{className:"font-semibold text-xs",children:o!=null?o:"Subtitle"})]})]})]})},z=[{id:1,name:"East Zone",latitude:"20.7122002",longitude:"77.0102968"},{id:2,name:"West Zone",latitude:"20.7088910",longitude:"76.9867701"},{id:3,name:"North Zone",latitude:"20.7214404",longitude:"77.0039020"},{id:4,name:"South Zone",latitude:"20.6937346",longitude:"77.0063663"}],Ke=20.7122002,Ve=77.0102968,st=()=>{var m,f,c;const{coords:t,isGeolocationEnabled:e}=ee(),n=te(),{radiusInMeters:r,distanceToTargetEast:o,distanceToTargetWest:s,distanceToTargetSouth:u,distanceToTargetNorth:i}=oe();return v.jsx(re,{title:"Profile",children:v.jsxs("div",{className:"p-2",children:[v.jsx(Z.Card,{className:"w-full",children:v.jsx(Z.CardBody,{children:v.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[v.jsxs("div",{className:"col-span-2 justify-between flex",children:[v.jsx("h1",{className:"text-sm font-bold text-gray-600",children:"Geo Enabled:"}),v.jsx("h1",{className:"text-sm font-bold \n                ".concat(e?"text-green-500":"text-red-500","\n                "),children:e?"Yes":"No"})]}),v.jsx("div",{className:"border-t border-gray-300 my-1 col-span-2"}),v.jsx("div",{className:"col-span-2 justify-center flex",children:v.jsx("h1",{className:"text-sm  font-bold\n                ".concat(o>=r||s>=r||u>=r||i>=r?"text-green-500":"text-red-500","\n                  "),children:o>=r||s>=r||u>=r||i>=r?"You are outside the zonal office":"You are inside the zonal office"})})]})})}),v.jsx("div",{className:"border-t border-gray-300 my-4"}),v.jsx(pe,{apiKey:"AIzaSyC0AArVHmqXGAxgWcljuOD_fvY5eDXfwS0",children:v.jsxs(Y,{className:"w-full h-screen",defaultCenter:{lat:Ke,lng:Ve},defaultZoom:10,gestureHandling:"greedy",disableDefaultUI:!1,children:[v.jsx(W,{name:"Tax Collector",lat:(m=t==null?void 0:t.latitude)!=null?m:20.7122002,lng:(f=t==null?void 0:t.longitude)!=null?f:77.0102968,popOver:"This is your current location",title:(c=n==null?void 0:n.user)==null?void 0:c.user_name,subTitle:"Latitude: ".concat(t==null?void 0:t.latitude,", Longitude: ").concat(t==null?void 0:t.longitude)}),z.map(d=>v.jsx(Je,{radius:50,center:{lat:parseFloat(d==null?void 0:d.latitude),lng:parseFloat(d==null?void 0:d.longitude)},strokeColor:"#0c4cb3",strokeOpacity:1,strokeWeight:3,fillColor:"#3b82f6",fillOpacity:.3},d.id)),z.map(d=>v.jsx(W,{name:"JSK",lat:parseFloat(d==null?void 0:d.latitude),lng:parseFloat(d==null?void 0:d.longitude),popOver:"This is ".concat(d==null?void 0:d.name," location"),title:d.name,subTitle:"Latitude: ".concat(d==null?void 0:d.latitude,", Longitude: ").concat(d==null?void 0:d.longitude)},d.id))]})})]})})};export{st as default};
