import{j as e,b as z,u as Y,f as Z,l as k,a as J,p as M,S as K,Q as v,g as X}from"./index-mOlw0zbc.js";import{e as I,u as ee,R as se,h as re,f as te,r as ae}from"./react-HXRlOr-l.js";import{u as le}from"./formik.esm-BYe_KACy.js";import{c as ne,a as h}from"./index.esm-yBrOrWJe.js";import{P as de}from"./index-aRTBrINf.js";import{O as oe}from"./OverLayLoader-ovbMlEba.js";import{F as ce}from"./FormProvider-Kx856f-p.js";import{T as x}from"./TextField-j3ixU5eF.js";import{S as $}from"./SelectField-8Pm7eWGE.js";import"./index-mWJwE1Yp.js";import{u as ie}from"./usePathWisePermission-yjgUN4aB.js";import"./module-IREgsSDU.js";function xe({data:s,permissionResult:n}){var o,r,b,y,d,f,i,N,m,u,g,T,a,t,c,p,j,w,D,P,A,_;return e.jsx(I.Card,{children:e.jsxs("div",{className:"px-4 py-6",children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Basic Details"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Holding No:"}),e.jsx("h1",{className:"text-sm",children:(r=(o=s==null?void 0:s.data)==null?void 0:o.basicDetails)==null?void 0:r.holding_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property No:"}),e.jsx("h1",{className:"text-sm",children:(y=(b=s==null?void 0:s.data)==null?void 0:b.basicDetails)==null?void 0:y.property_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Owner Name:"}),e.jsx("h1",{className:"text-sm",children:(f=(d=s==null?void 0:s.data)==null?void 0:d.basicDetails)==null?void 0:f.owner_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Owner Name (In Marathi):"}),e.jsx("h1",{className:"text-sm",children:((N=(i=s==null?void 0:s.data)==null?void 0:i.basicDetails)==null?void 0:N.owner_name_marathi)||"N/A"})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Applicant Name:"}),e.jsx("h1",{className:"text-sm",children:(u=(m=s==null?void 0:s.data)==null?void 0:m.basicDetails)==null?void 0:u.applicant_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Address:"}),e.jsx("h1",{className:"text-sm",children:(T=(g=s==null?void 0:s.data)==null?void 0:g.basicDetails)==null?void 0:T.prop_address})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Zone:"}),e.jsx("h1",{className:"text-sm",children:(t=(a=s==null?void 0:s.data)==null?void 0:a.basicDetails)==null?void 0:t.zone_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Ward No:"}),e.jsx("h1",{className:"text-sm",children:(p=(c=s==null?void 0:s.data)==null?void 0:c.basicDetails)==null?void 0:p.ward_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Ownership Type:"}),e.jsx("h1",{className:"text-sm",children:(w=(j=s==null?void 0:s.data)==null?void 0:j.basicDetails)==null?void 0:w.ownership_type})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property Type:"}),e.jsx("h1",{className:"text-sm",children:(P=(D=s==null?void 0:s.data)==null?void 0:D.basicDetails)==null?void 0:P.property_type})]})]}),e.jsx("div",{className:"my-3 border-b-2"}),(n==null?void 0:n.read)&&e.jsx("div",{className:"grid grid-cols-1 gap-2 items-center justify-center text-center",children:e.jsx("a",{href:"/property/holdingPropertyDetails/".concat((_=(A=s==null?void 0:s.data)==null?void 0:A.basicDetails)==null?void 0:_.id),children:e.jsx(I.Button,{variant:"outlined",size:"sm",color:"blue",fullWidth:!0,className:"p-1.5 text-[12px] capitalize",children:"Holding Details"})})})]})})}function me({data:s}){var n,o;return e.jsx(I.Card,{className:"mt-4 w-full",children:e.jsxs(I.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Demand List"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Financial Year :"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:(o=(n=s==null?void 0:s.data)==null?void 0:n.demandList)==null?void 0:o.map((r,b)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.fyear}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.light_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r==null?void 0:r.total_tax})]},b))})]})})]})})}function he({data:s}){var n,o,r,b,y,d,f,i,N,m,u,g,T,a,t,c,p,j,w,D,P,A,_,C,q,E,F,B,L,S,R,U,l,H,W,Q,V,G;return e.jsx(I.Card,{className:"mt-4 w-full",children:e.jsxs(I.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Grand Total Tax"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Interest"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(o=(n=s==null?void 0:s.data)==null?void 0:n.grandTaxes)==null?void 0:o.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(b=(r=s==null?void 0:s.data)==null?void 0:r.grandTaxes)==null?void 0:b.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(d=(y=s==null?void 0:s.data)==null?void 0:y.grandTaxes)==null?void 0:d.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(i=(f=s==null?void 0:s.data)==null?void 0:f.grandTaxes)==null?void 0:i.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(m=(N=s==null?void 0:s.data)==null?void 0:N.grandTaxes)==null?void 0:m.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(g=(u=s==null?void 0:s.data)==null?void 0:u.grandTaxes)==null?void 0:g.cleanliness_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(a=(T=s==null?void 0:s.data)==null?void 0:T.grandTaxes)==null?void 0:a.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(c=(t=s==null?void 0:s.data)==null?void 0:t.grandTaxes)==null?void 0:c.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(j=(p=s==null?void 0:s.data)==null?void 0:p.grandTaxes)==null?void 0:j.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(D=(w=s==null?void 0:s.data)==null?void 0:w.grandTaxes)==null?void 0:D.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(A=(P=s==null?void 0:s.data)==null?void 0:P.grandTaxes)==null?void 0:A.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(C=(_=s==null?void 0:s.data)==null?void 0:_.grandTaxes)==null?void 0:C.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(E=(q=s==null?void 0:s.data)==null?void 0:q.grandTaxes)==null?void 0:E.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(B=(F=s==null?void 0:s.data)==null?void 0:F.grandTaxes)==null?void 0:B.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(S=(L=s==null?void 0:s.data)==null?void 0:L.grandTaxes)==null?void 0:S.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(U=(R=s==null?void 0:s.data)==null?void 0:R.grandTaxes)==null?void 0:U.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(H=(l=s==null?void 0:s.data)==null?void 0:l.grandTaxes)==null?void 0:H.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(Q=(W=s==null?void 0:s.data)==null?void 0:W.grandTaxes)==null?void 0:Q.monthlyPenalty}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(G=(V=s==null?void 0:s.data)==null?void 0:V.grandTaxes)==null?void 0:G.total_tax})]})})]})})]})})}const O=[{id:1,label:"Cash",value:"CASH"},{id:2,label:"Cheque",value:"CHEQUE"},{id:3,label:"DD",value:"DD"},{id:4,label:"Online",value:"ONLINE"},{id:5,label:"NEFT",value:"NEFT"}],be=[{id:1,label:"Full Payment",value:"isFullPayment"},{id:2,label:"Arrear Amount",value:"isArrearPayment"},{id:3,label:"Part Payment",value:"isPartPayment"}];function pe({data:s,formik:n,calculateActualAmount:o}){var r,b,y,d,f,i,N,m,u,g,T;return e.jsx(I.Card,{className:"mt-4 w-full",children:e.jsxs(I.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Payment Action"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold ",children:"* Total Arrear Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold text-red-500",children:["₹ ",(r=s==null?void 0:s.data)==null?void 0:r.arrear]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Current Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold text-cyan-500",children:["₹ ",(b=s==null?void 0:s.data)==null?void 0:b.currentDemand]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Interest Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold ",children:[e.jsxs("span",{className:"text-red-500",children:["₹ ",(y=s==null?void 0:s.data)==null?void 0:y.totalInterestPenalty]})," ",e.jsxs("small",{children:["( Interest on Arrear ₹ ",(d=s==null?void 0:s.data)==null?void 0:d.arrearInterest," + Previous Interest ₹ ",(f=s==null?void 0:s.data)==null?void 0:f.previousInterest,")"]})]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Payable Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(i=s==null?void 0:s.data)==null?void 0:i.payableAmt]})," ",e.jsx("small",{children:"(Arrear + Current + Interest)"})]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Advance Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(N=s==null?void 0:s.data)==null?void 0:N.remainAdvance]})," ",e.jsx("small",{className:"text-green-500",children:"(This Is An Adjustable Amount From Total Payment Value.)"})]})})]}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs(ce,{formik:n,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"mb-4",children:e.jsxs($,{label:"Payment Mode",name:"paymentMode",formik:n,children:[e.jsx("option",{value:"",children:"select"}),O==null?void 0:O.map(a=>e.jsx("option",{value:a==null?void 0:a.value,children:a==null?void 0:a.label},a==null?void 0:a.id))]})}),e.jsx("div",{children:e.jsxs($,{label:"Payment Option",name:"paymentType",formik:n,type:"select",children:[e.jsx("option",{value:"",children:"select"}),be.map(a=>{var t;return((t=s==null?void 0:s.data)==null?void 0:t.arrear)>0?e.jsx("option",{value:a==null?void 0:a.value,children:a==null?void 0:a.label},a==null?void 0:a.id):a.value!="isArrearPayment"&&e.jsx("option",{value:a==null?void 0:a.value,children:a==null?void 0:a.label},a==null?void 0:a.id)})]})})]}),((m=n.values)==null?void 0:m.paymentMode)==="CHEQUE"?e.jsx(je,{formik:n}):((u=n.values)==null?void 0:u.paymentMode)==="DD"?e.jsx(Ne,{formik:n}):((g=n.values)==null?void 0:g.paymentMode)==="NEFT"?e.jsx(ye,{formik:n}):null,((T=n.values)==null?void 0:T.paymentType)==="isPartPayment"&&e.jsx("div",{className:"",children:e.jsx(x,{label:"Part Payment Amount",name:"paidAmount",type:"number",formik:n})}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsxs(I.Button,{type:"submit",color:"indigo",disabled:!n.isValid,children:["Submit ₹",o()||0]})})]})]})})}const je=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(x,{label:"Cheque No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Cheque Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Upload Cheque Image",name:"neftImage",type:"file",onChange:n=>{s.setFieldValue("neftImage",n.target.files[0])}})})]}),Ne=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(x,{label:"DD No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"DD Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Upload DD Image",name:"neftImage",type:"file",onChange:n=>{s.setFieldValue("neftImage",n.target.files[0])}})})]}),ye=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(x,{label:"NEFT No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"NEFT Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(x,{label:"Upload NEFT Image",name:"neftImage",type:"file",onChange:n=>{s.setFieldValue("neftImage",n.target.files[0])}})})]});function fe(){const s=z({}),n=Y(),{coords:o,timestamp:r}=Z();return{saveLocation:async({refId:y,actionType:d,moduleId:f})=>{var N,m;return await s.mutateAsync({api:(N=k)==null?void 0:N.saveLocation,data:{tcId:(m=n==null?void 0:n.user)==null?void 0:m.id,latitude:o==null?void 0:o.latitude,longitude:o==null?void 0:o.longitude,altitude:o==null?void 0:o.altitude,actionType:d,refId:y,moduleId:f}})}}}const ue=ne().shape({paymentMode:h().required("Payment Mode is required"),paymentType:h().required("Payment Type is required"),paidAmount:h().when(["paymentType"],{is:s=>s=="isPartPayment",then:()=>h().required("Part Payment Amount is required")}),chequeNo:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Cheque No is required")}),chequeDate:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Cheque Date is required")}),neftImage:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Cheque Upload is required")}),bankName:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Bank Name is required")}),branchName:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Branch Name is required")}),paymentRemark:h().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>h().required("Payment Remark is required")})});function Fe(){var u,g,T,a;const s=ee(),{saveLocation:n}=fe();se.useState(0);const o=z({}),{id:r}=re(),{pathname:b}=te(),{result:y}=ie((g=(u=b==null?void 0:b.split("/"))==null?void 0:u.slice(0,-1))==null?void 0:g.join("/")),{data:d,isLoading:f}=J({api:M.getDemandDetails,config:{propId:r},value:r,options:{enabled:!!r}}),i=le({enableReinitialize:!0,initialValues:{paymentMode:"",paymentType:"",chequeNo:"",chequeDate:"",bankName:"",branchName:"",paymentRemark:"",neftImage:"",paidAmount:""},validationSchema:ue,onSubmit:async t=>{K.fire({title:"Are you sure?",text:"You want to proceed with payment of Rs."+m(),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(c=>{c.isConfirmed&&N(t)}).catch(c=>{var p,j;v.error((j=(p=c==null?void 0:c.response)==null?void 0:p.data)==null?void 0:j.message)})}}),N=async t=>{var p,j,w,D,P,A,_,C,q,E,F,B,L,S,R,U;let c={};if((t==null?void 0:t.paymentMode)==="ONLINE"){c={propId:r,paymentMode:t==null?void 0:t.paymentMode,paymentType:t==null?void 0:t.paymentType,paidAmount:m(),deviceType:"android",callbackUrl:"https://modernulb.com/amc-app/property/payment-history"};const l=await o.mutateAsync({api:M.iciciPayment,data:c});(p=l==null?void 0:l.data)!=null&&p.status?(n({actionType:"PropertyPaymentOnline",refId:(w=(j=l==null?void 0:l.data)==null?void 0:j.data)==null?void 0:w.requestId,moduleId:1}),v.success((D=l==null?void 0:l.data)==null?void 0:D.message),i.resetForm()):v.error((P=l==null?void 0:l.data)==null?void 0:P.message)}else{(t==null?void 0:t.paymentMode)==="CHEQUE"||(t==null?void 0:t.paymentMode)==="DD"||(t==null?void 0:t.paymentMode)==="NEFT"?c={id:r,paymentMode:t==null?void 0:t.paymentMode,paymentType:t==null?void 0:t.paymentType,chequeNo:t==null?void 0:t.chequeNo,chequeDate:t==null?void 0:t.chequeDate,bankName:t==null?void 0:t.bankName,branchName:t==null?void 0:t.branchName,paymentRemark:t==null?void 0:t.paymentRemark,neftImage:t==null?void 0:t.neftImage,paidAmount:m(),deviceType:"android"}:c={id:r,paymentMode:t==null?void 0:t.paymentMode,paymentType:t==null?void 0:t.paymentType,paidAmount:m(),deviceType:"android"};try{const l=await o.mutateAsync({api:M.holdingPayment,data:c});(A=l==null?void 0:l.data)!=null&&A.status?(n({actionType:"successPropertyPayment",refId:(C=(_=l==null?void 0:l.data)==null?void 0:_.data)==null?void 0:C.transactionId,moduleId:1}),v.success((q=l==null?void 0:l.data)==null?void 0:q.message),s("/amc-app/property/payment-response?response=".concat((F=(E=l==null?void 0:l.data)==null?void 0:E.data)==null?void 0:F.transactionId,"&tranNo=").concat((L=(B=l==null?void 0:l.data)==null?void 0:B.data)==null?void 0:L.TransactionNo),{replace:!0}),i.resetForm()):(v.error((S=l==null?void 0:l.data)==null?void 0:S.message),n({actionType:"failedPropertyPayment",refId:r,moduleId:1}))}catch(l){v.error((U=(R=l==null?void 0:l.response)==null?void 0:R.data)==null?void 0:U.message)}}},m=()=>{var c,p,j,w,D,P,A,_;let t=0;return((c=i.values)==null?void 0:c.paymentType)=="isFullPayment"&&(t=parseInt((p=d==null?void 0:d.data)==null?void 0:p.payableAmt)-parseInt((j=d==null?void 0:d.data)==null?void 0:j.remainAdvance)),((w=i.values)==null?void 0:w.paymentType)=="isArrearPayment"&&(t=parseInt((D=d==null?void 0:d.data)==null?void 0:D.arrearPayableAmt)-parseInt((P=d==null?void 0:d.data)==null?void 0:P.remainAdvance)),((A=i.values)==null?void 0:A.paymentType)=="isPartPayment"&&(t=parseInt((_=i.values)==null?void 0:_.paidAmount)),t};return ae.useEffect(()=>{var t;((t=i.values)==null?void 0:t.paymentType)=="paidAmount"&&m()},[(T=i.values)==null?void 0:T.paidAmount]),f?e.jsx(X,{}):e.jsxs(de,{title:"Demand Details",children:[o.isLoading&&e.jsx(oe,{}),e.jsx("div",{className:"flex flex-col h-full py-3 px-4",children:e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsx(xe,{data:d,permissionResult:y}),e.jsx(me,{data:d}),e.jsx(he,{data:d}),((a=d==null?void 0:d.data)==null?void 0:a.payableAmt)>0?e.jsx(pe,{formik:i,data:d,calculateActualAmount:m}):e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{onClick:()=>s("/amc-app/property/search-holding"),className:"text-red-500 border border-red-500 px-4 py-2 rounded-md hover:bg-red-500 hover:text-white transition duration-300 ease-in-out",children:"Payment Already Done"})})]})})]})}export{Fe as default};
