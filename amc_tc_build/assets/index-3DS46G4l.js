import{b as L,c as i,m as t,j as e}from"./index-YXbhhyGq.js";import{u as $}from"./router-5yjtezO8.js";import{r as o}from"./tailwind-6U-kYQAu.js";import{F as T}from"./FormProvider-CX0sjiOX.js";import{u as W}from"./formik.esm-BnzrXcQN.js";import{L as E}from"./LoaderButton-VUvupD4c.js";import{S as h}from"./SelectField-hx_DELGt.js";import"./index-iFVn5AxS.js";import{I as O,a as Z}from"./index.esm-VQYkeCD-.js";import{c as G,a as x}from"./index.esm-uHa2PMRf.js";import{P as H}from"./index-Vewm7L_t.js";import{S as J}from"./index-EgJgzazj.js";import"./reactQuery-QTVGT_ni.js";import"./axios-lPgvryBG.js";import"./reactIcons-ElHvrKTF.js";import"./headlessui-iZReL1Rn.js";import"./ArrowRightIcon-g-6SOtWO.js";function he(){var p,j,m,b,f,N,g,y,v,S,u,I,w,C,k,F,P,_,q,A,M,R,z;const B=$(),r=L(),n=i({api:t.shopMaster,config:{},options:{enabled:!0}}),l=W({enableReinitialize:!0,initialValues:r==null?void 0:r.searchShopList,validationSchema:G({shopCategoryId:x().required("Search String is required"),circleId:x().required("Search String is required"),marketId:x().required("Search String is required")}),onSubmit:async(s,{resetForm:K})=>{console.log("values",r==null?void 0:r.searchShopList),r==null||r.setSearchShopList({...s,page:1})}}),{values:d}=l,c=i({api:t.listWiseCircleMarket,key:"marketList",config:{circleId:d==null?void 0:d.circleId},value:[d==null?void 0:d.circleId],options:{enabled:!!(d!=null&&d.circleId)}}),a=i({api:(p=t)==null?void 0:p.searchShopForPayment,config:r==null?void 0:r.searchShopList,value:[(j=r==null?void 0:r.searchShopList)==null?void 0:j.shopCategoryId,(m=r==null?void 0:r.searchShopList)==null?void 0:m.circleId,(b=r==null?void 0:r.searchShopList)==null?void 0:b.marketId,(f=r==null?void 0:r.searchShopList)==null?void 0:f.page,(N=r==null?void 0:r.searchShopList)==null?void 0:N.perPage,(g=r==null?void 0:r.searchShopList)==null?void 0:g.key],options:{enabled:!!((y=r==null?void 0:r.searchShopList)!=null&&y.marketId)}});return e.jsx(H,{title:"Search Shop",children:e.jsx("div",{className:"px-4 py-4 flex-1",children:e.jsxs(T,{formik:l,children:[e.jsx(o.Card,{className:"w-full",children:e.jsxs(o.CardBody,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Search Shop list"}),e.jsxs("div",{className:"items-center flex justify-start px-2 py-1 border rounded-lg gap-1 cursor-pointer",onClick:()=>{l==null||l.resetForm(),r==null||r.setSearchShopList({page:1,perPage:10,key:"",shopCategoryId:"",circleId:"",marketId:""})},children:[e.jsx(O,{size:"1.2rem",className:"cursor-pointer text-blue-600"}),e.jsx("small",{className:" text-blue-600 ",children:"Reset"})]})]}),e.jsx("div",{className:"my-4 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsxs(h,{label:"Shop category",name:"shopCategoryId",formik:l,children:[e.jsx("option",{value:"",children:"select"}),(u=(S=(v=n==null?void 0:n.data)==null?void 0:v.data)==null?void 0:S.shopType)==null?void 0:u.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.shop_type},s==null?void 0:s.id))]})}),e.jsx("div",{children:e.jsxs(h,{label:"Zone",name:"circleId",formik:l,children:[e.jsx("option",{value:"",children:"select"}),(C=(w=(I=n==null?void 0:n.data)==null?void 0:I.data)==null?void 0:w.circleList)==null?void 0:C.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.circle_name},s==null?void 0:s.id))]})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs(h,{label:"Market",formik:l,name:"marketId",disabled:c==null?void 0:c.isLoading,children:[e.jsx("option",{value:"",children:"select"}),(F=(k=c==null?void 0:c.data)==null?void 0:k.data)==null?void 0:F.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.market_name},s==null?void 0:s.id))]}),e.jsx("small",{className:"text-blue-500",children:(c==null?void 0:c.isLoading)&&"Please wait..."})]})]}),e.jsx("div",{className:"flex justify-center mt-1",children:e.jsx(E,{className:"w-full",type:"submit",disabled:a==null?void 0:a.isLoading,children:"Search"})})]})}),a!=null&&a.isFetching?e.jsx("div",{className:"text-center py-52 text-blue-600",children:"Please Wait..."}):e.jsx(e.Fragment,{children:((_=(P=a==null?void 0:a.data)==null?void 0:P.data.data)==null?void 0:_.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-b-2"}),(M=(A=(q=a==null?void 0:a.data)==null?void 0:q.data)==null?void 0:A.data)==null?void 0:M.map(s=>e.jsx(o.Card,{className:"w-full mb-5",children:e.jsxs(o.CardBody,{children:[e.jsx("div",{className:"flex items-center justify-between -mt-1",children:e.jsx("div",{className:"flex items-center",children:e.jsx("p",{className:"text-xs text-end font-bold",children:s==null?void 0:s.allottee})})}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Shop No:"}),e.jsx("p",{className:"text-xs text-end",children:s==null?void 0:s.id})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Shop Type:"}),e.jsx("p",{className:"text-xs text-end",children:s==null?void 0:s.shop_type})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Market:"}),e.jsx("p",{className:"text-xs text-end",children:(s==null?void 0:s.market_name)||"--"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Circle:"}),e.jsx("p",{className:"text-xs text-end truncate w-60",children:s==null?void 0:s.circle_name})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Contact:"}),e.jsx("div",{className:"w-44",children:e.jsx("p",{className:"text-xs text-end truncate",children:(s==null?void 0:s.contact_no)||"--"})})]}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsx("div",{className:"flex items-center justify-center mt-6",children:e.jsx(o.Button,{onClick:()=>B("/amc-app/adv-municipal-rental/shop-details/".concat(s==null?void 0:s.id)),color:"blue",size:"sm",className:"rounded-md ",children:e.jsxs("small",{className:"flex justify-center items-center space-x-1",children:["View Details ","  ",e.jsx(Z,{size:"1rem"})]})})})]})},s==null?void 0:s.id)),e.jsx("div",{className:"my-4 border-b-2"}),e.jsx(J,{active:r==null?void 0:r.searchShopList,noOfPage:(z=(R=a==null?void 0:a.data)==null?void 0:R.data)==null?void 0:z.total,setActive:r==null?void 0:r.setSearchShopList})]}):e.jsx("div",{className:"text-center py-52",children:"No Record Found!"})}),e.jsx("div",{className:"my-4 border-b-2"})]})})})}export{he as default};
