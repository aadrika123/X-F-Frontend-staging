import{j as e,b as G,a as Y,p as S,S as Z,Q as q,f as k}from"./index-VFm7eRVe.js";import{e as A,u as J,R as K,h as X,f as ee,r as se}from"./react-HXRlOr-l.js";import{u as re}from"./formik.esm-BYe_KACy.js";import{c as te,a as i}from"./index.esm-yBrOrWJe.js";import{P as le}from"./index-BsV-c-3P.js";import{O as ae}from"./OverLayLoader-M52khWUU.js";import{F as ne}from"./FormProvider-FsWFpotE.js";import{T as o}from"./TextField-8LbkGqyY.js";import{S as z}from"./SelectField-nlnQ-kY2.js";import"./index-mWJwE1Yp.js";import{u as de}from"./usePathWisePermission-7wusEHTj.js";import"./module-_DmGhb5r.js";function oe({data:s,permissionResult:a}){var x,t,p,n,P,c,_,m,j,N,f,y,r,d,h,b,u,g,T,w,D,C;return e.jsx(A.Card,{children:e.jsxs("div",{className:"px-4 py-6",children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Basic Details"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Holding No:"}),e.jsx("h1",{className:"text-sm",children:(t=(x=s==null?void 0:s.data)==null?void 0:x.basicDetails)==null?void 0:t.holding_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property No:"}),e.jsx("h1",{className:"text-sm",children:(n=(p=s==null?void 0:s.data)==null?void 0:p.basicDetails)==null?void 0:n.property_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Owner Name:"}),e.jsx("h1",{className:"text-sm",children:(c=(P=s==null?void 0:s.data)==null?void 0:P.basicDetails)==null?void 0:c.owner_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Owner Name (In Marathi):"}),e.jsx("h1",{className:"text-sm",children:((m=(_=s==null?void 0:s.data)==null?void 0:_.basicDetails)==null?void 0:m.owner_name_marathi)||"N/A"})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Applicant Name:"}),e.jsx("h1",{className:"text-sm",children:(N=(j=s==null?void 0:s.data)==null?void 0:j.basicDetails)==null?void 0:N.applicant_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Address:"}),e.jsx("h1",{className:"text-sm",children:(y=(f=s==null?void 0:s.data)==null?void 0:f.basicDetails)==null?void 0:y.prop_address})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Zone:"}),e.jsx("h1",{className:"text-sm",children:(d=(r=s==null?void 0:s.data)==null?void 0:r.basicDetails)==null?void 0:d.zone_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Ward No:"}),e.jsx("h1",{className:"text-sm",children:(b=(h=s==null?void 0:s.data)==null?void 0:h.basicDetails)==null?void 0:b.ward_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Ownership Type:"}),e.jsx("h1",{className:"text-sm",children:(g=(u=s==null?void 0:s.data)==null?void 0:u.basicDetails)==null?void 0:g.ownership_type})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property Type:"}),e.jsx("h1",{className:"text-sm",children:(w=(T=s==null?void 0:s.data)==null?void 0:T.basicDetails)==null?void 0:w.property_type})]})]}),e.jsx("div",{className:"my-3 border-b-2"}),(a==null?void 0:a.read)&&e.jsx("div",{className:"grid grid-cols-1 gap-2 items-center justify-center text-center",children:e.jsx("div",{children:e.jsx(A.Button,{variant:"outlined",size:"sm",color:"blue",fullWidth:!0,className:"p-1.5 text-[12px] capitalize",children:e.jsx("a",{href:"/property/holdingPropertyDetails/".concat((C=(D=s==null?void 0:s.data)==null?void 0:D.basicDetails)==null?void 0:C.id),children:"Holding Details"})})})})]})})}function ce({data:s}){var a,x;return e.jsx(A.Card,{className:"mt-4 w-full",children:e.jsxs(A.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Demand List"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Financial Year :"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:(x=(a=s==null?void 0:s.data)==null?void 0:a.demandList)==null?void 0:x.map((t,p)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.fyear}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.light_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.total_tax})]},p))})]})})]})})}function xe({data:s}){var a,x,t,p,n,P,c,_,m,j,N,f,y,r,d,h,b,u,g,T,w,D,C,E,v,I,F,B,R,l,M,H,O,L,W,Q,V,$;return e.jsx(A.Card,{className:"mt-4 w-full",children:e.jsxs(A.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Grand Total Tax"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Interest"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(x=(a=s==null?void 0:s.data)==null?void 0:a.grandTaxes)==null?void 0:x.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(p=(t=s==null?void 0:s.data)==null?void 0:t.grandTaxes)==null?void 0:p.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(P=(n=s==null?void 0:s.data)==null?void 0:n.grandTaxes)==null?void 0:P.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(_=(c=s==null?void 0:s.data)==null?void 0:c.grandTaxes)==null?void 0:_.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(j=(m=s==null?void 0:s.data)==null?void 0:m.grandTaxes)==null?void 0:j.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(f=(N=s==null?void 0:s.data)==null?void 0:N.grandTaxes)==null?void 0:f.cleanliness_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(r=(y=s==null?void 0:s.data)==null?void 0:y.grandTaxes)==null?void 0:r.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(h=(d=s==null?void 0:s.data)==null?void 0:d.grandTaxes)==null?void 0:h.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(u=(b=s==null?void 0:s.data)==null?void 0:b.grandTaxes)==null?void 0:u.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(T=(g=s==null?void 0:s.data)==null?void 0:g.grandTaxes)==null?void 0:T.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(D=(w=s==null?void 0:s.data)==null?void 0:w.grandTaxes)==null?void 0:D.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(E=(C=s==null?void 0:s.data)==null?void 0:C.grandTaxes)==null?void 0:E.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(I=(v=s==null?void 0:s.data)==null?void 0:v.grandTaxes)==null?void 0:I.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(B=(F=s==null?void 0:s.data)==null?void 0:F.grandTaxes)==null?void 0:B.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(l=(R=s==null?void 0:s.data)==null?void 0:R.grandTaxes)==null?void 0:l.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(H=(M=s==null?void 0:s.data)==null?void 0:M.grandTaxes)==null?void 0:H.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(L=(O=s==null?void 0:s.data)==null?void 0:O.grandTaxes)==null?void 0:L.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(Q=(W=s==null?void 0:s.data)==null?void 0:W.grandTaxes)==null?void 0:Q.monthlyPenalty}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:($=(V=s==null?void 0:s.data)==null?void 0:V.grandTaxes)==null?void 0:$.total_tax})]})})]})})]})})}const U=[{id:1,label:"Cash",value:"CASH"},{id:2,label:"Cheque",value:"CHEQUE"},{id:3,label:"DD",value:"DD"},{id:4,label:"Online",value:"ONLINE"},{id:5,label:"NEFT",value:"NEFT"}],ie=[{id:1,label:"Full Payment",value:"isFullPayment"},{id:2,label:"Arrear Amount",value:"isArrearPayment"},{id:3,label:"Part Payment",value:"isPartPayment"}];function me({data:s,formik:a,calculateActualAmount:x}){var t,p,n,P,c,_,m,j,N,f,y;return e.jsx(A.Card,{className:"mt-4 w-full",children:e.jsxs(A.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Payment Action"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold ",children:"* Total Arrear Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold text-red-500",children:["₹ ",(t=s==null?void 0:s.data)==null?void 0:t.arrear]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Current Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold text-cyan-500",children:["₹ ",(p=s==null?void 0:s.data)==null?void 0:p.currentDemand]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Interest Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold ",children:[e.jsxs("span",{className:"text-red-500",children:["₹ ",(n=s==null?void 0:s.data)==null?void 0:n.totalInterestPenalty]})," ",e.jsxs("small",{children:["( Interest on Arrear ₹ ",(P=s==null?void 0:s.data)==null?void 0:P.arrearInterest," + Previous Interest ₹ ",(c=s==null?void 0:s.data)==null?void 0:c.previousInterest,")"]})]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Payable Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(_=s==null?void 0:s.data)==null?void 0:_.payableAmt]})," ",e.jsx("small",{children:"(Arrear + Current + Interest)"})]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Advance Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(m=s==null?void 0:s.data)==null?void 0:m.remainAdvance]})," ",e.jsx("small",{className:"text-green-500",children:"(This Is An Adjustable Amount From Total Payment Value.)"})]})})]}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs(ne,{formik:a,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(z,{label:"Payment Mode",name:"paymentMode",formik:a,children:[e.jsx("option",{value:"",children:"select"}),U==null?void 0:U.map(r=>e.jsx("option",{value:r==null?void 0:r.value,children:r==null?void 0:r.label},r==null?void 0:r.id))]})}),e.jsx("div",{children:e.jsxs(z,{label:"Payment Option",name:"paymentType",formik:a,type:"select",children:[e.jsx("option",{value:"",children:"select"}),ie.map(r=>{var d;return((d=s==null?void 0:s.data)==null?void 0:d.arrear)>0?e.jsx("option",{value:r==null?void 0:r.value,children:r==null?void 0:r.label},r==null?void 0:r.id):r.value!="isArrearPayment"&&e.jsx("option",{value:r==null?void 0:r.value,children:r==null?void 0:r.label},r==null?void 0:r.id)})]})})]}),((j=a.values)==null?void 0:j.paymentMode)==="CHEQUE"?e.jsx(he,{formik:a}):((N=a.values)==null?void 0:N.paymentMode)==="DD"?e.jsx(be,{formik:a}):((f=a.values)==null?void 0:f.paymentMode)==="NEFT"?e.jsx(pe,{formik:a}):null,((y=a.values)==null?void 0:y.paymentType)==="isPartPayment"&&e.jsx("div",{className:"",children:e.jsx(o,{label:"Part Payment Amount",name:"paidAmount",type:"number",formik:a})}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsxs(A.Button,{type:"submit",color:"indigo",disabled:!a.isValid,children:["Submit ₹",x()||0]})})]})]})})}const he=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(o,{label:"Cheque No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Cheque Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Upload Cheque Image",name:"neftImage",type:"file",onChange:a=>{s.setFieldValue("neftImage",a.target.files[0])}})})]}),be=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(o,{label:"DD No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"DD Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Upload DD Image",name:"neftImage",type:"file",onChange:a=>{s.setFieldValue("neftImage",a.target.files[0])}})})]}),pe=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(o,{label:"NEFT No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"NEFT Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(o,{label:"Upload NEFT Image",name:"neftImage",type:"file",onChange:a=>{s.setFieldValue("neftImage",a.target.files[0])}})})]}),je=te().shape({paymentMode:i().required("Payment Mode is required"),paymentType:i().required("Payment Type is required"),paidAmount:i().when(["paymentType"],{is:s=>s=="isPartPayment",then:()=>i().required("Part Payment Amount is required")}),chequeNo:i().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>i().required("Cheque No is required")}),chequeDate:i().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>i().required("Cheque Date is required")}),neftImage:i().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>i().required("Cheque Upload is required")}),bankName:i().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>i().required("Bank Name is required")}),branchName:i().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>i().required("Branch Name is required")}),paymentRemark:i().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>i().required("Payment Remark is required")})});function qe(){var j,N,f,y;const s=J();K.useState(0);const a=G({}),{id:x}=X(),{pathname:t}=ee(),{result:p}=de((N=(j=t==null?void 0:t.split("/"))==null?void 0:j.slice(0,-1))==null?void 0:N.join("/")),{data:n,isLoading:P}=Y({api:S.getDemandDetails,config:{propId:x},value:x,options:{enabled:!!x}}),c=re({enableReinitialize:!0,initialValues:{paymentMode:"",paymentType:"",chequeNo:"",chequeDate:"",bankName:"",branchName:"",paymentRemark:"",neftImage:"",paidAmount:""},validationSchema:je,onSubmit:async r=>{Z.fire({title:"Are you sure?",text:"You want to proceed with payment of Rs."+m(),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(d=>{d.isConfirmed&&_(r)}).catch(d=>{var h,b;q.error((b=(h=d==null?void 0:d.response)==null?void 0:h.data)==null?void 0:b.message)})}}),_=async r=>{var h,b,u,g,T,w,D,C,E,v,I,F,B,R;let d={};if((r==null?void 0:r.paymentMode)==="ONLINE"){d={propId:x,paymentMode:r==null?void 0:r.paymentMode,paymentType:r==null?void 0:r.paymentType,paidAmount:m(),deviceType:"android",callbackUrl:"https://modernulb.com/amc-app/property/payment-history"};const l=await a.mutateAsync({api:S.iciciPayment,data:d});(h=l==null?void 0:l.data)!=null&&h.status?(q.success((b=l==null?void 0:l.data)==null?void 0:b.message),window.location.href=(g=(u=l==null?void 0:l.data)==null?void 0:u.data)==null?void 0:g.encryptUrl,c.resetForm()):q.error((T=l==null?void 0:l.data)==null?void 0:T.message)}else{(r==null?void 0:r.paymentMode)==="CHEQUE"||(r==null?void 0:r.paymentMode)==="DD"||(r==null?void 0:r.paymentMode)==="NEFT"?d={id:x,paymentMode:r==null?void 0:r.paymentMode,paymentType:r==null?void 0:r.paymentType,chequeNo:r==null?void 0:r.chequeNo,chequeDate:r==null?void 0:r.chequeDate,bankName:r==null?void 0:r.bankName,branchName:r==null?void 0:r.branchName,paymentRemark:r==null?void 0:r.paymentRemark,neftImage:r==null?void 0:r.neftImage,paidAmount:m(),deviceType:"android"}:d={id:x,paymentMode:r==null?void 0:r.paymentMode,paymentType:r==null?void 0:r.paymentType,paidAmount:m(),deviceType:"android"};try{const l=await a.mutateAsync({api:S.holdingPayment,data:d});(w=l==null?void 0:l.data)!=null&&w.status?(q.success((D=l==null?void 0:l.data)==null?void 0:D.message),s("/amc-app/property/payment-response?response=".concat((E=(C=l==null?void 0:l.data)==null?void 0:C.data)==null?void 0:E.transactionId,"&tranNo=").concat((I=(v=l==null?void 0:l.data)==null?void 0:v.data)==null?void 0:I.TransactionNo),{replace:!0}),c.resetForm()):q.error((F=l==null?void 0:l.data)==null?void 0:F.message)}catch(l){q.error((R=(B=l==null?void 0:l.response)==null?void 0:B.data)==null?void 0:R.message)}}},m=()=>{var d,h,b,u,g,T,w,D;let r=0;return((d=c.values)==null?void 0:d.paymentType)=="isFullPayment"&&(r=parseInt((h=n==null?void 0:n.data)==null?void 0:h.payableAmt)-parseInt((b=n==null?void 0:n.data)==null?void 0:b.remainAdvance)),((u=c.values)==null?void 0:u.paymentType)=="isArrearPayment"&&(r=parseInt((g=n==null?void 0:n.data)==null?void 0:g.arrearPayableAmt)-parseInt((T=n==null?void 0:n.data)==null?void 0:T.remainAdvance)),((w=c.values)==null?void 0:w.paymentType)=="isPartPayment"&&(r=parseInt((D=c.values)==null?void 0:D.paidAmount)),r};return se.useEffect(()=>{var r;((r=c.values)==null?void 0:r.paymentType)=="paidAmount"&&m()},[(f=c.values)==null?void 0:f.paidAmount]),P?e.jsx(k,{}):e.jsxs(le,{title:"Demand Details",children:[a.isLoading&&e.jsx(ae,{}),e.jsx("div",{className:"flex flex-col h-full py-3 px-4",children:e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsx(oe,{data:n,permissionResult:p}),e.jsx(ce,{data:n}),e.jsx(xe,{data:n}),((y=n==null?void 0:n.data)==null?void 0:y.payableAmt)>0?e.jsx(me,{formik:c,data:n,calculateActualAmount:m}):e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{onClick:()=>s("/amc-app/property/search-holding"),className:"text-red-500 border border-red-500 px-4 py-2 rounded-md hover:bg-red-500 hover:text-white transition duration-300 ease-in-out",children:"Payment Already Done"})})]})})]})}export{qe as default};
