import{J as xe,a as r,p as de,D as me,j as e}from"./react-2b0b979a.js";import{u as ye,r as he,s as i,A as Q,a as K,N as pe}from"./index-17ffab0d.js";import{P as fe}from"./PaymentCard-ef117321.js";import"./material-d4b16f21.js";import"./dateFns-d8bde0f9.js";import"./jspdfAutotable-996315cc.js";import"./mui-21ea0068.js";import"./reactEmotion-f996df66.js";import"./chart-475af344.js";import"./router-00804812.js";import"./lodash-612f78cf.js";import"./axios-ab898d10.js";/* empty css                */import"./moment-56196fff.js";import"./html2canvas-71958c39.js";import"./i18next-9a95e6a2.js";import"./RazorpayPaymentScreen-dd1b4fed.js";function qe(ge){var P,u,b,N,v,j,w,_,S,A,T,I,B,C,H,z,L,$,R;const{t}=xe(),[V,d]=r.useState(!1);r.useState();const[s,X]=r.useState(),[Pe,Z]=r.useState();r.useState(!1),r.useState(null);const[ue,D]=r.useState(null),[ee,be]=r.useState(null),[h,se]=r.useState(null),[ae,te]=r.useState(null),[p,le]=r.useState(0),m=de(),{id:n,moduleType:a}=me(),{zeroDemandPayment:ie,api_getHoldingDemandById:re,api_getsafDemandById:f,api_getClusterSafDemandById:ce,api_getClusterHoldingDemandById:ne}=pe();ye(`${t("mainPropertyPaymentPage.paymentScreen.label")}`);const g=(y=null,c=null)=>{d(!0);let o,x;a=="holding"&&(o=re,x={propId:n,fYear:y,qtr:c}),a=="saf"&&(o=f,x={id:n}),a=="gbsaf"&&(o=f,x={id:n,fYear:y,qtr:c}),a=="cluster-saf"&&(o=ce,x={clusterId:n}),a=="cluster-holding"&&(o=ne,x={clusterId:n}),Q.post(o,x,K()).then(function(l){var U,q,E,F,M,k,W,Y,G,J,O;X((U=l==null?void 0:l.data)==null?void 0:U.data),Z(l==null?void 0:l.data),d(!1),((E=(q=l==null?void 0:l.data)==null?void 0:q.data)==null?void 0:E.paymentStatus)===1&&a=="saf"&&m(`/viewDemand/${n}`),te((k=(M=(F=l==null?void 0:l.data)==null?void 0:F.data)==null?void 0:M.amounts)==null?void 0:k.isPayable),((G=(Y=(W=l==null?void 0:l.data)==null?void 0:W.data)==null?void 0:Y.amounts)==null?void 0:G.isPayable)==!1&&oe(),((O=(J=l==null?void 0:l.data)==null?void 0:J.data)==null?void 0:O.paymentStatus)===1&&a=="holding"&&m(`/viewDemandHoldingProperty/${n}`),le(p+1)}).catch(function(l){d(!1)})},oe=()=>{d(!0),seterroState(!1);let y={id:n,paymentMode:"Online"};Q.post(ie,y,K()).then(c=>{var o,x,l;(o=c==null?void 0:c.data)!=null&&o.status?se((l=(x=c==null?void 0:c.data)==null?void 0:x.data)==null?void 0:l.TransactionNo):seterroState(!0)}).catch(c=>{seterroState(!0)}).finally(()=>d(!1))};return r.useEffect(()=>{g()},[]),e.jsxs(e.Fragment,{children:[V&&e.jsx(he,{}),e.jsxs("div",{className:"sm:p-10 p-2",children:[e.jsxs("div",{className:"w-full bg-white shadow-xl mb-6",children:[a!="cluster-saf"&&a!="cluster-holding"&&e.jsxs("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[a!="saf"&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((P=s==null?void 0:s.basicDetails)==null?void 0:P.holding_no)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.holdingNo.label"),"."]})]}),(a=="saf"||a=="gbsaf")&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((u=s==null?void 0:s.basicDetails)==null?void 0:u.saf_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.applicationNo.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((b=s==null?void 0:s.basicDetails)==null?void 0:b.old_ward_no)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:["Ward No.",t("mainPropertyPaymentPage.wardNo.label")]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:i((N=s==null?void 0:s.basicDetails)==null?void 0:N.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.newWardNo.label")})]}),a!="gbsaf"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:i((v=s==null?void 0:s.basicDetails)==null?void 0:v.ownership_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.ownershipType.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((j=s==null?void 0:s.basicDetails)==null?void 0:j.property_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.propertyType.label")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:i((w=s==null?void 0:s.basicDetails)==null?void 0:w.ownership_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.govtBuildingUsageType.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((_=s==null?void 0:s.basicDetails)==null?void 0:_.property_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.propertyUsageType.label")})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((S=s==null?void 0:s.basicDetails)==null?void 0:S.zone_mstr_id)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.zone.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((A=s==null?void 0:s.basicDetails)==null?void 0:A.is_mobile_tower)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.propertyHasMobileTower.label")," ?"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:i((T=s==null?void 0:s.basicDetails)==null?void 0:T.is_hoarding_board)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.propertyHasHoardingBoard.label")," ?"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:i((I=s==null?void 0:s.basicDetails)==null?void 0:I.is_petrol_pump)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.isPropertyPetrolPump.label")," ?"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((B=s==null?void 0:s.basicDetails)==null?void 0:B.is_water_harvesting)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.rainwaterHarvestingProvision.label")," ?"]})]})]})]}),(a=="cluster-saf"||a=="cluster-holding")&&e.jsx("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((C=s==null?void 0:s.basicDetails)==null?void 0:C.cluster_name)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.clusterName.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((H=s==null?void 0:s.basicDetails)==null?void 0:H.cluster_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.clusterType.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:i((z=s==null?void 0:s.basicDetails)==null?void 0:z.authorized_person_name)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.authorizedPersonName.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:i((L=s==null?void 0:s.basicDetails)==null?void 0:L.mobile_no)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.mobileNo.label"),"."]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i(($=s==null?void 0:s.basicDetails)==null?void 0:$.address)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.address.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i(new Date((R=s==null?void 0:s.basicDetails)==null?void 0:R.created_at).toLocaleDateString("en-GB"))}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.createdAt.label")})]})]})})]}),e.jsx("div",{children:ae==!1?e.jsx("div",{className:"w-full h-full bg-white p-20",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-center font-semibold text-3xl",children:[t("mainPropertyPaymentPage.applicationSubmittedMessage.label")," !"]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>m(`/paymentReceipt/${a=="cluster-saf"||a=="cluster-holding",encodeURIComponent(h)}/${a=="cluster-saf"||a=="cluster-holding"?a=="cluster-saf"?"cluster-saf":"cluster-holding":a=="saf"||a=="gbsaf"?"saf":"holding"}`),children:t("mainPropertyPaymentPage.viewReceipt.label")}),a!="direct"&&e.jsx("button",{className:"mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>m(`/propApplicationDetails/${n}`),children:t("mainPropertyPaymentPage.viewApplication.label")})]})]})}):e.jsx(fe,{reset:p,selectedPaymentQtr:ee,selectedPaymentYear:D,fetchDemandDetail:g,basicDetails:s==null?void 0:s.basicDetails,safPaymentDetailsData:s==null?void 0:s.amounts,paymentDetails:a=="cluster-saf"?s==null?void 0:s.demand:s==null?void 0:s.duesList})})]}),e.jsx("div",{className:"w-full h-40 md:none"})]})}export{qe as default};
