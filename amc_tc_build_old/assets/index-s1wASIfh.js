import{b as B,c as i,m as t,j as e}from"./index-G7ipukwn.js";import{u as L}from"./router-5yjtezO8.js";import{r as o}from"./tailwind-6U-kYQAu.js";import{u as $}from"./formik.esm-BnzrXcQN.js";import{I as T,a as W}from"./index.esm-VQYkeCD-.js";import{c as E,a as h}from"./index.esm-uHa2PMRf.js";import{F as O}from"./FormProvider-kfLfSQaG.js";import{L as Z}from"./LoaderButton-sf5tMPlK.js";import{S as x}from"./SelectField-Q5I9zO1Z.js";import"./index-iFVn5AxS.js";import{P as G}from"./index-qyd5CZF9.js";import{S as H}from"./index-ApSWHQ-h.js";import"./reactQuery-QTVGT_ni.js";import"./axios-lPgvryBG.js";import"./reactIcons-ElHvrKTF.js";import"./headlessui-iZReL1Rn.js";import"./ArrowRightIcon-g-6SOtWO.js";function te(){var p,j,m,b,f,N,g,y,v,S,u,I,w,C,F,P,k,_,q,A,M,R;const z=L(),r=B(),n=i({api:t.shopMaster,config:{},options:{enabled:!0}}),l=$({enableReinitialize:!0,initialValues:r==null?void 0:r.searchShopList,validationSchema:E({shopCategoryId:h().required("Search String is required"),circleId:h().required("Search String is required"),marketId:h().required("Search String is required")}),onSubmit:async(s,{resetForm:J})=>{console.log("values",r==null?void 0:r.searchShopList),r==null||r.setSearchShopList({...s,page:1})}}),{values:d}=l,c=i({api:t.listWiseCircleMarket,key:"marketList",config:{circleId:d==null?void 0:d.circleId},value:[d==null?void 0:d.circleId],options:{enabled:!!(d!=null&&d.circleId)}}),a=i({api:(p=t)==null?void 0:p.searchShopForPayment,config:r==null?void 0:r.searchShopList,value:[(j=r==null?void 0:r.searchShopList)==null?void 0:j.shopCategoryId,(m=r==null?void 0:r.searchShopList)==null?void 0:m.circleId,(b=r==null?void 0:r.searchShopList)==null?void 0:b.marketId,(f=r==null?void 0:r.searchShopList)==null?void 0:f.page,(N=r==null?void 0:r.searchShopList)==null?void 0:N.perPage],options:{enabled:!!((g=r==null?void 0:r.searchShopList)!=null&&g.marketId)}});return e.jsx(G,{title:"Search Shop",children:e.jsx("div",{className:"px-4 py-4 flex-1",children:e.jsxs(O,{formik:l,children:[e.jsx(o.Card,{className:"w-full",children:e.jsxs(o.CardBody,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Search Shop list"}),e.jsxs("button",{className:"items-center flex justify-start px-2 py-1 border rounded-lg gap-1 cursor-pointer",onClick:()=>{l==null||l.resetForm(),r==null||r.setSearchShopList({page:1,perPage:10,shopCategoryId:"",circleId:"",marketId:""})},children:[e.jsx(T,{size:"1.2rem",className:"cursor-pointer text-blue-600"}),e.jsx("small",{className:" text-blue-600 ",children:"Reset"})]})]}),e.jsx("div",{className:"my-4 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsxs(x,{label:"Shop category",name:"shopCategoryId",formik:l,children:[e.jsx("option",{value:"",children:"select"}),(S=(v=(y=n==null?void 0:n.data)==null?void 0:y.data)==null?void 0:v.shopType)==null?void 0:S.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.shop_type},s==null?void 0:s.id))]})}),e.jsx("div",{children:e.jsxs(x,{label:"Zone",name:"circleId",formik:l,children:[e.jsx("option",{value:"",children:"select"}),(w=(I=(u=n==null?void 0:n.data)==null?void 0:u.data)==null?void 0:I.circleList)==null?void 0:w.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.circle_name},s==null?void 0:s.id))]})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs(x,{label:"Market",formik:l,name:"marketId",disabled:c==null?void 0:c.isLoading,children:[e.jsx("option",{value:"",children:"select"}),(F=(C=c==null?void 0:c.data)==null?void 0:C.data)==null?void 0:F.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.market_name},s==null?void 0:s.id))]}),e.jsx("small",{className:"text-blue-500",children:(c==null?void 0:c.isLoading)&&"Please wait..."})]})]}),e.jsx("div",{className:"flex justify-center mt-1",children:e.jsx(Z,{className:"w-full",type:"submit",disabled:a==null?void 0:a.isLoading,children:"Search"})})]})}),a!=null&&a.isFetching?e.jsx("div",{className:"text-center py-52 text-blue-600",children:"Please Wait..."}):e.jsx(e.Fragment,{children:((k=(P=a==null?void 0:a.data)==null?void 0:P.data.data)==null?void 0:k.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-b-2"}),(A=(q=(_=a==null?void 0:a.data)==null?void 0:_.data)==null?void 0:q.data)==null?void 0:A.map(s=>e.jsx(o.Card,{className:"w-full mb-5",children:e.jsxs(o.CardBody,{children:[e.jsx("div",{className:"flex items-center justify-between -mt-1",children:e.jsx("div",{className:"flex items-center",children:e.jsx("p",{className:"text-xs text-end font-bold",children:s==null?void 0:s.allottee})})}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Shop No:"}),e.jsx("p",{className:"text-xs text-end",children:s==null?void 0:s.id})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Shop Type:"}),e.jsx("p",{className:"text-xs text-end",children:s==null?void 0:s.shop_type})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Market:"}),e.jsx("p",{className:"text-xs text-end",children:(s==null?void 0:s.market_name)||"--"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Circle:"}),e.jsx("p",{className:"text-xs text-end truncate w-60",children:s==null?void 0:s.circle_name})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Contact:"}),e.jsx("div",{className:"w-44",children:e.jsx("p",{className:"text-xs text-end truncate",children:(s==null?void 0:s.contact_no)||"--"})})]}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsx("div",{className:"flex items-center justify-center mt-6",children:e.jsx(o.Button,{onClick:()=>z("/amc-app/adv-municipal-rental/shop-details/".concat(s==null?void 0:s.id)),color:"blue",size:"sm",className:"rounded-md ",children:e.jsxs("small",{className:"flex justify-center items-center space-x-1",children:["View Details ","  ",e.jsx(W,{size:"1rem"})]})})})]})},s==null?void 0:s.id)),e.jsx("div",{className:"my-4 border-b-2"}),e.jsx(H,{active:r==null?void 0:r.searchShopList,noOfPage:(R=(M=a==null?void 0:a.data)==null?void 0:M.data)==null?void 0:R.last_page,setActive:r==null?void 0:r.setSearchShopList})]}):e.jsx("div",{className:"text-center py-52",children:"No Record Found!"})}),e.jsx("div",{className:"my-4 border-b-2"})]})})})}export{te as default};
