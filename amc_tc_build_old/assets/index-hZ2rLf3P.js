import{j as e,e as ie,d as xe,c as ce,p as le,S as de,Q as Y,I as me}from"./index-FNsQ_XIp.js";import{u as he,d as be,e as pe,f as je,r as Ne}from"./router-5yjtezO8.js";import{u as ye}from"./formik.esm-BnzrXcQN.js";import{c as fe,a as p}from"./index.esm-uHa2PMRf.js";import{P as ue}from"./index-ZdYeXGeN.js";import{O as ge}from"./OverLayLoader-gvKsfTnk.js";import{r as H}from"./tailwind-6U-kYQAu.js";import{F as Te}from"./FormProvider-ZXBEraFK.js";import{T as m}from"./TextField-lqBmV6ZG.js";import{S as oe}from"./SelectField-5R-6PI48.js";import"./index-iFVn5AxS.js";import{u as we}from"./usePathWisePermission-paFCSVvD.js";import{U as _e}from"./useSaveLocation-UhzDULRQ.js";import{u as Pe}from"./useLocationRadius-pKTzNiUL.js";import"./reactQuery-QTVGT_ni.js";import"./axios-lPgvryBG.js";import"./reactIcons-ElHvrKTF.js";import"./headlessui-iZReL1Rn.js";import"./module-2meUYmyu.js";import"./customInputValidation-jhKsg103.js";function Ae({data:s,permissionResult:o}){var j,t,f,u,q,v,P,N,b,g,E,l,I,x,C,T,w,A,_,d,D;return e.jsx(H.Card,{children:e.jsxs("div",{className:"px-4 py-6",children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Basic Details"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Holding No:"}),e.jsx("h1",{className:"text-xs",children:(t=(j=s==null?void 0:s.data)==null?void 0:j.basicDetails)==null?void 0:t.holding_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Property No:"}),e.jsx("h1",{className:"text-xs",children:(u=(f=s==null?void 0:s.data)==null?void 0:f.basicDetails)==null?void 0:u.property_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Owner Name:"}),e.jsx("h1",{className:"text-xs",children:(v=(q=s==null?void 0:s.data)==null?void 0:q.basicDetails)==null?void 0:v.owner_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Owner Name (In Marathi):"}),e.jsx("h1",{className:"text-xs",children:((N=(P=s==null?void 0:s.data)==null?void 0:P.basicDetails)==null?void 0:N.owner_name_marathi)||"N/A"})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Applicant Name:"}),e.jsx("h1",{className:"text-xs",children:(g=(b=s==null?void 0:s.data)==null?void 0:b.basicDetails)==null?void 0:g.applicant_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Address:"}),e.jsx("h1",{className:"text-xs",children:(l=(E=s==null?void 0:s.data)==null?void 0:E.basicDetails)==null?void 0:l.prop_address})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Zone:"}),e.jsx("h1",{className:"text-xs",children:(x=(I=s==null?void 0:s.data)==null?void 0:I.basicDetails)==null?void 0:x.zone_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Ward No:"}),e.jsx("h1",{className:"text-xs",children:(T=(C=s==null?void 0:s.data)==null?void 0:C.basicDetails)==null?void 0:T.ward_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Ownership Type:"}),e.jsx("h1",{className:"text-xs",children:(A=(w=s==null?void 0:s.data)==null?void 0:w.basicDetails)==null?void 0:A.ownership_type})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Property Type:"}),e.jsx("h1",{className:"text-xs",children:(d=(_=s==null?void 0:s.data)==null?void 0:_.basicDetails)==null?void 0:d.property_type})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Is-Armed-Force:"}),e.jsx("h1",{className:"text-xs",children:(D=s==null?void 0:s.data)!=null&&D.isSingleManArmedForce?"Yes":"No"})]})]}),e.jsx("div",{className:"my-3 border-b-2"})]})})}function De({data:s}){var o,j;return e.jsx(H.Card,{className:"mt-4 w-full",children:e.jsxs(H.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Demand List"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Financial Year :"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:(j=(o=s==null?void 0:s.data)==null?void 0:o.demandList)==null?void 0:j.map((t,f)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.fyear}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.light_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:t==null?void 0:t.total_tax})]},f))})]})})]})})}function Fe({data:s}){var o,j,t,f,u,q,v,P,N,b,g,E,l,I,x,C,T,w,A,_,d,D,G,V,M,B,S,R,U,L,W,O,r,i,c,h,y,F;return e.jsx(H.Card,{className:"mt-4 w-full",children:e.jsxs(H.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Grand Total Tax"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Interest"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(j=(o=s==null?void 0:s.data)==null?void 0:o.grandTaxes)==null?void 0:j.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(f=(t=s==null?void 0:s.data)==null?void 0:t.grandTaxes)==null?void 0:f.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(q=(u=s==null?void 0:s.data)==null?void 0:u.grandTaxes)==null?void 0:q.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(P=(v=s==null?void 0:s.data)==null?void 0:v.grandTaxes)==null?void 0:P.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(b=(N=s==null?void 0:s.data)==null?void 0:N.grandTaxes)==null?void 0:b.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(E=(g=s==null?void 0:s.data)==null?void 0:g.grandTaxes)==null?void 0:E.cleanliness_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(I=(l=s==null?void 0:s.data)==null?void 0:l.grandTaxes)==null?void 0:I.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(C=(x=s==null?void 0:s.data)==null?void 0:x.grandTaxes)==null?void 0:C.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(w=(T=s==null?void 0:s.data)==null?void 0:T.grandTaxes)==null?void 0:w.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(_=(A=s==null?void 0:s.data)==null?void 0:A.grandTaxes)==null?void 0:_.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(D=(d=s==null?void 0:s.data)==null?void 0:d.grandTaxes)==null?void 0:D.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(V=(G=s==null?void 0:s.data)==null?void 0:G.grandTaxes)==null?void 0:V.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(B=(M=s==null?void 0:s.data)==null?void 0:M.grandTaxes)==null?void 0:B.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(R=(S=s==null?void 0:s.data)==null?void 0:S.grandTaxes)==null?void 0:R.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(L=(U=s==null?void 0:s.data)==null?void 0:U.grandTaxes)==null?void 0:L.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(O=(W=s==null?void 0:s.data)==null?void 0:W.grandTaxes)==null?void 0:O.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(i=(r=s==null?void 0:s.data)==null?void 0:r.grandTaxes)==null?void 0:i.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(h=(c=s==null?void 0:s.data)==null?void 0:c.grandTaxes)==null?void 0:h.monthlyPenalty}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(F=(y=s==null?void 0:s.data)==null?void 0:y.grandTaxes)==null?void 0:F.total_tax})]})})]})})]})})}const ne=[{id:1,label:"Cash",value:"CASH"},{id:2,label:"Cheque",value:"CHEQUE"},{id:3,label:"DD",value:"DD"},{id:4,label:"Online",value:"ONLINE"},{id:5,label:"NEFT",value:"NEFT"}],ve=[{id:1,label:"Full Payment",value:"isFullPayment"},{id:2,label:"Arrear Amount",value:"isArrearPayment"},{id:3,label:"Part Payment",value:"isPartPayment"}];function Ee({data:s,formik:o,calculateActualAmount:j,PayNow:t,payableAmt:f,advanceAmount:u,rebateAmount:q,arrearPayableAmt:v,ButtonAomunt:P}){var b,g,E,l,I,x,C,T,w,A,_,d,D,G,V,M,B,S,R,U,L,W,O,r,i,c,h,y,F,Q,$,z,k,J,Z,K,X,ee,se,re;console.log((b=s==null?void 0:s.data)==null?void 0:b.remainAdvance),console.log((g=s==null?void 0:s.data)==null?void 0:g.payableAmt);const N=()=>u>=f?P():t();return e.jsx(H.Card,{className:"mt-4 w-full",children:e.jsxs(H.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Payment Action"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold ",children:"* Total Arrear Amount -:"})}),e.jsx("div",{children:(E=s==null?void 0:s.data)!=null&&E.isSingleManArmedForce||(l=s==null?void 0:s.data)!=null&&l.isMobileTower?e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-sm font-semibold text-red-500",children:["₹ ",(I=s==null?void 0:s.data)==null?void 0:I.arrear," - ₹",(x=s==null?void 0:s.data)==null?void 0:x.arrear_exempted_general_tax," = ₹"," ",((C=s==null?void 0:s.data)==null?void 0:C.arrear)-((T=s==null?void 0:s.data)==null?void 0:T.arrear_exempted_general_tax)," "]}),e.jsx("h1",{className:"font-semibold text-[11px] text-red-500",children:"(General Tax Exemption)"})]}):e.jsx(e.Fragment,{children:e.jsxs("h1",{className:"text-sm font-semibold text-red-500",children:["₹ ",(w=s==null?void 0:s.data)==null?void 0:w.arrear]})})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold",children:"* Total Current Amount -:"})}),e.jsx("div",{children:(A=s==null?void 0:s.data)!=null&&A.isSingleManArmedForce||(_=s==null?void 0:s.data)!=null&&_.isMobileTower?e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-sm font-semibold text-cyan-500",children:["₹ ",(d=s==null?void 0:s.data)==null?void 0:d.currentDemand," - ₹",(D=s==null?void 0:s.data)==null?void 0:D.current_exempted_general_tax," = ₹"," ",parseFloat(((G=s==null?void 0:s.data)==null?void 0:G.currentDemand)-((V=s==null?void 0:s.data)==null?void 0:V.current_exempted_general_tax)).toFixed(2)," "]}),e.jsx("h1",{className:"font-semibold text-[11px] text-cyan-500",children:"(General Tax Exemption)"})]}):e.jsx(e.Fragment,{children:e.jsxs("h1",{className:"text-sm font-semibold text-cyan-500",children:["₹ ",(M=s==null?void 0:s.data)==null?void 0:M.currentDemand]})})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold",children:"* Total Interest Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold ",children:[e.jsxs("span",{className:"text-red-500",children:["₹ ",(B=s==null?void 0:s.data)==null?void 0:B.totalInterestPenalty]})," ",e.jsxs("small",{children:["( Interest on Arrear ₹ ",(S=s==null?void 0:s.data)==null?void 0:S.arrearInterest," + Previous Interest ₹ ",(R=s==null?void 0:s.data)==null?void 0:R.previousInterest,")"]})]})}),e.jsx("div",{className:"my-3 border-b-2 col-span-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold",children:"* Total Payable Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[(U=s==null?void 0:s.data)!=null&&U.isSingleManArmedForce||(L=s==null?void 0:s.data)!=null&&L.isMobileTower?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(W=s==null?void 0:s.data)==null?void 0:W.payableAmt," - ₹",(O=s==null?void 0:s.data)==null?void 0:O.total_exempted_general_tax," = ₹"," ",parseFloat(((r=s==null?void 0:s.data)==null?void 0:r.payableAmt)-((i=s==null?void 0:s.data)==null?void 0:i.total_exempted_general_tax)).toFixed(2)," "]})," "]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",f]})," "]}),e.jsx("small",{children:"(Arrear + Current + Interest)"})," ",e.jsx("div",{children:e.jsxs("h1",{className:"text-[10px] text-yellow-800",children:["( If You Pay Full Amount Before"," ",(h=(c=s==null?void 0:s.data)==null?void 0:c.QuarterlyRebates[0])==null?void 0:h.upto_date,", Then"," ",(F=(y=s==null?void 0:s.data)==null?void 0:y.QuarterlyRebates[0])==null?void 0:F.rebates," % Of General Tax For Current Year Will Be Waived. )"]})}),((Q=s==null?void 0:s.data)==null?void 0:Q.isSingleManArmedForce)||(($=s==null?void 0:s.data)==null?void 0:$.isMobileTower)&&e.jsxs("small",{className:"text-blue-500",children:[" ","- (",(z=s==null?void 0:s.data)==null?void 0:z.total_exempted_general_tax," General Tax Exemption)"]})]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold",children:"* Advance Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(k=s==null?void 0:s.data)==null?void 0:k.remainAdvance]})," ",e.jsx("small",{className:"text-green-500",children:"(This Is An Adjustable Amount From Total Payment Value.)"})]})})]}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs(Te,{formik:o,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(oe,{label:"Payment Mode",name:"paymentMode",formik:o,children:[e.jsx("option",{value:"",children:"select"}),parseFloat((J=s==null?void 0:s.data)==null?void 0:J.remainAdvance)>=parseFloat((Z=s==null?void 0:s.data)==null?void 0:Z.payableAmt)&&e.jsx("option",{value:"ADVANCE ADJUSTMENT",children:"Advance Adjustment"}),ne==null?void 0:ne.map(a=>e.jsx("option",{value:a==null?void 0:a.value,children:a==null?void 0:a.label},a==null?void 0:a.id))]})}),e.jsx("div",{children:e.jsxs(oe,{label:"Payment Option",name:"paymentType",formik:o,type:"select",children:[e.jsx("option",{value:"",children:"select"}),ve.map(a=>{var te;return((te=s==null?void 0:s.data)==null?void 0:te.arrear)>0?e.jsx("option",{value:a==null?void 0:a.value,children:a==null?void 0:a.label},a==null?void 0:a.id):a.value!="isArrearPayment"&&e.jsx("option",{value:a==null?void 0:a.value,children:a==null?void 0:a.label},a==null?void 0:a.id)})]})})]}),((K=o.values)==null?void 0:K.paymentMode)==="CHEQUE"?e.jsx(Ie,{formik:o}):((X=o.values)==null?void 0:X.paymentMode)==="DD"?e.jsx(Ce,{formik:o}):((ee=o.values)==null?void 0:ee.paymentMode)==="NEFT"?e.jsx(qe,{formik:o}):null,((se=o.values)==null?void 0:se.paymentType)==="isPartPayment"&&e.jsx("div",{className:"",children:e.jsx(m,{label:"Part Payment Amount",name:"paidAmount",type:"number",formik:o,onInput:((re=o.values)==null?void 0:re.paymentType)==="isPartPayment"?a=>{a.target.value=Math.max(0,parseInt(a.target.value)).toString().slice(0,10)}:null})}),u>=N()&&e.jsxs("h1",{className:"text-xs font-semibold text-green-500",children:["₹",u," - ₹",N()," = ₹",u-N()," will remain in advance."]}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsxs(H.Button,{type:"submit",color:"indigo",disabled:!o.isValid,children:["Submit ₹ ",N()]})})]})]})})}const Ie=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(m,{label:"Cheque No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Cheque Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Upload Cheque Image",name:"neftImage",type:"file",onChange:o=>{s.setFieldValue("neftImage",o.target.files[0])}})})]}),Ce=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(m,{label:"DD No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"DD Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Upload DD Image",name:"neftImage",type:"file",onChange:o=>{s.setFieldValue("neftImage",o.target.files[0])}})})]}),qe=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(m,{label:"NEFT No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"NEFT Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(m,{label:"Upload NEFT Image",name:"neftImage",type:"file",onChange:o=>{s.setFieldValue("neftImage",o.target.files[0])}})})]}),Me=fe().shape({paymentMode:p().required("Payment Mode is required"),paymentType:p().required("Payment Type is required"),paidAmount:p().when(["paymentType"],{is:s=>s=="isPartPayment",then:()=>p().required("Part Payment Amount is required")}),chequeNo:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Cheque No is required")}),chequeDate:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Cheque Date is required")}),neftImage:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Cheque Upload is required")}),bankName:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Bank Name is required")}),branchName:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Branch Name is required")}),paymentRemark:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Payment Remark is required")})});function ss(){var M,B,S,R,U,L,W,O;const{isGeolocationEnabled:s,coords:o}=ie(!1),{radiusInMeters:j,distanceToTargetEast:t,distanceToTargetNorth:f,distanceToTargetSouth:u,distanceToTargetWest:q}=Pe(),v=he(),{saveLocation:P}=_e();be.useState(0);const N=xe({}),{id:b}=pe(),{pathname:g}=je(),{result:E}=we((B=(M=g==null?void 0:g.split("/"))==null?void 0:M.slice(0,-1))==null?void 0:B.join("/")),{data:l,isLoading:I}=ce({api:le.getDemandDetails,config:{propId:b},value:b,options:{enabled:!!b}}),x=ye({enableReinitialize:!0,initialValues:{paymentMode:"",paymentType:"",chequeNo:"",chequeDate:"",bankName:"",branchName:"",paymentRemark:"",neftImage:"",paidAmount:""},validationSchema:Me,onSubmit:async r=>{de.fire({title:"Are you sure?",text:"You want to proceed with payment of Rs."+D(),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(i=>{i.isConfirmed&&C(r)}).catch(i=>{var c,h;Y.error((h=(c=i==null?void 0:i.response)==null?void 0:c.data)==null?void 0:h.message)})}}),C=async r=>{var c,h,y,F,Q,$,z,k,J,Z,K,X,ee,se,re,a,te,ae;let i={};if((r==null?void 0:r.paymentMode)==="ONLINE"){i={propId:b,paymentMode:r==null?void 0:r.paymentMode,paymentType:r==null?void 0:r.paymentType,paidAmount:d(),deviceType:"android",callbackUrl:"https://modernulb.com/amc-app/property/payment-history"};const n=await N.mutateAsync({api:le.iciciPayment,data:i});(c=n==null?void 0:n.data)!=null&&c.status?(P({actionType:"PropertyPaymentOnline",refId:(y=(h=n==null?void 0:n.data)==null?void 0:h.data)==null?void 0:y.requestId,moduleId:1}),Y.success((F=n==null?void 0:n.data)==null?void 0:F.message),window.location.href=($=(Q=n==null?void 0:n.data)==null?void 0:Q.data)==null?void 0:$.encryptUrl,x.resetForm()):Y.error((z=n==null?void 0:n.data)==null?void 0:z.message)}else{(r==null?void 0:r.paymentMode)==="CHEQUE"||(r==null?void 0:r.paymentMode)==="DD"||(r==null?void 0:r.paymentMode)==="NEFT"?i={id:b,paymentMode:r==null?void 0:r.paymentMode,paymentType:r==null?void 0:r.paymentType,chequeNo:r==null?void 0:r.chequeNo,chequeDate:r==null?void 0:r.chequeDate,bankName:r==null?void 0:r.bankName,branchName:r==null?void 0:r.branchName,paymentRemark:r==null?void 0:r.paymentRemark,neftImage:r==null?void 0:r.neftImage,paidAmount:d(),deviceType:"android"}:i={id:b,paymentMode:r==null?void 0:r.paymentMode,paymentType:r==null?void 0:r.paymentType,paidAmount:d(),deviceType:"android"};try{const n=await N.mutateAsync({api:le.holdingPayment,data:i});(k=n==null?void 0:n.data)!=null&&k.status?(P({actionType:"successPropertyPayment",refId:(Z=(J=n==null?void 0:n.data)==null?void 0:J.data)==null?void 0:Z.transactionId,moduleId:1}),Y.success((K=n==null?void 0:n.data)==null?void 0:K.message),v("/amc-app/property/payment-response?response=".concat((ee=(X=n==null?void 0:n.data)==null?void 0:X.data)==null?void 0:ee.transactionId,"&tranNo=").concat((re=(se=n==null?void 0:n.data)==null?void 0:se.data)==null?void 0:re.TransactionNo),{replace:!0}),x.resetForm()):(Y.error((a=n==null?void 0:n.data)==null?void 0:a.message),P({actionType:"failedPropertyPayment",refId:b,moduleId:1}))}catch(n){Y.error((ae=(te=n==null?void 0:n.response)==null?void 0:te.data)==null?void 0:ae.message)}}};let T=parseFloat((S=l==null?void 0:l.data)==null?void 0:S.payableAmt)||0,w=parseFloat((R=l==null?void 0:l.data)==null?void 0:R.remainAdvance)||0,A=parseFloat((L=(U=l==null?void 0:l.data)==null?void 0:U.QuarterlyRebates[0])==null?void 0:L.rebates_amt)||0,_=parseFloat((W=l==null?void 0:l.data)==null?void 0:W.arrearPayableAmt)||0;const d=()=>{var i,c,h,y;let r=0;return((i=x.values)==null?void 0:i.paymentType)=="isFullPayment"&&(r=T-w-A),((c=x.values)==null?void 0:c.paymentType)=="isArrearPayment"&&(r=_-w),((h=x.values)==null?void 0:h.paymentType)=="isPartPayment"&&(r=parseFloat((y=x.values)==null?void 0:y.paidAmount)||0),r},D=()=>{var r,i,c,h,y,F,Q;return((r=l==null?void 0:l.data)==null?void 0:r.totalInterestPenalty)>0&&((i=x.values)==null?void 0:i.paymentType)==="isFullPayment"?Math.round(d()-((c=l==null?void 0:l.data)==null?void 0:c.total_exempted_general_tax)||0):((h=x.values)==null?void 0:h.paymentType)=="isArrearPayment"?Math.round(d()-parseFloat((y=l==null?void 0:l.data)==null?void 0:y.arrear_exempted_general_tax)||0):((F=x.values)==null?void 0:F.paymentType)=="isFullPayment"?Math.round(d()-parseFloat((Q=l==null?void 0:l.data)==null?void 0:Q.total_exempted_general_tax)||0):Math.round(d()||0)},G=()=>{var r,i,c;return((r=l==null?void 0:l.data)==null?void 0:r.totalInterestPenalty)>0&&((i=x.values)==null?void 0:i.paymentType)==="isFullPayment"?Math.round(T):((c=x.values)==null?void 0:c.paymentType)=="isArrearPayment"?Math.round(_):Math.round(d()||0)};Ne.useEffect(()=>{var r;((r=x.values)==null?void 0:r.paymentType)=="paidAmount"&&d()},[(O=x.values)==null?void 0:O.paidAmount]);const V=()=>{var r;return!(o!=null&&o.latitude)&&!(o!=null&&o.longitude)?e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("h1",{className:"text-center text-red-600 text-xs font-bold",children:"Please Wait While We Fetch Your Location..."})}):s?t>=j&&q>=j&&u>=j&&f>=j?((r=l==null?void 0:l.data)==null?void 0:r.payableAmt)>0?e.jsx(Ee,{formik:x,data:l,calculateActualAmount:d,PayNow:D,payableAmt:T,advanceAmount:w,rebateAmount:A,arrearPayableAmt:_,ButtonAomunt:G}):e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{onClick:()=>v("/amc-app/property/search-holding"),className:"text-red-500 border border-red-500 px-4 py-2 rounded-md hover:bg-red-500 hover:text-white transition duration-300 ease-in-out",children:"Payment Already Done"})}):e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{onClick:()=>window.location.reload(),className:"text-red-500 border text-sm text-center border-red-500 px-4 py-2 rounded-md hover:bg-red-500 hover:text-white transition duration-300 ease-in-out",children:"You are inside the 50 meter radius of zonal office, you can't make payment"})}):e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{onClick:()=>v("/amc-app/property/search-holding"),className:"text-red-500 border border-red-500 px-4 py-2 rounded-md hover:bg-red-500 hover:text-white transition duration-300 ease-in-out",children:"Please enable location to proceed with payment"})})};return I?e.jsx(me,{}):e.jsxs(ue,{title:"Demand Details",children:[N.isLoading&&e.jsx(ge,{}),e.jsx("div",{className:"flex flex-col h-full py-3 px-4",children:e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsx(Ae,{data:l,permissionResult:E}),e.jsx(De,{data:l}),e.jsx(Fe,{data:l}),V()]})})]})}export{ss as default};
