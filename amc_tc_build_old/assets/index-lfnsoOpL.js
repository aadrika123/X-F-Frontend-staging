import{b as Ne,d as D,e as fe,c as V,p as M,w as we,S as xe,j as e,I as ve,Q as T}from"./index-oKE0tABh.js";import{d as w,u as $,e as ge,f as Te,r as he}from"./router-vn-0iGwJ.js";import{c as H,b as Fe,a as j,d as ue}from"./index.esm-19LW8OGO.js";import{r as h}from"./tailwind-umh7vczy.js";import{u as U,F as Ce}from"./formik.esm-ilDmhU_v.js";import{F as G}from"./FormProvider-c4VXo3QT.js";import{T as B}from"./TextField-JXSALBGI.js";import"./index-9INnh4Fj.js";import{P as Se}from"./index-Cg51asvN.js";import{r as je}from"./resizeImage-aZKCXcds.js";import{u as Pe}from"./useErrorFocusFields-f_sEGw1K.js";import{O as ye}from"./OverLayLoader-ECtxRUqR.js";import{u as Le}from"./usePathWisePermission-6vxZLWys.js";import"./reactQuery-VYMV1vFj.js";import{S as A}from"./SelectField-xkLq2-1L.js";import{T as Ie}from"./TextAreaField-_3p-jJcW.js";import{M as Be}from"./MyPDFViewer-VxtNLZHR.js";import"./reactQueryDevtools-6dm9iask.js";import"./axios-lPgvryBG.js";import"./reactIcons-lANGEfNm.js";import"./headlessui-pLs_kC1m.js";import"./customInputValidation-8tSUGdUh.js";import"./module-1K6fyufl.js";import"./reactPdfViewerCore-t_0I17fT.js";import"./reactPdfViewerDefaultLayout-S9Yj6FAR.js";function Me(t){var u,i,S,O,Z,Y,J,K,Q,X,p;Ne();const[m,l]=w.useState(""),{AutoFocusErrorField:n}=Pe(),[r,x]=w.useState([]);$();const F=D({}),[L,q]=w.useState(null),{id:C}=ge(),{pathname:v}=Te();Le((i=(u=v==null?void 0:v.split("/"))==null?void 0:u.slice(0,-1))==null?void 0:i.join("/"));const{coords:y,isGeolocationEnabled:I}=fe(),o=V({api:M.staticSafDetail,config:{applicationId:C},value:[C],options:{enabled:!!C}});V({api:(S=we)==null?void 0:S.workFlowInfo,config:{workflowId:(Z=(O=o==null?void 0:o.data)==null?void 0:O.data)==null?void 0:Z.workflow_id},value:[(J=(Y=o==null?void 0:o.data)==null?void 0:Y.data)==null?void 0:J.workflow_id],options:{enabled:!!((Q=(K=o==null?void 0:o.data)==null?void 0:K.data)!=null&&Q.workflow_id)}});const a=U({enableReinitialize:!0,initialValues:{...t==null?void 0:t.data,geoTagged:(p=(X=t==null?void 0:t.data)==null?void 0:X.geoTagged)==null?void 0:p.map(N=>({...N}))},validationSchema:H().shape({geoTagged:Fe().of(H().shape({latitude:j().required("Latitude is required"),longitude:j().required("Longitude is required"),directionType:j().required("Direction is required"),imagePath:ue().required("Image is required")}))}),onSubmit:async N=>{t==null||t.next({...t==null?void 0:t.data,geoTagged:N==null?void 0:N.geoTagged})}}),{submitCount:d,isSubmitting:c,errors:g,isValid:s}=a,b=async(N,P,f)=>{var E,W;await((E=window==null?void 0:window.ReactNativeWebView)==null?void 0:E.postMessage(JSON.stringify({Key:"OPEN_CAMERA"})));const R=await je(N.target.files[0]),z=new File([R],(W=N.target.files[0])==null?void 0:W.name,{type:"image/*"});a.setFieldValue("geoTagged.".concat(P,".latitude"),y==null?void 0:y.latitude),a.setFieldValue("geoTagged.".concat(P,".longitude"),y==null?void 0:y.longitude),a.setFieldValue("geoTagged.".concat(P,".directionType"),f==null?void 0:f.directionType),a.setFieldValue("geoTagged.".concat(P,".imagePath"),z),q(z)};return he.useEffect(()=>{var N;x(((N=t==null?void 0:t.data)==null?void 0:N.isWaterHarvesting)=="yes"?[{id:1,title:"Front Image",directionType:"Front"},{id:2,title:"Left Image",directionType:"Left"},{id:3,title:"Right Image",directionType:"Right"},{id:4,title:"Rain Water Harvesting Image",directionType:"waterHarvesting",isRainWaterHarvesting:!0}]:[{id:1,title:"Front Image",directionType:"Front"},{id:2,title:"Left Image",directionType:"Left"},{id:3,title:"Right Image",directionType:"Right"}])},[t==null?void 0:t.data]),w.useEffect(()=>{n({submitCount:d,isSubmitting:c,errors:g,isValid:s})},[g,d,c]),I||xe.fire({text:"Geolocation is not enabled! Please enable to use this app",icon:"error",confirmButtonText:"Ok"}),m?e.jsx("div",{className:"p-16 flex text-center text-red-500 font-semibold h-screen justify-center items-center",children:"Network Error"}):o!=null&&o.isLoading?e.jsx(ve,{}):e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Geo Tagging"})}),F.isLoading&&e.jsx(ye,{}),e.jsx("div",{children:e.jsxs(G,{formik:a,children:[e.jsx(Ce,{name:"geoTagged",children:N=>r.map((P,f)=>{var R,z,E,W,k,ee,ae,te,se,ie,ne,de,re,le,ce,oe,me;return e.jsxs(w.Fragment,{children:[e.jsxs(h.Card,{className:"w-full",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-base font-semibold text-gray-100",children:P==null?void 0:P.title})}),e.jsxs(h.CardBody,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 items-center",children:[e.jsx("h1",{className:"font-semibold text-sm",children:"Latitude : "}),e.jsx(B,{disabled:!0,type:"text",isDynamic:!0,name:"geoTagged.".concat(f,".latitude"),formik:a}),e.jsxs("h1",{className:"font-semibold text-sm",children:["Longitude :"," "]}),e.jsx(B,{disabled:!0,type:"text",isDynamic:!0,name:"geoTagged.".concat(f,".longitude"),formik:a})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-4",children:[e.jsx("div",{children:((z=(R=a==null?void 0:a.values)==null?void 0:R.geoTagged[f])==null?void 0:z.imagePath)&&e.jsx("img",{className:"w-full h-64",loading:"lazy",src:(W=(E=a==null?void 0:a.values)==null?void 0:E.geoTagged[f])!=null&&W.imagePath?URL.createObjectURL((ee=(k=a==null?void 0:a.values)==null?void 0:k.geoTagged[f])==null?void 0:ee.imagePath):null,alt:(se=(te=(ae=a==null?void 0:a.values)==null?void 0:ae.geoTagged[f])==null?void 0:te.imagePath)==null?void 0:se.name})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",name:"imagePath",accept:"image/*",onChange:be=>b(be,f,P)}),e.jsx("span",{className:"text-sm text-red-500",children:(de=(ne=(ie=a==null?void 0:a.errors)==null?void 0:ie.geoTagged)==null?void 0:ne[f])==null?void 0:de.imagePath})]}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm text-red-900",children:((le=(re=a==null?void 0:a.values)==null?void 0:re.geoTagged[f])==null?void 0:le.imagePath)&&Math.round(((me=(oe=(ce=a==null?void 0:a.values)==null?void 0:ce.geoTagged[f])==null?void 0:oe.imagePath)==null?void 0:me.size)/1024/1024*100)/100+"MB"})})]})]})]}),e.jsx("div",{className:"my-4 border-b-2"})]},f)})}),e.jsxs("div",{className:"flex justify-center items-center mt-4 gap-6",children:[e.jsx(h.Button,{type:"button",onClick:()=>{var N;t==null||t.prev({...t==null?void 0:t.data,geoTagged:(N=a==null?void 0:a.values)==null?void 0:N.geoTagged})},size:"sm",color:"blue-gray",className:" px-8",children:e.jsx("small",{children:"Back"})}),e.jsx(h.Button,{type:"submit",size:"sm",className:"px-8",color:"blue",children:e.jsx("small",{children:"Next"})})]})]})})]})}function qe(t){const{data:m,consumerDetails:l,licenseDetails:n}=t,r=()=>{t.next({...m,...m},!1)},x=()=>{t.prev({...m,...m})};return e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"View Details"})}),e.jsx(h.Card,{children:e.jsxs(h.CardBody,{children:[e.jsx("div",{className:"flex flex-row items-center justify-between mb-3",children:e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"Basic Details"})})}),e.jsx("div",{className:"border-t border-gray-200 mb-1"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Name"}),e.jsx("p",{className:"text-xs text-gray-400",children:m==null?void 0:m.name})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Mobile"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["+91 ",m==null?void 0:m.mobile]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Address"}),e.jsx("p",{className:"text-xs text-gray-400",children:m==null?void 0:m.address})]})]})})})]})}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),(l==null?void 0:l.consumer_no)&&e.jsx(h.Card,{children:e.jsxs(h.CardBody,{children:[e.jsx("div",{className:"flex flex-row items-center justify-between mb-3",children:e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"Consumer Details"})})}),e.jsx("div",{className:"border-t border-gray-200 mb-1"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Consumer No"}),e.jsx("p",{className:"text-xs text-gray-400",children:l==null?void 0:l.consumer_no})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Consumer Name"}),e.jsx("p",{className:"text-xs text-gray-400",children:l==null?void 0:l.applicant_name})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Building Type"}),e.jsx("p",{className:"text-xs text-gray-400",children:l==null?void 0:l.building_type})]})]})})})]})}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),(n==null?void 0:n.application_no)&&e.jsx(h.Card,{children:e.jsxs(h.CardBody,{children:[e.jsx("div",{className:"flex flex-row items-center justify-between mb-3",children:e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"License Details"})})}),e.jsx("div",{className:"border-t border-gray-200 mb-1"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xs font-semibold",children:"License No"}),e.jsx("p",{className:"text-xs text-gray-400",children:n==null?void 0:n.license_no})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Name"}),e.jsx("p",{className:"text-xs text-gray-400",children:n==null?void 0:n.premises_owner_name})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Firm Name"}),e.jsx("p",{className:"text-xs text-gray-400",children:n==null?void 0:n.firm_name})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Address"}),e.jsx("p",{className:"text-xs text-gray-400",children:n==null?void 0:n.entity_address})]})]})})})]})}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("div",{className:"flex flex-row gap-8 justify-center",children:[e.jsx(h.Button,{size:"sm",className:"px-8",onClick:x,color:"blue-gray",children:"Back"}),e.jsx(h.Button,{size:"sm",className:"px-8",onClick:r,variant:"gradient",color:"blue",children:"Next"})]})]})}const _=[{label:"Yes",value:"yes"},{label:"No",value:"no"}],Ae=[{id:1,label:"Zone A-East",value:"1"},{id:2,label:"Zone B-West",value:"2"},{id:3,label:"Zone C-North",value:"3"},{id:4,label:"Zone D-South",value:"4"}];function ze(t){var a,d,c,g;$();const{mutateAsync:m,isLoading:l}=D({}),n=D({});D({});const r=U({validationSchema:H().shape({name:j().required("Name is required"),mobile:j().required("Mobile is required"),zoneId:j().required("Zone is required"),wardId:j().required().label("Ward"),address:j().required("Address is required"),propertyType:j().required("Property Type is required"),consumerNo:j().when("isConsumer",{is:s=>s==="yes",then:()=>j().required("Consumer No is required")}),licenseNo:j().when("isLicense",{is:s=>s==="yes",then:()=>j().required("License No is required")}),waterHarvestingDate:j().when("isWaterHarvesting",{is:s=>s==="yes",then:()=>j().required("Date is required")})}),initialValues:t==null?void 0:t.data,onSubmit:async(s,{})=>{t==null||t.next({...t==null?void 0:t.data,...s},!1)}}),{values:x}=r,{data:F,isPending:L,isError:q,error:C,isLoading:v}=V({api:M.getWardByZone,config:{zoneId:x==null?void 0:x.zoneId},value:[x==null?void 0:x.zoneId],options:{enabled:!!(x!=null&&x.zoneId)}}),y=V({api:M.masterSaf,config:{},options:{enabled:!0}}),I=async()=>{var s,b,u;try{const i=await n.mutateAsync({api:M.consumerVerify,data:{consumerNo:(s=r==null?void 0:r.values)==null?void 0:s.consumerNo}});(b=i==null?void 0:i.data)!=null&&b.status?(t==null||t.setConsumerDetails((u=i==null?void 0:i.data)==null?void 0:u.data),T.success("Consumer Verified")):T.error("Consumer not found")}catch(i){T.error(i.message)}},o=async()=>{var s,b,u;try{const i=await n.mutateAsync({api:M.tradeVerify,data:{licenseNo:(s=r==null?void 0:r.values)==null?void 0:s.licenseNo}});(b=i==null?void 0:i.data)!=null&&b.status?(t==null||t.setLicenseDetails((u=i==null?void 0:i.data)==null?void 0:u.data),T.success("License Verified")):(console.log(i==null?void 0:i.data),T.error("License not found"))}catch(i){T.error(i.message)}};return e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Basic Details"})}),e.jsx(h.Card,{children:e.jsx("div",{className:"p-4",children:e.jsx(G,{formik:r,children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx("div",{children:e.jsx(B,{label:"Name",name:"name",type:"text",formik:r,placeholder:"Enter your name"})}),e.jsx(B,{label:"Mobile",name:"mobile",type:"text",formik:r,placeholder:"Enter your mobile number",onInput:s=>{s.target.value.length>10?s.target.value=s.target.value.slice(0,10):s.target.value=s.target.value.replace(/[^0-9]/g,"")}}),e.jsxs(A,{label:"Property Type",name:"propertyType",formik:r,children:[e.jsx("option",{value:"",children:"Select"}),(c=(d=(a=y==null?void 0:y.data)==null?void 0:a.data)==null?void 0:d.property_type)==null?void 0:c.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.property_type},s==null?void 0:s.id))]}),e.jsxs(A,{label:"Zone",name:"zoneId",formik:r,children:[e.jsx("option",{value:"",children:"select"}),Ae.map(s=>e.jsx("option",{value:s==null?void 0:s.value,children:s==null?void 0:s.label},s==null?void 0:s.id))]}),e.jsxs("div",{children:[e.jsxs(A,{label:"Ward",formik:r,name:"wardId",disabled:v,children:[e.jsx("option",{value:"",children:"select"}),(g=F==null?void 0:F.data)==null?void 0:g.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.ward_name},s==null?void 0:s.id))]}),e.jsx("small",{className:"text-blue-500",children:v?"Please wait...":""})]}),e.jsx(B,{label:"Address",name:"address",type:"text",formik:r,placeholder:"Enter your address"}),e.jsx(A,{label:"Is Water Connection?",name:"isConsumer",formik:r,children:_.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),r.values.isConsumer==="yes"&&e.jsx(B,{onBlur:I,label:"Consumer No",name:"consumerNo",type:"text",formik:r,placeholder:"Enter your consumer number"}),e.jsx(A,{label:"Is Trade License?",name:"isLicense",formik:r,children:_.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),r.values.isLicense==="yes"&&e.jsx(B,{label:"License No",onBlur:o,name:"licenseNo",type:"text",formik:r,placeholder:"Enter your license number"}),e.jsx(A,{label:"Is Water Harvesting?",name:"isWaterHarvesting",formik:r,children:_.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),r.values.isWaterHarvesting==="yes"&&e.jsx(B,{label:"Water Harvesting Date",name:"waterHarvestingDate",type:"date",formik:r}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsx("div",{className:"text-center",children:e.jsx(h.Button,{size:"sm",type:"submit",color:"blue",loading:l,formik:r,fullWidth:!0,label:"Submit",children:"Next"})})]})})})})]})}function Ee(t){var q,C,v,y,I,o;const m=$(),l=D({});w.useState(""),w.useState(""),ge();const n=U({enableReinitialize:!0,initialValues:t==null?void 0:t.data,validationSchema:H({uploadMeasurement:ue().required("Measurement Sheet is required").test("fileSize","Max 10 mb file size",a=>(a==null?void 0:a.size)<=1e7),comment:j().label("Comment").min(2).max(500)}),onSubmit:async a=>{xe.fire({title:"Are you sure?",text:"\n          You are going to submit the application for the survey. Please make sure all the details are correct.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(d=>{d.isConfirmed&&r(a)}).catch(d=>{var c,g;console.log(d),T.error((g=(c=d==null?void 0:d.response)==null?void 0:c.data)==null?void 0:g.message)})}}),r=async a=>{var d,c,g;try{const s=await(l==null?void 0:l.mutateAsync({api:M.surveyNewApplyByTc,data:{propertyType:a==null?void 0:a.propertyType,propAddress:a==null?void 0:a.address,mobileNo:a==null?void 0:a.mobile,ownerName:a==null?void 0:a.name,ward:a==null?void 0:a.wardId,zone:a==null?void 0:a.zoneId,consumerNo:a==null?void 0:a.consumerNo,licenseNo:a==null?void 0:a.licenseNo,isWaterHarvesting:(a==null?void 0:a.isWaterHarvesting)=="yes",harvestingDate:a==null?void 0:a.waterHarvestingDate}}));(d=s==null?void 0:s.data)!=null&&d.status&&await x(a,(g=(c=s==null?void 0:s.data)==null?void 0:c.data)==null?void 0:g.safId)}catch(s){console.log(s)}},x=async(a,d)=>{var g,s,b,u;const c=new FormData;c.append("safId",d),a==null||a.geoTagged.forEach((i,S)=>{c.append("latitude[".concat(S,"]"),i==null?void 0:i.latitude),c.append("longitude[".concat(S,"]"),i==null?void 0:i.longitude),c.append("directionType[".concat(S,"]"),i==null?void 0:i.directionType),c.append("imagePath[".concat(S,"]"),i==null?void 0:i.imagePath)});try{const i=await l.mutateAsync({api:M.geoTagging,data:c});(g=i==null?void 0:i.data)!=null&&g.status?(T.success("Saf Generated Successfully"),await F(a,d),m("/amc-app/property/saf-generated-new/".concat(d),{replace:!0})):T.error((s=i==null?void 0:i.data)==null?void 0:s.message)}catch(i){T.error((u=(b=i==null?void 0:i.response)==null?void 0:b.data)==null?void 0:u.message)}},F=async(a,d)=>{var g;const c=new FormData;c.append("applicationId",d),c.append("document",a==null?void 0:a.uploadMeasurement);try{const s=await l.mutateAsync({api:M.uploadMeasurementSheetApi,data:c})}catch(s){T.error((g=s==null?void 0:s.data)==null?void 0:g.message)}},L=async a=>{var c,g,s;const d=a.target.files[0];if((d==null?void 0:d.type)==="application/pdf"){const b=new FileReader;b.onload=u=>{t==null||t.setUriPDF(u.target.result),t==null||t.setExt(d.name.split(".").pop())},b.readAsDataURL(d),n.setFieldValue("uploadMeasurement",d)}else{const b=await je((c=a==null?void 0:a.target)==null?void 0:c.files[0]),u=new File([b],(s=(g=a==null?void 0:a.target)==null?void 0:g.files[0])==null?void 0:s.name,{type:"image/*"}),i=new FileReader;i.onload=S=>{t==null||t.setUriPDF(S.target.result),t==null||t.setExt(u.name.split(".").pop())},i.readAsDataURL(u),n.setFieldValue("uploadMeasurement",u)}};return he.useEffect(()=>{var a;t.setData({...t.data,...(a=n.values)==null?void 0:a.uploadMeasurement})},[n.values]),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Upload Measurement Sheet"})}),l.isLoading&&e.jsx(ye,{}),e.jsx(G,{formik:n,children:e.jsxs("div",{children:[e.jsx(h.Card,{className:"w-full",children:e.jsxs(h.CardBody,{children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"font-semibold text-sm",children:"Basic Details"})}),e.jsx("div",{className:"border-b-2 border-gray-300 w-full py-1"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsx("h1",{className:"font-semibold text-sm",children:"Owner Name : "}),e.jsx("h1",{className:"text-sm",children:(q=t==null?void 0:t.data)==null?void 0:q.name}),e.jsx("h1",{className:"font-semibold text-sm",children:"Mobile No : "}),e.jsx("h1",{className:"text-sm w-40 truncate",children:(C=t==null?void 0:t.data)==null?void 0:C.mobile}),e.jsx("h1",{className:"font-semibold text-sm",children:"Address : "}),e.jsx("h1",{className:"text-sm",children:(v=t==null?void 0:t.data)==null?void 0:v.address})]})]})}),e.jsx("div",{className:"my-4 border-b-2"}),e.jsxs(h.Card,{className:"w-full",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-sm font-semibold text-gray-100",children:"Upload Measurement Sheet"})}),(t==null?void 0:t.uriPDF)&&(t.ext==="pdf"?e.jsx(Be,{fileUrl:t==null?void 0:t.uriPDF}):e.jsx("div",{className:"flex justify-center px-4 py-2",children:e.jsx("img",{src:t==null?void 0:t.uriPDF,alt:"preview",loading:"lazy"})})),e.jsx(h.CardBody,{children:e.jsxs("div",{className:"grid grid-cols-1 justify-center gap-5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-1",children:e.jsx("h1",{className:"font-semibold text-xs",children:"Upload Measurement Sheet"})}),e.jsx("input",{type:"file",accept:"application/pdf, image/*",name:"uploadMeasurement",onChange:L,className:"border border-gray-300 p-2 w-full rounded-lg"}),e.jsx("small",{className:"text-red-500",children:((y=n==null?void 0:n.errors)==null?void 0:y.uploadMeasurement)&&((I=n==null?void 0:n.touched)==null?void 0:I.uploadMeasurement)&&((o=n==null?void 0:n.errors)==null?void 0:o.uploadMeasurement)})]}),e.jsx("div",{children:e.jsx(Ie,{label:"Comment",name:"comment",formik:n,placeholder:"Comment"})})]})})]}),e.jsx("div",{className:"my-4 border-b-2"}),e.jsxs("div",{className:"flex flex-row gap-8 justify-center",children:[e.jsx(h.Button,{type:"button",onClick:()=>{t==null||t.prev({...t==null?void 0:t.data,...n==null?void 0:n.values})},size:"sm",className:"px-10",color:"blue-gray",children:e.jsx("small",{children:"Back"})}),e.jsx(h.Button,{type:"submit",size:"sm",className:"px-5",color:"blue",children:e.jsx("small",{children:"Final Submit"})})]})]})})]})}function ra(){const[t,m]=w.useState(0),[l,n]=w.useState({name:"",mobile:"",zoneId:"",wardId:"",address:"",isConsumer:"no",isLicense:"no",consumerNo:"",licenseNo:"",propertyType:"",isWaterHarvesting:"no",waterHarvestingDate:"",comment:"",uploadMeasurement:"",geoTagged:[{latitude:"",longitude:"",altitude:"",accuracy:"",imagePath:"",directionType:"",rainWaterHarvesting:""}]}),[r,x]=w.useState({}),[F,L]=w.useState({}),[q,C]=w.useState(""),[v,y]=w.useState(""),I=d=>{console.log(d)},o=(d,c=!1)=>{if(n({...l,...d}),c){I(d);return}m(t+1)},a=d=>{n({...l,...d}),m(t-1)};return e.jsx(Se,{title:"Survey Form",children:e.jsx("div",{className:"px-4 py-6 flex-1",children:e.jsx("div",{children:{0:e.jsx(ze,{next:o,data:l,setData:n,setConsumerDetails:x,setLicenseDetails:L}),1:e.jsx(qe,{next:o,prev:a,data:l,setData:n,setConsumerDetails:x,consumerDetails:r,licenseDetails:F,setLicenseDetails:L}),2:e.jsx(Me,{next:o,prev:a,data:l,setData:n,setConsumerDetails:x,consumerDetails:r,setLicenseDetails:L}),3:e.jsx(Ee,{next:o,prev:a,data:l,setData:n,setConsumerDetails:x,consumerDetails:r,setLicenseDetails:L,licenseDetails:F,uriPDF:q,setUriPDF:C,ext:v,setExt:y})}[t]})})})}export{ra as default};
