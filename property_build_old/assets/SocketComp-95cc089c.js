import{a,aE as b,aF as n,j as o}from"./react-2b0b979a.js";import{A as v,a as y,d as E}from"./index-17ffab0d.js";import"./material-d4b16f21.js";import"./dateFns-d8bde0f9.js";import"./jspdfAutotable-996315cc.js";import"./mui-21ea0068.js";import"./reactEmotion-f996df66.js";import"./chart-475af344.js";import"./router-00804812.js";import"./lodash-612f78cf.js";import"./axios-ab898d10.js";/* empty css                */import"./moment-56196fff.js";import"./html2canvas-71958c39.js";import"./i18next-9a95e6a2.js";const q=()=>{const[u,g]=a.useState("https://acaa-203-129-217-58.ngrok-free.app"),[p,c]=a.useState([]),[m,i]=a.useState(""),{api_checkHeartBeat:h}=E(),{sendMessage:C,lastMessage:s,readyState:l}=b(u);a.useEffect(()=>{s!==null&&(c(t=>t.concat(s)),x(s.data))},[s,c]);const S=a.useCallback(()=>g("wss://demos.kaazing.com/echo"),[]),d=a.useCallback(()=>C("Hello"),[]),k={[n.ReadyState.CONNECTING]:"Connecting",[n.ReadyState.OPEN]:"Open",[n.ReadyState.CLOSING]:"Closing",[n.ReadyState.CLOSED]:"Closed",[n.ReadyState.UNINSTANTIATED]:"Uninstantiated"}[l],x=t=>{f()},f=()=>{v.post(h,{},y()).then(function(t){var e;(e=t==null?void 0:t.data)!=null&&e.status}).catch(function(t){})},j=()=>{setInterval(()=>{d()},2e3)};return a.useEffect(()=>{j()},[]),navigator.geolocation&&(navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(t=>{t.state==="granted"?navigator.geolocation.getCurrentPosition(e=>{const r=e.coords.latitude;e.coords.longitude,i(`location: ${r}`)},e=>{}):t.state==="prompt"&&navigator.geolocation.getCurrentPosition(e=>{const r=e.coords.latitude;e.coords.longitude,i(`location: ${r}`)},e=>{})}):navigator.geolocation.getCurrentPosition(t=>{const e=t.coords.latitude;t.coords.longitude,i(`location: ${e}`)},t=>{})),o.jsxs("div",{children:[o.jsxs("div",{children:["latitude : ",m]}),o.jsx("button",{onClick:S,children:"Click Me to change Socket Url"}),o.jsx("br",{}),o.jsx("br",{}),o.jsx("button",{onClick:d,disabled:l!==n.ReadyState.OPEN,children:"Click Me to send 'Hello'"}),o.jsx("br",{}),o.jsx("br",{}),o.jsxs("span",{children:["The WebSocket is currently ",k]}),s?o.jsxs("span",{children:["Last message: ",s.data]}):null,o.jsx("ul",{children:p.map((t,e)=>o.jsx("span",{children:t?t.data:null},e))})]})};export{q as default};
