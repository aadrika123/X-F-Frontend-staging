import{a as t,b1 as f,j as e,bh as Y}from"./react-2b0b979a.js";import{a as j,A as w,Y as H}from"./index-17ffab0d.js";import{a as g}from"./axios-ab898d10.js";import"./material-d4b16f21.js";import"./dateFns-d8bde0f9.js";import"./jspdfAutotable-996315cc.js";import"./mui-21ea0068.js";import"./reactEmotion-f996df66.js";import"./chart-475af344.js";import"./router-00804812.js";import"./lodash-612f78cf.js";/* empty css                */import"./moment-56196fff.js";import"./html2canvas-71958c39.js";import"./i18next-9a95e6a2.js";function J(){var R,A,E;const[a,m]=t.useState(0),[i,x]=t.useState(0),[r,v]=t.useState(),[d,k]=t.useState(),[u,N]=t.useState(),[_,y]=t.useState(),[I,L]=t.useState(),[C,S]=t.useState();t.useState();const[h,W]=t.useState([]);let U={ID:_,forwodID:I,backwodID:C,showFullList:!1};const D=()=>{W([...h,U])},l=()=>{g({method:"post",url:"http://192.168.0.166/api/ulb/workflow/member",data:{ulbID:a,workflowsID:i,initiator:d,finisher:u,rolles:h},headers:j()}).then(function(p){p.data.status}).catch(function(p){})},c=j(),n=(s,p)=>{},{isLoading:b,data:T,isError:q,error:z}=f("UlbWorkFlowRolesJSThis-Query",()=>w.get("http://192.168.0.166/api/get-all-ulb")),{isLoading:M,data:F,refetch:Q,isError:G,error:K}=f("UlbWorkFlowListDatasthisNItdfjgoisduw",()=>w.get(`http://192.168.0.166/api/property/workflows/${a}`,c));return t.useEffect(()=>{Q()},[a]),t.useEffect(()=>{g.get(`http://192.168.0.166/api/ulb/workflow/member?ulbID=${a}&workflowsID=${i}`,c).then(function(s){v(s)}).catch(function(s){})},[a,i]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border shadow-xl",children:[e.jsx("div",{className:"border shadow-lg",children:e.jsx("div",{className:"p-2 shadow-md bg-gradient-to-r from-indigo-300 via-purple-300 to-pink-300",children:e.jsx("div",{className:"grid grid-cols-2 ",children:e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx("span",{className:"text-xl font-semibold",children:"Manage ULB Workflow Roles"})]})})})}),e.jsxs("div",{className:"flex bg-sky-100 py-4 justify-center",children:[e.jsxs("div",{className:"mx-2",children:[e.jsx("span",{className:"font-medium",children:"Select ULB : "}),e.jsxs("select",{type:"text",className:"pl-2 w-72 border border-blue-300 rounded-sm h-8 font-semibold",onChange:s=>m(s.target.value),children:[e.jsx("option",{value:"",children:"Select Your ULB"}),b?"":T.data.map(s=>e.jsx("option",{value:s.id,children:s.ulb_name}))]})]}),e.jsxs("div",{className:"mx-2",children:[e.jsx("span",{className:"font-medium",children:"Workflow List : "}),e.jsxs("select",{type:"text",className:"pl-2 w-52 border border-blue-300 rounded-sm h-8 font-semibold",onChange:s=>x(s.target.value),children:[e.jsx("option",{value:"",children:"Select Workflow"}),M?"":F==null?void 0:F.data.data.map(s=>e.jsx("option",{value:s.workflow_id,children:s.workflow_name}))]})]})]}),e.jsx("div",{className:"m-5",children:e.jsx("div",{className:"flex justify-center my-5",children:(r==null?void 0:r.data.status)&&e.jsxs("div",{className:"flex",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-xl",children:" Initiator"}),e.jsxs("select",{onChange:s=>k(s.target.value),className:"border border-black h-8 w-48 mx-3 px-2 rounded-bl-lg font-semibold",children:[e.jsx("option",{children:" -- Choose Initiator -- "}),(R=r==null?void 0:r.data.data.rolls)==null?void 0:R.map((s,p)=>e.jsx("option",{value:s.rolle_id,children:s.role_name}))]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-xl",children:" Finisher"}),e.jsxs("select",{onChange:s=>N(s.target.value),className:"border border-black h-8 w-48 mx-3 px-2 rounded-br-lg font-semibold",children:[e.jsx("option",{value:"",children:" -- Choose Finisher -- "}),(A=r==null?void 0:r.data.data.rolls)==null?void 0:A.filter(s=>s.rolle_id!=d).map(s=>(s.id,e.jsx("option",{value:s.rolle_id,children:s.role_name})))]})]})]})})}),e.jsxs("div",{children:[d&&e.jsxs("table",{className:"w-full",children:[e.jsxs("tr",{className:"border-y h-8 bg-sky-100 ",children:[e.jsx("th",{children:"Role List"}),e.jsx("th",{children:"Forward To"}),e.jsx("th",{children:"Backward To"}),e.jsx("th",{children:"Access"})]}),(E=r==null?void 0:r.data.data.rolls)==null?void 0:E.map((s,p)=>{var $,B;return e.jsxs("tr",{className:`text-center h-8 bg-green-${s.show_full_list&&100}`,children:[e.jsxs("td",{className:"font-medium",children:[s.role_name,"(",s.rolle_id,")"]}),e.jsx("td",{children:e.jsxs("select",{onChange:o=>{L(o.target.value)},name:"forwodID",className:"border border-black w-48",children:[e.jsx("option",{value:"",children:" -- Select -- "}),($=r==null?void 0:r.data.data.rolls)==null?void 0:$.filter(o=>o.rolle_id!=d).map(o=>e.jsx("option",{value:o.rolle_id,children:o.role_name}))]})}),e.jsx("td",{children:e.jsxs("select",{onChange:o=>{S(o.target.value),y(s.rolle_id),D()},name:"backwodID",className:"border border-black w-48",children:[e.jsx("option",{value:"",children:" -- Select -- "}),(B=r==null?void 0:r.data.data.rolls)==null?void 0:B.filter(o=>o.rolle_id!=u).map(o=>e.jsx("option",{value:o.rolle_id,children:o.role_name}))]})}),e.jsxs("td",{children:[e.jsx("input",{className:"w-4 h-4",type:"checkbox",name:"fullaccess",onChange:o=>n(o.target.value,o.target.checked),value:s.rolle_id}),e.jsxs("span",{className:`font-semibold text-${s.show_full_list?"green-600":"black"}`,children:[" ","Full Access"]})]})]})})]}),e.jsx("div",{className:"flex justify-center my-5",children:e.jsx("button",{onClick:l,className:"px-5 py-1 mx-5 bg-blue-600 hover:bg-blue-700 hover:rounded-md font-semibold text-white rounded-sm shadow-sm",type:"submit",children:"Assign"})})]})]})})}function O(){const[a,m]=t.useState(0),[i,x]=t.useState(),[r,v]=t.useState(),[d,k]=t.useState(1),u=j(),N=(l,c,n)=>{n==!0?n=!1:n=!0,_(l,c,n)},_=(l,c,n)=>{g({method:"post",url:"http://192.168.0.166/api/workflow/workflow-roles",data:{ulbWorkflowID:l,roleID:c,status:n},headers:j()}).then(function(b){b.data.status&&k(d+1)}).catch(function(b){})},{isLoading:y,data:I,isError:L,error:C}=f("UlbWorkFlowMaping-Query",()=>w.get("http://192.168.0.166/api/get-all-ulb")),{isLoading:S,data:h,refetch:W,isError:U,error:D}=f("UlbWorkFlowListDatas",()=>w.get(`http://192.168.0.166/api/property/workflows/${a}`,u));return t.useEffect(()=>{W()},[a]),t.useEffect(()=>{g.get(`http://192.168.0.166/api/workflow/workflow-roles?ulbID=${a}&workflowID=${i}`,u).then(function(l){v(l)}).catch(function(l){})},[d,i]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border shadow-xl",children:[e.jsx("div",{className:"border shadow-lg",children:e.jsx("div",{className:"p-2 shadow-md bg-gradient-to-r from-indigo-300 via-purple-300 to-pink-300",children:e.jsx("div",{className:"grid grid-cols-2 ",children:e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx("span",{className:"text-xl font-semibold",children:"ULB Workflow Roles Mapping"})]})})})}),e.jsxs("div",{className:"flex bg-sky-100 py-2 justify-center",children:[e.jsxs("div",{className:"m-3",children:[e.jsx("span",{className:"font-medium",children:"Select ULB : "}),e.jsxs("select",{type:"text",className:"pl-2 w-72 border border-blue-300 rounded-sm h-8 font-semibold",onChange:l=>m(parseInt(l.target.value)),children:[e.jsx("option",{value:"",children:"Select Your ULB"}),y?"":I.data.map(l=>e.jsx("option",{value:l.id,children:l.ulb_name}))]})]}),e.jsxs("div",{className:"m-3",children:[e.jsx("span",{className:"font-medium",children:"Select Workflow : "}),e.jsxs("select",{type:"text",className:"pl-2 w-40 border border-blue-300 rounded-sm h-8 font-semibold",onChange:l=>x(l.target.value),children:[e.jsx("option",{value:"",children:"Select Workflow"}),S?"":h==null?void 0:h.data.data.map(l=>e.jsx("option",{value:l.workflow_id,children:l.workflow_name}))]})]})]}),e.jsx("div",{className:"py-3",children:e.jsx("div",{className:"grid grid-cols-4 mb-2",children:r&&(r==null?void 0:r.data.data.map((l,c)=>e.jsx("div",{className:"col-span-1 ",children:e.jsx("div",{htmlFor:"roles",style:{backgroundColor:`${l.permission_status==!0?"#2dd240":"#d9cac8"}`},className:`flex border shadow-yellow-200 shadow-sm px-2 py-1 mt-2  mx-2 rounded-sm cursor-pointer hover:animate-pulse border-1 border-${l.permission_status==!0?"black":"gray-400"}`,children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-1",children:e.jsx("input",{className:"mr-1",type:"checkbox",name:"roles",checked:l.permission_status,onChange:()=>N(l.ulb_workflow_id,l.role_id,l.permission_status),value:l.role_id})}),e.jsx("div",{className:"col-span-10 ml-1 text-center",children:e.jsx("p",{className:"font-semibold",children:l.role_name})}),e.jsx("div",{className:"col-span-1",children:e.jsx("p",{className:"font-semibold mt-1",children:l.status==!0&&e.jsx(Y,{color:"blue"})})})]})})})))})})]})})}function he(){const[a,m]=t.useState(0),i=[{title:"WorkFlow Maping",tabIndex:0},{title:"WorkFlow Roles",tabIndex:1},{title:"_________",tabIndex:2}],x=r=>{m(r)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 rounded-lg mt-4 -ml-10 shadow-xl broder-2 border-sky-200 bg-gray-200",children:[e.jsx("div",{className:"col-span-12 sm:col-span-2 ",children:e.jsx(H,{tabs:i,fun:x})}),a==0&&e.jsxs("div",{className:"col-span-12 sm:col-span-10 shadow-lg bg-white overflow-y-scroll",style:{height:"90vh"},children:[" ",e.jsx(O,{})," "]}),a==1&&e.jsxs("div",{className:"col-span-12 sm:col-span-10 shadow-lg bg-white overflow-y-scroll",style:{height:"90vh"},children:[" ",e.jsx(J,{})," "]})]})})}export{he as default};
