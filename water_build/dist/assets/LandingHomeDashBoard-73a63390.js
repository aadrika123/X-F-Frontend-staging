import{R as ne,x as G,j as t,k as l,l as a,m as V,o as v,D as J,M as F,h as j,Y as le,Z as oe,$ as ae,a0 as I,H as ce,W as re,w as se,q as Q,a1 as de}from"./index-253bad62.js";import me from"./WaterJskDashboard-8edffe05.js";function Z(){const{notify:e}=ne.useContext(G);return e}const H=e=>{var s;return t("div",{className:"divide-y-2 m-2",children:l("div",{className:"w-full rounded overflow-hidden shadow-lg bg-white",children:[l("div",{className:"px-6 py-4 flex items-center border-b border-gray-200",children:[l("div",{className:"flex-initial",children:[" ",t("span",{className:"w-10 h-10 bg-indigo-100 rounded-full flex justify-center items-center",children:t("img",{className:"bg-indigo-50 rounded-full p-1",src:e==null?void 0:e.image,alt:""})})," "]}),t("div",{className:"font-bold text-md mb-2 flex-1 text-center text-gray-700",children:e==null?void 0:e.heading}),t("div",{className:"font-bold text-2xl mb-2 flex-initial",children:t("span",{className:"bg-indigo-50 text-indigo-600 px-2 py-1 rounded-lg",children:e==null?void 0:e.total})})]}),t("div",{className:"px-6 py-4 flex items-center justify-evenly border-b",children:Array.isArray(e==null?void 0:e.appDetails)&&((s=e==null?void 0:e.appDetails)==null?void 0:s.map(c=>l("div",{className:"flex flex-col items-center",children:[t("div",{className:"font-bold text-lg flex-1 text-gray-700",children:c==null?void 0:c.number}),t("div",{className:"text-xs mb-2 font-semibold text-gray-400",children:c==null?void 0:c.type})]})))})]})})};function ge(e){var h,L,u,S,w,N,M,T,C,g,k,O,A,f,r,x,E,y,_;const[s,c]=a.useState(!1);a.useState();const[o,d]=a.useState("recent");Z();const m=V(),i=e==null?void 0:e.applicationDashboardData;return l(v,{children:[s&&l("div",{className:"inline",children:[" ",t(J,{})," "]}),l("div",{className:" z-0 rounded-lg",children:[l("div",{className:"grid md:grid-cols-3 grid-cols-1 mt-10",children:[t(H,{image:"https://cdn-icons-png.flaticon.com/512/281/281760.png",heading:"Today's Applied Applications",total:(h=i==null?void 0:i.applicationDetails)==null?void 0:h.applicationCount,appDetails:[{number:(L=i==null?void 0:i.applicationDetails)==null?void 0:L.newConnectionList,type:"New Connection"},{number:(u=i==null?void 0:i.applicationDetails)==null?void 0:u.RegulizationList,type:"Regularization"}]}),t(H,{image:"https://cdn-icons-png.flaticon.com/512/925/925014.png",heading:"Today's Total Collection",total:"â‚¹"+((S=i==null?void 0:i.amountData)==null?void 0:S.totalCollection),appDetails:[{number:(w=i==null?void 0:i.amountData)==null?void 0:w.cashAmount,type:"CASH"},{number:(N=i==null?void 0:i.amountData)==null?void 0:N.onlineAmount,type:"QR/UPI"},{number:(M=i==null?void 0:i.amountData)==null?void 0:M.ddAmount,type:"DD"},{number:(T=i==null?void 0:i.amountData)==null?void 0:T.chequeAmount,type:"CHEQUE"}]}),t(H,{image:"https://cdn-icons-png.flaticon.com/512/925/925547.png",heading:"Today's Total Transactions",total:(C=i==null?void 0:i.transactionCount)==null?void 0:C.totalCollectionCount,appDetails:[{number:(g=i==null?void 0:i.transactionCount)==null?void 0:g.cashCollection,type:"CASH"},{number:(k=i==null?void 0:i.transactionCount)==null?void 0:k.onlineCollection,type:"QR/UPI"},{number:(O=i==null?void 0:i.transactionCount)==null?void 0:O.ddCollection,type:"DD"},{number:(A=i==null?void 0:i.transactionCount)==null?void 0:A.chequeCollection,type:"CHEQUE"}]})]}),t("p",{className:"mt-5"}),l("div",{className:"flex space-x-5",children:[t("button",{onClick:()=>d("recent"),className:`${o=="recent"?"bg-indigo-500 text-white":"border border-indigo-500 text-indigo-500 hover:text-white bg-white"}   px-4 py-0.5 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-500 hover:text-white}`,children:"Recent Applications"}),t("button",{onClick:()=>d("search"),className:`${o=="search"?"bg-indigo-500 text-white":"border border-indigo-500 text-indigo-500 hover:text-white bg-white"}   px-4 py-0.5 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-500 hover:text-white}`,children:"Search Applications"})]}),o=="recent"&&l(v,{children:[t("div",{className:"px-1 font-semibold  text-gray-500 mt-5 google-roboto",children:l("div",{className:"flex-initial",children:[t(F,{className:"inline"})," Recent Applications"]})}),t("div",{className:"container mx-auto mt-2  rounded-lg bg-white",children:t("div",{className:"py-0 shadow-xl mt-3",children:t("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 overflow-x-auto w-full",children:t("div",{className:"inline-block min-w-full rounded-lg overflow-hidden",children:l("table",{className:"min-w-full leading-normal",children:[t("thead",{className:"bg-indigo-100",children:l("tr",{className:"font-semibold",children:[t("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"#"}),t("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"Application No."}),t("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"Applicant Name"}),t("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"Assessment Type"}),t("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"Apply Date"}),t("th",{scope:"col",className:"px-5 py-2 border-b  text-gray-800  text-left text-sm",children:"Action"})]})}),l("tbody",{children:[((f=i==null?void 0:i.applicationList)==null?void 0:f.length)!=0&&((r=i==null?void 0:i.applicationList)==null?void 0:r.map((n,b)=>l("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[t("td",{className:"px-2 py-2 text-sm",children:b+1}),t("td",{className:"px-2 py-2 text-sm",children:n==null?void 0:n.application_no}),t("td",{className:"px-2 py-2 text-sm",children:n==null?void 0:n.applicantname}),l("td",{className:"px-2 py-2 text-sm",children:[(n==null?void 0:n.connection_type_id)==1&&"New Connection",(n==null?void 0:n.connection_type_id)==2&&"Regularization"]}),l("td",{className:"px-2 py-2 text-sm text-left",children:[" ",j(n==null?void 0:n.apply_date,"YYYY-MM-DD").format("DD-MMM-yy")]}),t("td",{className:"px-2 py-2 text-sm text-left",children:t("button",{type:"button",onClick:()=>m(`/waterViewApplication/${n==null?void 0:n.id}`),className:"cypress_owner_add_update px-4 py-2 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View"})})]}))),((x=i==null?void 0:i.applicationList)==null?void 0:x.length)==0&&t("tr",{children:t("td",{colSpan:5,className:"text-center text-red-500 font-semibold py-4",children:"No Application Found"})})]})]})})})})}),l("div",{className:"container mx-auto mt-10 rounded-lg",children:[t("div",{className:"px-1 font-semibold  text-gray-500 mt-10 google-roboto",children:l("div",{className:"flex-initial",children:[t(F,{className:"inline"})," Recent Payments"]})}),t("div",{className:"py-0 shadow-xl mt-3 bg-white",children:t("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 overflow-x-auto",children:t("div",{className:"inline-block min-w-full rounded-lg overflow-hidden",children:l("table",{className:"min-w-full leading-normal",children:[t("thead",{className:"bg-indigo-100",children:l("tr",{className:"font-semibold",children:[t("th",{scope:"col",className:"px-5 py-2 border-b text-gray-800  text-left text-sm",children:"#"}),t("th",{scope:"col",className:"px-5 py-2 border-b text-gray-800  text-left text-sm",children:"Transaction No."}),t("th",{scope:"col",className:"px-5 py-2 border-b text-gray-800  text-left text-sm",children:"Amount"}),t("th",{scope:"col",className:"px-5 py-2 border-b text-gray-800  text-left text-sm",children:"Payment Mode"}),t("th",{scope:"col",className:"px-5 py-2 border-b text-gray-800  text-left text-sm",children:"Date"}),t("th",{scope:"col",className:"px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm",children:"Action"})]})}),l("tbody",{children:[((E=i==null?void 0:i.transactionDetails)==null?void 0:E.length)!=0&&((y=i==null?void 0:i.transactionDetails)==null?void 0:y.map((n,b)=>l("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[t("td",{className:"px-2 py-2 text-sm text-left",children:b+1}),t("td",{className:"px-2 py-2 text-sm text-left",children:n==null?void 0:n.tran_no}),t("td",{className:"px-2 py-2 text-sm text-left",children:n==null?void 0:n.amount}),t("td",{className:"px-2 py-2 text-sm text-left",children:n==null?void 0:n.payment_mode}),t("td",{className:"px-2 py-2 text-sm text-left",children:j(n==null?void 0:n.tran_date,"YYYY-MM-DD").format("DD-MMM-yy")}),t("td",{className:"px-2 py-2 text-sm text-left",children:t("button",{type:"button",onClick:()=>m(`/water-payment-receipt/${n==null?void 0:n.tran_no}/consumer`),className:"px-4 py-2 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View"})})]}))),((_=i==null?void 0:i.transactionDetails)==null?void 0:_.length)==0&&t("tr",{children:t("td",{colSpan:5,className:"text-center text-red-500 font-semibold py-4",children:"No Payment Found"})})]})]})})})})]})]}),o=="search"&&l(v,{children:[t("div",{className:"px-1 font-semibold  text-gray-500 mt-5 google-roboto",children:l("div",{className:"flex-initial",children:[t(F,{className:"inline"})," Search Applications by date"]})}),t(me,{})]})]})]})}const he="/assets/forward-40be1d8b.png",ue="/assets/pending-8d2a86b8.png",xe="/assets/received-89599cf5.png",z=e=>t("div",{class:"transform hover:scale-105 transition duration-300 shadow-lg  m-2",children:l("div",{class:"p-5 bg-white",children:[l("div",{class:"flex justify-between border-b pb-4",children:[t("span",{className:"w-10 h-10 bg-indigo-100 rounded-full flex justify-center items-center",children:t("img",{className:"bg-indigo-50 rounded-full p-1",src:e==null?void 0:e.image,alt:""})}),t("div",{class:"bg-indigo-100 rounded-full h-6 px-2 flex justify-items-center text-indigo-600 font-semibold text-xs",children:t("span",{class:"flex items-center",children:le()})})]}),t("div",{class:"ml-2 w-full flex-1",children:t("div",{children:l("div",{class:"flex justify-between mt-4 pr-4",children:[t("div",{class:"mt-1 text-base text-gray-600",children:e==null?void 0:e.heading}),t("div",{className:"font-bold leading-8 text-xl",children:e!=null&&e.loading?t("div",{class:"spinner2"}):oe(e==null?void 0:e.total)})]})})})]})});function fe(e){const[s,c]=a.useState(!1),o=e==null?void 0:e.worflowDashData;return l(v,{children:[s&&l("div",{className:"inline",children:[" ",t(J,{})," "]}),t("div",{className:"  z-0 rounded-lg",children:l("div",{className:"grid md:grid-cols-3 grid-cols-1 mt-10",children:[t(z,{image:he,heading:"Application Forwarded",total:o==null?void 0:o.todayForwardCount}),t(z,{image:xe,heading:"Application Received",total:o==null?void 0:o.todayReceivedCount}),t(z,{image:ue,heading:"Total Pending Application",total:o==null?void 0:o.pendingApplication})]})})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var p=function(){return p=Object.assign||function(s){for(var c,o=1,d=arguments.length;o<d;o++){c=arguments[o];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(s[m]=c[m])}return s},p.apply(this,arguments)};function ye(e,s){var c={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&s.indexOf(o)<0&&(c[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(e);d<o.length;d++)s.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(e,o[d])&&(c[o[d]]=e[o[d]]);return c}var be=function(){return Math.random().toString(36).substring(6)},ve=function(e){var s=e.animate,c=s===void 0?!0:s,o=e.animateBegin,d=e.backgroundColor,m=d===void 0?"#f5f6f7":d,i=e.backgroundOpacity,h=i===void 0?1:i,L=e.baseUrl,u=L===void 0?"":L,S=e.children,w=e.foregroundColor,N=w===void 0?"#eee":w,M=e.foregroundOpacity,T=M===void 0?1:M,C=e.gradientRatio,g=C===void 0?2:C,k=e.gradientDirection,O=k===void 0?"left-right":k,A=e.uniqueKey,f=e.interval,r=f===void 0?.25:f,x=e.rtl,E=x===void 0?!1:x,y=e.speed,_=y===void 0?1.2:y,n=e.style,b=n===void 0?{}:n,B=e.title,Y=B===void 0?"Loading...":B,q=e.beforeMask,W=q===void 0?null:q,ee=ye(e,["animate","animateBegin","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","gradientDirection","uniqueKey","interval","rtl","speed","style","title","beforeMask"]),P=A||be(),U=P+"-diff",$=P+"-animated-diff",K=P+"-aria",te=E?{transform:"scaleX(-1)"}:null,R="0; "+r+"; 1",D=_+"s",ie=O==="top-bottom"?"rotate(90)":void 0;return a.createElement("svg",p({"aria-labelledby":K,role:"img",style:p(p({},b),te)},ee),Y?a.createElement("title",{id:K},Y):null,W&&a.isValidElement(W)?W:null,a.createElement("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+u+"#"+U+")",style:{fill:"url("+u+"#"+$+")"}}),a.createElement("defs",null,a.createElement("clipPath",{id:U},S),a.createElement("linearGradient",{id:$,gradientTransform:ie},a.createElement("stop",{offset:"0%",stopColor:m,stopOpacity:h},c&&a.createElement("animate",{attributeName:"offset",values:-g+"; "+-g+"; 1",keyTimes:R,dur:D,repeatCount:"indefinite",begin:o})),a.createElement("stop",{offset:"50%",stopColor:N,stopOpacity:T},c&&a.createElement("animate",{attributeName:"offset",values:-g/2+"; "+-g/2+"; "+(1+g/2),keyTimes:R,dur:D,repeatCount:"indefinite",begin:o})),a.createElement("stop",{offset:"100%",stopColor:m,stopOpacity:h},c&&a.createElement("animate",{attributeName:"offset",values:"0; 0; "+(1+g),keyTimes:R,dur:D,repeatCount:"indefinite",begin:o})))))},X=function(e){return e.children?a.createElement(ve,p({},e)):a.createElement(pe,p({},e))},pe=function(e){return a.createElement(X,p({viewBox:"0 0 476 124"},e),a.createElement("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),a.createElement("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),a.createElement("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),a.createElement("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),a.createElement("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),a.createElement("circle",{cx:"20",cy:"20",r:"20"}))};const we=X,Ne=e=>{const s=V();return t("div",{className:" bg-white shadow-xl py-4 px-2 md:px-6 md:py-6 mt-4 mb-10",children:l("div",{className:"flex flex-col md:flex-row",children:[l("div",{className:"flex-initial ml-4",children:[t("div",{className:"text-2xl font-bold text-black google-roboto capitalize",children:e==null?void 0:e.heading}),t("div",{className:"mt-1",children:l("span",{className:"text-gray-600",children:[t(ae,{className:"inline text-green-500 text-xl"}),e==null?void 0:e.subHeading]})}),t("div",{})]}),l("div",{className:"flex-1 flex text-right justify-center items-center md:justify-end md:items-end h-full mt-4 md:mt-0",children:[t(I,{anchorId:"button-3"}),t("button",{id:"button-3","data-tooltip-content":"Click to change password.",onClick:()=>s(e==null?void 0:e.changePasswordLink),className:"mr-4 cypress_floor_add_update text-gray-700 px-4 md:px-8 py-3 bg-white-600 font-medium border text-xs leading-tight capitalize rounded-xl shadow-md hover:bg-indigo-500 hover:shadow-lg focus:bg-indigo-500 hover:text-white focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:"Change Password"}),!(e!=null&&e.button)&&l(v,{children:[t(I,{anchorId:"button-1"}),t("button",{id:"button-1","data-tooltip-content":"Click to go to water  workflow.",onClick:()=>s(e==null?void 0:e.mainWorkflowLink),className:"cypress_floor_add_update text-white px-4 md:px-8 py-3 bg-indigo-500 font-medium border text-xs leading-tight capitalize rounded-xl shadow-md hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:"Water Workflow"})]}),(e==null?void 0:e.button)&&l(v,{children:[t(I,{anchorId:"button-2"}),t("button",{id:"button-2","data-tooltip-content":"Click to apply water connection.",onClick:()=>s(e==null?void 0:e.applyLink),className:"cypress_floor_add_update text-white px-4 md:px-8 py-3 bg-indigo-500 font-medium border text-xs leading-tight capitalize rounded-xl shadow-md hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:"Apply Water Connection"})]})]})]})})};function Ae(){var A,f;const[e,s]=a.useState(),[c,o]=a.useState(),[d,m]=a.useState(),[i,h]=a.useState(!1),[L,u]=a.useState(!1);Z(),V(),ce("Home");const{api_waterWorkflowDashboardData:S,api_waterApplicationDashboardData:w,header:N}=re(),{userName:M,roles:T,setuserName:C,setroles:g}=a.useContext(G);(A=se())==null||A.ulb_name,a.useEffect(()=>{k(),O()},[]);const k=()=>{u(!0),Q.post(S,{},N).then(r=>{r.data.status?(s(r.data.data),u(!0)):(console.log("Failed to get Workflow dashboard data",r),u(!0))}).catch(r=>{console.log("Exception while getting Workflow dashboard data",r),u(!0)})},O=()=>{h(!0),Q.post(w,{},N).then(r=>{var x,E,y,_,n,b;r.data.status?(console.log("==>> Application Dashboard data",(x=r==null?void 0:r.data)==null?void 0:x.data),g(((y=(E=r==null?void 0:r.data)==null?void 0:E.data)==null?void 0:y.roleName)||"N/A"),C(((b=(n=(_=r==null?void 0:r.data)==null?void 0:_.data)==null?void 0:n.userDetails)==null?void 0:b.user_name)||"N/A"),o(r.data.data),h(!1)):(console.log("Failed to get Dashboard data",r),h(!1))}).catch(r=>{console.log("Exception while getting dashboard data",r),h(!1)})};return j(Date()).format("DD-MMM-yy"),a.useEffect(()=>{const r=setInterval(()=>{const x=j(Date().toLocaleString()).format("hh:mm:ss A");m(x)},1e3);return()=>clearInterval(r)},[]),l(v,{children:[t(Ne,{button:c==null?void 0:c.canView,matchForApply:["JSK"],matchForWf:["dealing assisstant","BACK OFFICE"],allRole:(f=de("userDetails"))==null?void 0:f.roles,heading:"Water Home Page",subHeading:"Verified Account",changePasswordLink:"/change-password/change",mainWorkflowLink:"/water-workflow-new",applyLink:"/water-jsk-apply"}),i&&t(v,{children:t("div",{className:"flex justify-center",children:l(we,{speed:3,width:725,height:157,viewBox:"0 0 725 157",backgroundColor:"#f3f3f3",foregroundColor:"#adb6e6",children:[t("rect",{x:"84",y:"54",rx:"3",ry:"3",width:"725",height:"11"}),t("rect",{x:"10",y:"80",rx:"3",ry:"3",width:"725",height:"12"}),t("rect",{x:"7",y:"100",rx:"3",ry:"3",width:"725",height:"13"}),t("rect",{x:"9",y:"123",rx:"3",ry:"3",width:"725",height:"15"})]})})}),(c==null?void 0:c.canView)&&t(ge,{applicationDashboardData:c}),(e==null?void 0:e.canView)&&t(fe,{worflowDashData:e}),t("div",{className:"w-full h-40"})]})}export{Ae as default};
