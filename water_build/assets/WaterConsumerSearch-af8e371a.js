import{x as le,l as c,v as k,y as te,W as re,A as C,m as oe,q as I,z as ne,B as F,D as se,k as l,o as z,j as e,E as ce,G as ie,H as de,I as _}from"./index-2d4a444a.js";function be(){var A;const{t:r}=le(),[V,d]=c.useState(),[pe,h]=c.useState(!1),{type:u}=k(),[j,i]=c.useState(!1),[t,q]=c.useState(),[he,b]=c.useState(!1),{notify:N}=c.useContext(te),[Z,m]=c.useState(),[g,E]=c.useState(),[y,T]=c.useState(1);c.useState("");const[w,O]=c.useState(5),[v,$]=c.useState(""),[M,S]=c.useState(0),{api_waterSearchConsumer:R,api_newWardByZoneId:U}=re(),{filterBy:p,parameter:f,pages:G}=k(),H=()=>{p!=null&&p!=""&&(console.log("This is What i need ",p,f),x({filterBy:p,parameter:f}))};c.useEffect(()=>{H()},[p,f,G]);const J=C(),K=oe();c.useEffect(()=>{M>0&&x()},[y,w]);const Q=()=>{window.history.pushState(null,"",`/water/waterViewApplication/${o.values.filterBy}/${o.values.parameter} `)},x=a=>{console.log("data",a),m(),b(!1),i(!0);const s={filterBy:a?a.filterBy:o.values.filterBy,parameter:a?a.parameter:o.values.parameter,wardId:o.values.wardId,zoneId:o.values.zoneId,pages:w,page:y,search:v};console.log("th paypayload",s),console.log("before fetch holding details....",s),I.post(R,s,J).then(n=>{var W,P,B,L;console.log("search property list",(P=(W=n==null?void 0:n.data)==null?void 0:W.data)==null?void 0:P.data),(B=n==null?void 0:n.data)!=null&&B.status?(q((L=n==null?void 0:n.data)==null?void 0:L.data),b(!0)):(m("No data found!!!!"),N("No data found","error")),i(!1)}).catch(n=>{console.log("Error while fetching Filter Data",n),N("Something went wrong!!","error"),i(!1),m("Something Went Wrong"),b(!1)})};console.log("readymadeListData.data",t==null?void 0:t.data);const X=a=>a=="&laquo; Previous"?"<< Prev":a=="Next &raquo;"?">> Next":a,Y=ne({filterBy:F().required("This is a required field !"),parameter:F().required("This is a required field !")}),o=se({initialValues:{filterBy:"",parameter:"",wardId:"",zoneId:""},onSubmit:a=>{x(a)},validationSchema:Y}),D=a=>{o.values.filterBy=a.target.value,a.target.value=="propertyNo"&&(d("Property No"),h(!0)),a.target.value=="ownerDetails"&&(d("Owner Details"),h(!1)),a.target.value=="address"&&(d("Address"),h(!1)),a.target.value=="applicationNo"&&(d("Application No"),h(!1))};console.log("readymadeListData.data",t==null?void 0:t.data);const ee=a=>{i(!0),o.setFieldValue("wardId","");let s={zoneId:a};console.log("before fetch wardby old ward...",s),I.post(U,s,C()).then(function(n){console.log("wardlist by zone id list ....",n.data.data),E(n.data.data),i(!1),o.setFieldValue("wardId","")}).catch(function(n){console.log("errorrr.... ",n),i(!1)})},ae=a=>{let s=a.target.name,n=a.target.value;o.values&&d(o.values.filterBy),s==="zoneId"&&ee(n)};return l(z,{children:[j&&e(ce,{}),(u=="re"||u=="mu")&&l("div",{className:"bg-amber-50 px-4 py-4 mb-4 text-lg rounded-lg shadow-lg text-amber-600 inline-block",children:[e(ie,{className:"inline mr-2 text-3xl"})," ",r("tranWaterApplicationSearchPage.searchForAndApplyLabel.label"),e("span",{className:"font-semibold",children:u=="re"?"Re-Assessment":"Mutation"})," ",r("tranWaterApplicationSearchPage.propertySearchInstruction1Label.label")," ",u=="re"?"Re-Assessment":"Mutation"]}),l("div",{className:"border shadow-xl bg-white mt-6",children:[e("div",{className:"flex ml-5 mt-2 ",children:e("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:r("tranWaterApplicationSearchPage.searchWaterConsumerLabel.label")})}),e("form",{onChange:ae,onSubmit:o.handleSubmit,children:l("div",{className:"flex flex-col sm:flex-row justify-center sm:space-x-8 my-5 m-10",children:[l("div",{children:[l("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[r("tranWaterApplicationSearchPage.filterByLabel.label"),e("span",{className:"text-red-500",children:"*"})]}),l("select",{name:"filterBy",onChange:D,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:r("tranWaterApplicationSearchPage.selectApplicationTypeLabel.label")}),l("option",{value:"consumerNo",children:[r("tranWaterApplicationSearchPage.consumerNoLabel.label")," "]}),e("option",{value:"propertyNo",children:r("tranWaterApplicationSearchPage.propertyNo.label")}),e("option",{value:"applicantName",children:r("tranWaterApplicationSearchPage.applicantNameLabel.label")}),e("option",{value:"mobileNo",children:r("tranWaterApplicationSearchPage.mobileNoLabel.label")}),e("option",{value:"applicationNo",children:r("tranWaterApplicationSearchPage.applicationNoLabel.label")})]}),e("p",{className:"text-red-500 text-xs",children:o.touched.filterBy&&o.errors.filterBy?o.errors.filterBy:null})]}),l("div",{children:[l("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Zone ",e("span",{className:"text-red-500",children:"*"})]}),l("select",{name:"zoneId",onChange:o.handleChange,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",disabled:!1,children:[e("option",{value:"",children:"All Zones"}),e("option",{value:"1",children:"Zone A-East"}),e("option",{value:"2",children:"Zone B-West"}),e("option",{value:"3",children:"Zone C-North"}),e("option",{value:"4",children:"Zone D-South"}),e("option",{value:"gov",children:"GOV"}),e("option",{value:"SUS",children:"SUS"})]}),e("p",{className:"text-red-500 text-xs",children:o.touched.zoneId&&o.errors.zoneId?o.errors.zoneId:null})]}),l("div",{children:[l("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Ward No",e("span",{className:"text-red-500",children:"*"})]}),l("select",{name:"wardId",onChange:o.handleChange,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",disabled:!1,children:[e("option",{value:"",children:"All Ward"}),g==null?void 0:g.map((a,s)=>e("option",{value:a.id,children:a.ward_name},s))]}),e("p",{className:"text-red-500 text-xs",children:o.touched.wardNo&&o.errors.wardNo?o.errors.wardNo:null})]}),l("div",{children:[l("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[r("tranWaterApplicationSearchPage.searchByLabel.label")," ",V," ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"parameter",onChange:o.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("p",{className:"text-red-500 text-xs",children:o.touched.parameter&&o.errors.parameter?o.errors.parameter:null})]}),e("div",{className:"mt-4",children:e("button",{type:"submit",className:"w-full border border-green-600 bg-green-600 hover:bg-green-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5 m-3 py-1",children:l("p",{className:"flex",children:[l("span",{className:"mt-1 mr-2",children:[" ",e(de,{})," "]})," ",r("tranWaterApplicationSearchPage.searchRecordLabel.label")," "]})})})]})}),e("div",{className:"flex justify-center text-red-600 mb-2 font-semibold",children:Z}),t!=null&&t.data?l("div",{className:"relative overflow-x-auto sm:rounded-lg border shadow-md",children:[l("div",{className:"flex justify-between my-3 mx-5",children:[l("div",{className:"flex gap-3",children:[e("p",{children:r("tranWaterApplicationSearchPage.showLabel.label")}),l("select",{onChange:a=>(S(s=>s+1),O(a.target.value)),name:"",id:"",className:"border rounded shadow w-24",children:[e("option",{value:"5",children:r("tranWaterApplicationSearchPage.records5Label.label")}),e("option",{value:"10",children:r("tranWaterApplicationSearchPage.records10Label.label")}),e("option",{value:"20",children:r("tranWaterApplicationSearchPage.records20Label.label")}),e("option",{value:"30",children:r("tranWaterApplicationSearchPage.records30Label.label")})]})]}),l("div",{className:"flex gap-3",children:[e("p",{children:r("tranWaterApplicationSearchPage.searchLabel.label")}),e("input",{type:"text",name:"search",value:v,onChange:a=>$(a.target.value),className:"border rounded shadow w-40"})]})]}),console.log("object",(t==null?void 0:t.data.length)==0),(t==null?void 0:t.data.length)==0?"":e(z,{}),l("table",{className:"w-full text-sm text-left text-gray-500 ",children:[e("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:l("tr",{children:[e("th",{scope:"col",className:"px-6 py-3",children:e("div",{className:"flex items-center",children:" Sl no. "})}),e("th",{scope:"col",className:"px-6 py-3",children:e("div",{className:"flex items-center",children:" Zone "})}),e("th",{scope:"col",className:"px-6 py-3",children:l("div",{className:"flex items-center",children:[" ",r("tranWaterApplicationSearchPage.wardNoLabel.label")," "]})}),e("th",{scope:"col",className:"px-6 py-3",children:r("tranWaterApplicationSearchPage.ownersNameLabel.label")}),e("th",{scope:"col",className:"px-6 py-3",children:r("tranWaterApplicationSearchPage.consumerNoLabel.label")}),e("th",{scope:"col",className:"px-6 py-3",children:"Property No"}),e("th",{scope:"col",className:"px-6 py-3",children:r("tranWaterApplicationSearchPage.mobileNoLabel.label")}),e("th",{scope:"col",className:"px-6 py-3",children:r("tranWaterApplicationSearchPage.addressLabel.label")}),e("th",{scope:"col",className:"px-6 py-3",children:"Bill Amount"}),e("th",{scope:"col",className:"px-6 py-3",children:"Status"}),e("th",{scope:"col",className:"px-6 py-3",children:r("tranWaterApplicationSearchPage.actionLabel.label")})]})}),e("tbody",{children:t&&t.data&&t.data.length!==0?t.data.map((a,s)=>l("tr",{className:"bg-white border-b dark:border-gray-700 hover:bg-gray-50",children:[e("td",{className:"w-4 p-4",children:l("div",{className:"flex items-center",children:[" ",s+1]})}),e("td",{className:"w-4 p-4",children:l("div",{className:"flex items-center",children:[" ",_(a.zone_name)]})}),e("td",{className:"w-4 p-4",children:l("div",{className:"flex items-center",children:[" ",_(a.ward_name)]})}),e("td",{className:"px-6 py-4",children:a.owner_name}),e("td",{className:"px-6 py-4",children:a.consumer_no}),e("td",{className:"px-6 py-4",children:a.folio_no}),e("td",{className:"px-6 py-4",children:a.mobile_no}),e("td",{className:"px-6 py-4",children:a.address}),e("td",{className:"px-6 py-4",children:a.balance_amount||"N/A"}),e("td",{className:"px-6 py-4",children:a.payment_status||"N/A"}),e("td",{className:"px-6 py-4",children:e("button",{onClick:()=>{Q(),K(`/waterViewConsumer/${a==null?void 0:a.id}`)},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:r("tranWaterApplicationSearchPage.viewLabel.label")})})]},s)):e("tr",{children:e("td",{colSpan:"10",children:r("tranWaterApplicationSearchPage.noDataFoundLabel.label")})})})]}),l("nav",{className:"block md:flex items-center md:justify-between text-center md:pt-4 m-5","aria-label":"Table navigation",children:[l("span",{className:"text-sm font-normal text-gray-500",children:[r("tranWaterApplicationSearchPage.showingLabel.label"),l("span",{className:"font-semibold text-gray-900 dark:text-white",children:[t==null?void 0:t.from,"-",t==null?void 0:t.to]})," ",r("tranWaterApplicationSearchPage.ofLabel.label")," ",e("span",{className:"font-semibold text-gray-900 dark:text-white",children:t==null?void 0:t.total})]}),e("ul",{className:"inline-flex items-center -space-x-px",children:(A=t==null?void 0:t.links)==null?void 0:A.map(a=>e("li",{children:e("p",{onClick:()=>{T(a==null?void 0:a.url.slice(-1)),S(s=>s+1)},className:`${(a==null?void 0:a.active)==!0?"bg-indigo-500 text-white":"bg-white text-gray-500"} px-3 py-2 leading-tight  border border-gray-300 hover:bg-indigo-100  cursor-pointer whitespace-nowrap`,children:X(a.label)})}))})]})]}):""]})]})}export{be as default};
